{"version":3,"sources":["webpack://UV/./src/extensions/uv-mediaelement-extension/DownloadDialogue.ts","webpack://UV/./src/extensions/uv-mediaelement-extension/Events.ts","webpack://UV/./src/extensions/uv-mediaelement-extension/Extension.ts","webpack://UV/./src/extensions/uv-mediaelement-extension/SettingsDialogue.ts","webpack://UV/./src/extensions/uv-mediaelement-extension/ShareDialogue.ts","webpack://UV/./src/modules/uv-dialogues-module/DownloadDialogue.ts","webpack://UV/./src/modules/uv-dialogues-module/HelpDialogue.ts","webpack://UV/./src/modules/uv-mediaelementcenterpanel-module/MediaElementCenterPanel.ts","webpack://UV/./src/modules/uv-resourcesleftpanel-module/ResourcesLeftPanel.ts","webpack://UV/./src/modules/uv-resourcesleftpanel-module/ThumbsView.ts","webpack://UV/./src/modules/uv-shared-module/Bookmark.ts","webpack://UV/./src/modules/uv-shared-module/DownloadOption.ts"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AAC6G;AAC9G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,8FAAoB;AACM;;;;;;;;;;;;;AClC5B;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACiB;;;;;;;;;;;;;ACTlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACsE;AACM;AACV;AACb;AACpB;AACuC;AACA;AACK;AACoC;AACf;AACA;AAC7C;AACN;AACD;AACoB;AACxB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,+EAAU;AAC9C,SAAS;AACT;AACA,oCAAoC,+EAAU;AAC9C,SAAS;AACT,iCAAiC,+EAAU;AAC3C;AACA,SAAS;AACT,iCAAiC,+EAAU;AAC3C,oCAAoC,+EAAU;AAC9C,SAAS;AACT,iCAAiC,+EAAU;AAC3C;AACA;AACA,SAAS;AACT,iCAAiC,+EAAU;AAC3C;AACA;AACA;AACA,SAAS;AACT,iCAAiC,8CAAM;AACvC,uBAAuB,8CAAM;AAC7B,SAAS;AACT,iCAAiC,8CAAM;AACvC,uBAAuB,8CAAM;AAC7B,SAAS;AACT,iCAAiC,8CAAM;AACvC,uBAAuB,8CAAM;AAC7B,SAAS;AACT;AACA;AACA;AACA;AACA,mCAAmC,iFAAW;AAC9C;AACA;AACA;AACA;AACA;AACA,iCAAiC,4GAAkB;AACnD;AACA,+BAA+B,0HAAuB;AACtD;AACA,kCAAkC,2GAAkB;AACpD;AACA;AACA,mCAAmC,iFAAW;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,sFAAY;AAC5C;AACA;AACA,oCAAoC,kEAAgB;AACpD;AACA;AACA,iCAAiC,6DAAa;AAC9C;AACA;AACA,oCAAoC,mEAAgB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,oDAAK;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,2EAAQ;AACnC;AACA,yBAAyB,yDAAW;AACpC;AACA;AACA;AACA;AACA,4BAA4B,sEAAoB;AAChD;AACA;AACA,4BAA4B,sEAAoB;AAChD;AACA,kBAAkB,+EAAU;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,sDAAO;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,2DAAS,YAAY,2DAAS;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,oBAAoB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,sEAAoB;AAC/D;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,qFAAa;AACA,wEAAS,EAAC;;;;;;;;;;;;;ACvLzB;AAAA;AAAA;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AAC6G;AAC9G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,8FAAoB;AACM;;;;;;;;;;;;;ACzB5B;AAAA;AAAA;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACoG;AACrG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,wFAAiB;AACM;;;;;;;;;;;;;ACjCzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AAC2D;AACJ;AACY;AACd;AACX;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,uEAAU;AACrC,4BAA4B,uEAAU;AACtC;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,uEAAU;AAC9C,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,2CAA2C,+EAAc;AACzD;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,uBAAuB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D,wDAAW;AAC1E;AACA;AACA;AACA;AACA;AACA,+BAA+B,wBAAwB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,mDAAK;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,uBAAuB;AAC9C;AACA;AACA,4BAA4B,wDAAW;AACvC;AACA;AACA,iCAAiC,EAAE;AACnC;AACA;AACA;AACA;AACA,2BAA2B,mDAAK;AAChC,wBAAwB,qDAAO;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,mDAAK;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,+EAAc;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,mEAAQ;AACkB;;;;;;;;;;;;;ACjN5B;AAAA;AAAA;AAAA;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AAC2D;AACJ;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,uEAAU;AACrC,4BAA4B,uEAAU;AACtC;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,mEAAQ;AACc;;;;;;;;;;;;;AClDxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,iBAAiB,SAAI,IAAI,SAAI;AAC7B,2BAA2B,+DAA+D,gBAAgB,EAAE,EAAE;AAC9G;AACA,mCAAmC,MAAM,6BAA6B,EAAE,YAAY,WAAW,EAAE;AACjG,kCAAkC,MAAM,iCAAiC,EAAE,YAAY,WAAW,EAAE;AACpG,+BAA+B,qFAAqF;AACpH;AACA,KAAK;AACL;AACA,mBAAmB,SAAI,IAAI,SAAI;AAC/B,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,gBAAgB,qDAAqD,oEAAoE,aAAa,EAAE;AACxJ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;AAC4D;AACe;AACb;AACvB;AACI;AACS;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,uEAAU;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,iCAAiC,uEAAU;AAC3C;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA,+DAA+D,mFAAM;AACrE,qCAAqC;AACrC;AACA;AACA;AACA;AACA,mEAAmE,mFAAM;AACzE;AACA,qCAAqC;AACrC;AACA,+DAA+D,mFAAM;AACrE,qCAAqC;AACrC;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA,+DAA+D,mFAAM;AACrE,qCAAqC;AACrC;AACA;AACA;AACA;AACA,mEAAmE,mFAAM;AACzE;AACA,qCAAqC;AACrC;AACA,+DAA+D,mFAAM;AACrE,qCAAqC;AACrC;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,+CAA+C,uEAAU;AACzD;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,wDAAU;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,6BAA6B,uDAAQ;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA,CAAC,CAAC,yEAAW;AACsB;;;;;;;;;;;;;ACnPnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AAC2D;AACF;AAChB;AACU;AACd;AACK;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,sDAAU;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,wBAAwB;AAC/C;AACA;AACA;AACA,4BAA4B,wDAAW;AACvC;AACA,+BAA+B,mDAAK;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,iEAAgB;AAClD,qCAAqC,iEAAgB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,uEAAU;AACzC;AACA;AACA;AACA,+BAA+B,uEAAU;AACzC;AACA;AACA;AACA,+BAA+B,uEAAU;AACzC;AACA;AACA;AACA,+BAA+B,uEAAU;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,qEAAS;AACmB;;;;;;;;;;;;;ACtI9B;AAAA;AAAA;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACuE;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,uEAAQ;AACY;;;;;;;;;;;;;ACzBtB;AAAA;AAAA;AACA;AACA;AACA;AACA,CAAC;AACmB;;;;;;;;;;;;;ACLpB;AAAA;AAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,wCAAwC","file":"uv-mediaelement-extension.450a8a8e7388c3e52117.js","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { DownloadDialogue as BaseDownloadDialogue } from \"../../modules/uv-dialogues-module/DownloadDialogue\";\nvar DownloadDialogue = /** @class */ (function (_super) {\n    __extends(DownloadDialogue, _super);\n    function DownloadDialogue($element) {\n        return _super.call(this, $element) || this;\n    }\n    DownloadDialogue.prototype.create = function () {\n        this.setConfig(\"downloadDialogue\");\n        _super.prototype.create.call(this);\n    };\n    DownloadDialogue.prototype.open = function (triggerButton) {\n        _super.prototype.open.call(this, triggerButton);\n        this.addEntireFileDownloadOptions();\n        this.updateNoneAvailable();\n        this.resize();\n    };\n    DownloadDialogue.prototype.isDownloadOptionAvailable = function (option) {\n        return _super.prototype.isDownloadOptionAvailable.call(this, option);\n    };\n    return DownloadDialogue;\n}(BaseDownloadDialogue));\nexport { DownloadDialogue };\n","var Events = /** @class */ (function () {\n    function Events() {\n    }\n    Events.namespace = \"mediaelementExtension.\";\n    Events.MEDIA_ENDED = Events.namespace + \"mediaEnded\";\n    Events.MEDIA_PAUSED = Events.namespace + \"mediaPaused\";\n    Events.MEDIA_PLAYED = Events.namespace + \"mediaPlayed\";\n    return Events;\n}());\nexport { Events };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { BaseEvents } from \"../../modules/uv-shared-module/BaseEvents\";\nimport { BaseExtension } from \"../../modules/uv-shared-module/BaseExtension\";\nimport { Bookmark } from \"../../modules/uv-shared-module/Bookmark\";\nimport { DownloadDialogue } from \"./DownloadDialogue\";\nimport { Events } from \"./Events\";\nimport { FooterPanel } from \"../../modules/uv-shared-module/FooterPanel\";\nimport { HeaderPanel } from \"../../modules/uv-shared-module/HeaderPanel\";\nimport { HelpDialogue } from \"../../modules/uv-dialogues-module/HelpDialogue\";\nimport { MediaElementCenterPanel } from \"../../modules/uv-mediaelementcenterpanel-module/MediaElementCenterPanel\";\nimport { MoreInfoRightPanel } from \"../../modules/uv-moreinforightpanel-module/MoreInfoRightPanel\";\nimport { ResourcesLeftPanel } from \"../../modules/uv-resourcesleftpanel-module/ResourcesLeftPanel\";\nimport { SettingsDialogue } from \"./SettingsDialogue\";\nimport { ShareDialogue } from \"./ShareDialogue\";\nimport { Bools, Strings } from \"@edsilv/utils\";\nimport { ExternalResourceType, MediaType } from \"@iiif/vocabulary\";\nimport { LanguageMap } from \"manifesto.js\";\nvar Extension = /** @class */ (function (_super) {\n    __extends(Extension, _super);\n    function Extension() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Extension.prototype.create = function () {\n        var _this = this;\n        _super.prototype.create.call(this);\n        // listen for mediaelement enter/exit fullscreen events.\n        $(window).bind(\"enterfullscreen\", function () {\n            _this.component.publish(BaseEvents.TOGGLE_FULLSCREEN);\n        });\n        $(window).bind(\"exitfullscreen\", function () {\n            _this.component.publish(BaseEvents.TOGGLE_FULLSCREEN);\n        });\n        this.component.subscribe(BaseEvents.CANVAS_INDEX_CHANGED, function (canvasIndex) {\n            _this.viewCanvas(canvasIndex);\n        });\n        this.component.subscribe(BaseEvents.THUMB_SELECTED, function (thumb) {\n            _this.component.publish(BaseEvents.CANVAS_INDEX_CHANGED, thumb.index);\n        });\n        this.component.subscribe(BaseEvents.LEFTPANEL_EXPAND_FULL_START, function () {\n            _this.shell.$centerPanel.hide();\n            _this.shell.$rightPanel.hide();\n        });\n        this.component.subscribe(BaseEvents.LEFTPANEL_COLLAPSE_FULL_FINISH, function () {\n            _this.shell.$centerPanel.show();\n            _this.shell.$rightPanel.show();\n            _this.resize();\n        });\n        this.component.subscribe(Events.MEDIA_ENDED, function () {\n            _this.fire(Events.MEDIA_ENDED);\n        });\n        this.component.subscribe(Events.MEDIA_PAUSED, function () {\n            _this.fire(Events.MEDIA_PAUSED);\n        });\n        this.component.subscribe(Events.MEDIA_PLAYED, function () {\n            _this.fire(Events.MEDIA_PLAYED);\n        });\n    };\n    Extension.prototype.createModules = function () {\n        _super.prototype.createModules.call(this);\n        if (this.isHeaderPanelEnabled()) {\n            this.headerPanel = new HeaderPanel(this.shell.$headerPanel);\n        }\n        else {\n            this.shell.$headerPanel.hide();\n        }\n        if (this.isLeftPanelEnabled()) {\n            this.leftPanel = new ResourcesLeftPanel(this.shell.$leftPanel);\n        }\n        this.centerPanel = new MediaElementCenterPanel(this.shell.$centerPanel);\n        if (this.isRightPanelEnabled()) {\n            this.rightPanel = new MoreInfoRightPanel(this.shell.$rightPanel);\n        }\n        if (this.isFooterPanelEnabled()) {\n            this.footerPanel = new FooterPanel(this.shell.$footerPanel);\n        }\n        else {\n            this.shell.$footerPanel.hide();\n        }\n        this.$helpDialogue = $('<div class=\"overlay help\" aria-hidden=\"true\"></div>');\n        this.shell.$overlays.append(this.$helpDialogue);\n        this.helpDialogue = new HelpDialogue(this.$helpDialogue);\n        this.$downloadDialogue = $('<div class=\"overlay download\" aria-hidden=\"true\"></div>');\n        this.shell.$overlays.append(this.$downloadDialogue);\n        this.downloadDialogue = new DownloadDialogue(this.$downloadDialogue);\n        this.$shareDialogue = $('<div class=\"overlay share\" aria-hidden=\"true\"></div>');\n        this.shell.$overlays.append(this.$shareDialogue);\n        this.shareDialogue = new ShareDialogue(this.$shareDialogue);\n        this.$settingsDialogue = $('<div class=\"overlay settings\" aria-hidden=\"true\"></div>');\n        this.shell.$overlays.append(this.$settingsDialogue);\n        this.settingsDialogue = new SettingsDialogue(this.$settingsDialogue);\n        if (this.isLeftPanelEnabled()) {\n            this.leftPanel.init();\n        }\n        if (this.isRightPanelEnabled()) {\n            this.rightPanel.init();\n        }\n    };\n    Extension.prototype.render = function () {\n        _super.prototype.render.call(this);\n    };\n    Extension.prototype.isLeftPanelEnabled = function () {\n        return (Bools.getBool(this.data.config.options.leftPanelEnabled, true) &&\n            (this.helper.isMultiCanvas() ||\n                this.helper.isMultiSequence() ||\n                this.helper.hasResources()));\n    };\n    Extension.prototype.bookmark = function () {\n        _super.prototype.bookmark.call(this);\n        var canvas = this.extensions.helper.getCurrentCanvas();\n        var bookmark = new Bookmark();\n        bookmark.index = this.helper.canvasIndex;\n        bookmark.label = LanguageMap.getValue(canvas.getLabel());\n        bookmark.thumb = canvas.getProperty(\"thumbnail\");\n        bookmark.title = this.helper.getLabel();\n        bookmark.trackingLabel = window.trackingLabel;\n        if (this.isVideo()) {\n            bookmark.type = ExternalResourceType.MOVING_IMAGE;\n        }\n        else {\n            bookmark.type = ExternalResourceType.SOUND;\n        }\n        this.fire(BaseEvents.BOOKMARK, bookmark);\n    };\n    Extension.prototype.getEmbedScript = function (template, width, height) {\n        //const configUri: string = this.data.config.uri || '';\n        //const script: string = String.format(template, this.getSerializedLocales(), configUri, this.helper.manifestUri, this.helper.collectionIndex, this.helper.manifestIndex, this.helper.sequenceIndex, this.helper.canvasIndex, width, height, this.data.embedScriptUri);\n        var appUri = this.getAppUri();\n        var iframeSrc = appUri + \"#?manifest=\" + this.helper.manifestUri + \"&c=\" + this.helper.collectionIndex + \"&m=\" + this.helper.manifestIndex + \"&s=\" + this.helper.sequenceIndex + \"&cv=\" + this.helper.canvasIndex;\n        var script = Strings.format(template, iframeSrc, width.toString(), height.toString());\n        return script;\n    };\n    // todo: use canvas.getThumbnail()\n    Extension.prototype.getPosterImageUri = function () {\n        var canvas = this.helper.getCurrentCanvas();\n        var annotations = canvas.getContent();\n        if (annotations && annotations.length) {\n            return annotations[0].getProperty(\"thumbnail\");\n        }\n        else {\n            return canvas.getProperty(\"thumbnail\");\n        }\n    };\n    Extension.prototype.isVideoFormat = function (type) {\n        var videoFormats = [MediaType.VIDEO_MP4, MediaType.WEBM];\n        return videoFormats.indexOf(type) != -1;\n    };\n    Extension.prototype.isVideo = function () {\n        var canvas = this.helper.getCurrentCanvas();\n        var annotations = canvas.getContent();\n        if (annotations && annotations.length) {\n            var formats = this.getMediaFormats(canvas);\n            for (var i = 0; i < formats.length; i++) {\n                var format = formats[i];\n                var type = format.getFormat();\n                if (type) {\n                    if (this.isVideoFormat(type.toString())) {\n                        return true;\n                    }\n                }\n            }\n        }\n        else {\n            var type = canvas.getType();\n            if (type) {\n                return type.toString() === ExternalResourceType.MOVING_IMAGE;\n            }\n        }\n        throw new Error(\"Unable to determine media type\");\n    };\n    return Extension;\n}(BaseExtension));\nexport default Extension;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { SettingsDialogue as BaseSettingsDialogue } from \"../../modules/uv-dialogues-module/SettingsDialogue\";\nvar SettingsDialogue = /** @class */ (function (_super) {\n    __extends(SettingsDialogue, _super);\n    function SettingsDialogue($element) {\n        return _super.call(this, $element) || this;\n    }\n    SettingsDialogue.prototype.create = function () {\n        this.setConfig(\"settingsDialogue\");\n        _super.prototype.create.call(this);\n    };\n    return SettingsDialogue;\n}(BaseSettingsDialogue));\nexport { SettingsDialogue };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { ShareDialogue as BaseShareDialogue } from \"../../modules/uv-dialogues-module/ShareDialogue\";\nvar ShareDialogue = /** @class */ (function (_super) {\n    __extends(ShareDialogue, _super);\n    function ShareDialogue($element) {\n        return _super.call(this, $element) || this;\n    }\n    ShareDialogue.prototype.create = function () {\n        this.setConfig(\"shareDialogue\");\n        _super.prototype.create.call(this);\n    };\n    ShareDialogue.prototype.update = function () {\n        _super.prototype.update.call(this);\n        this.code = this.extension.getEmbedScript(this.options.embedTemplate, this.currentWidth, this.currentHeight);\n        this.$code.val(this.code);\n    };\n    ShareDialogue.prototype.resize = function () {\n        _super.prototype.resize.call(this);\n    };\n    return ShareDialogue;\n}(BaseShareDialogue));\nexport { ShareDialogue };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { BaseEvents } from \"../uv-shared-module/BaseEvents\";\nimport { Dialogue } from \"../uv-shared-module/Dialogue\";\nimport { DownloadOption } from \"../uv-shared-module/DownloadOption\";\nimport { Bools, Files, Strings } from \"@edsilv/utils\";\nimport { LanguageMap } from \"manifesto.js\";\nvar DownloadDialogue = /** @class */ (function (_super) {\n    __extends(DownloadDialogue, _super);\n    function DownloadDialogue($element) {\n        return _super.call(this, $element) || this;\n    }\n    DownloadDialogue.prototype.create = function () {\n        var _this = this;\n        this.setConfig(\"downloadDialogue\");\n        _super.prototype.create.call(this);\n        this.openCommand = BaseEvents.SHOW_DOWNLOAD_DIALOGUE;\n        this.closeCommand = BaseEvents.HIDE_DOWNLOAD_DIALOGUE;\n        this.component.subscribe(this.openCommand, function (triggerButton) {\n            _this.open(triggerButton);\n        });\n        this.component.subscribe(this.closeCommand, function () {\n            _this.close();\n        });\n        // create ui.\n        this.$title = $(\"<h1>\" + this.content.title + \"</h1>\");\n        this.$content.append(this.$title);\n        this.$noneAvailable = $('<div class=\"noneAvailable\">' + this.content.noneAvailable + \"</div>\");\n        this.$content.append(this.$noneAvailable);\n        this.$downloadOptions = $('<ol class=\"options\"></ol>');\n        this.$content.append(this.$downloadOptions);\n        this.$footer = $('<div class=\"footer\"></div>');\n        this.$content.append(this.$footer);\n        this.$termsOfUseButton = $('<a href=\"#\">' + this.extension.data.config.content.termsOfUse + \"</a>\");\n        this.$footer.append(this.$termsOfUseButton);\n        this.$termsOfUseButton.onPressed(function () {\n            _this.component.publish(BaseEvents.SHOW_TERMS_OF_USE);\n        });\n        // hide\n        this.$element.hide();\n        this.updateTermsOfUseButton();\n    };\n    DownloadDialogue.prototype.addEntireFileDownloadOptions = function () {\n        if (this.isDownloadOptionAvailable(DownloadOption.ENTIRE_FILE_AS_ORIGINAL)) {\n            this.$downloadOptions.empty();\n            //\n            // add each file src\n            var canvas = this.extension.helper.getCurrentCanvas();\n            var renderingFound = false;\n            var renderings = canvas.getRenderings();\n            for (var i = 0; i < renderings.length; i++) {\n                var rendering = renderings[i];\n                var renderingFormat = rendering.getFormat();\n                var format = \"\";\n                if (renderingFormat) {\n                    format = renderingFormat.toString();\n                }\n                this.addEntireFileDownloadOption(rendering.id, LanguageMap.getValue(rendering.getLabel()), format);\n                renderingFound = true;\n            }\n            if (!renderingFound) {\n                var annotationFound = false;\n                var annotations = canvas.getContent();\n                for (var i = 0; i < annotations.length; i++) {\n                    var annotation = annotations[i];\n                    var body = annotation.getBody();\n                    if (body.length) {\n                        var format = body[0].getFormat();\n                        if (format) {\n                            this.addEntireFileDownloadOption(body[0].id, \"\", format.toString());\n                            annotationFound = true;\n                        }\n                    }\n                }\n                if (!annotationFound) {\n                    this.addEntireFileDownloadOption(canvas.id, \"\", \"\");\n                }\n            }\n        }\n    };\n    DownloadDialogue.prototype.addEntireFileDownloadOption = function (uri, label, format) {\n        var fileType;\n        if (format) {\n            fileType = Files.simplifyMimeType(format);\n        }\n        else {\n            fileType = this.getFileExtension(uri);\n        }\n        if (!label) {\n            label = this.content.entireFileAsOriginal;\n        }\n        if (fileType) {\n            label += \" (\" + fileType + \")\";\n        }\n        this.$downloadOptions.append('<li><a href=\"' +\n            uri +\n            '\" target=\"_blank\" download tabindex=\"0\">' +\n            label +\n            \"</li>\");\n    };\n    DownloadDialogue.prototype.resetDynamicDownloadOptions = function () {\n        this.renderingUrls = [];\n        this.renderingUrlsCount = 0;\n        this.$downloadOptions.find(\"li.dynamic\").remove();\n    };\n    DownloadDialogue.prototype.getDownloadOptionsForRenderings = function (resource, defaultLabel, type) {\n        var renderings = resource.getRenderings();\n        var downloadOptions = [];\n        for (var i = 0; i < renderings.length; i++) {\n            var rendering = renderings[i];\n            if (rendering) {\n                var label = LanguageMap.getValue(rendering.getLabel(), this.extension.getLocale());\n                var currentId = \"downloadOption\" + ++this.renderingUrlsCount;\n                if (label) {\n                    label += \" ({0})\";\n                }\n                else {\n                    label = defaultLabel;\n                }\n                var mime = Files.simplifyMimeType(rendering.getFormat().toString());\n                label = Strings.format(label, mime);\n                this.renderingUrls[currentId] = rendering.id;\n                var $button = $('<li class=\"option dynamic\"><input id=\"' +\n                    currentId +\n                    '\" data-mime=\"' +\n                    mime +\n                    '\" title=\"' +\n                    label +\n                    '\" type=\"radio\" name=\"downloadOptions\" tabindex=\"0\" /><label for=\"' +\n                    currentId +\n                    '\">' +\n                    label +\n                    \"</label></li>\");\n                downloadOptions.push({\n                    type: type,\n                    button: $button\n                });\n            }\n        }\n        return downloadOptions;\n    };\n    DownloadDialogue.prototype.getSelectedOption = function () {\n        return this.$downloadOptions.find(\"li.option input:checked\");\n    };\n    DownloadDialogue.prototype.getCurrentResourceId = function () {\n        var canvas = this.extension.helper.getCurrentCanvas();\n        return canvas.externalResource.data.id;\n    };\n    DownloadDialogue.prototype.getCurrentResourceFormat = function () {\n        var id = this.getCurrentResourceId();\n        return id.substr(id.lastIndexOf(\".\") + 1).toLowerCase();\n    };\n    DownloadDialogue.prototype.updateNoneAvailable = function () {\n        if (!this.$downloadOptions.find(\"li:visible\").length) {\n            this.$noneAvailable.show();\n        }\n        else {\n            // select first option.\n            this.$noneAvailable.hide();\n        }\n    };\n    DownloadDialogue.prototype.updateTermsOfUseButton = function () {\n        var requiredStatement = this.extension.helper.getRequiredStatement();\n        if (Bools.getBool(this.extension.data.config.options.termsOfUseEnabled, false) &&\n            requiredStatement &&\n            requiredStatement.value) {\n            this.$termsOfUseButton.show();\n        }\n        else {\n            this.$termsOfUseButton.hide();\n        }\n    };\n    DownloadDialogue.prototype.getFileExtension = function (fileUri) {\n        var extension = fileUri.split(\".\").pop();\n        // if it's not a valid file extension\n        if (extension.length > 5 || extension.indexOf(\"/\") !== -1) {\n            return null;\n        }\n        return extension;\n    };\n    DownloadDialogue.prototype.isMediaDownloadEnabled = function () {\n        return this.extension.helper.isUIEnabled(\"mediaDownload\");\n    };\n    DownloadDialogue.prototype.isDownloadOptionAvailable = function (option) {\n        switch (option) {\n            case DownloadOption.ENTIRE_FILE_AS_ORIGINAL:\n                return this.isMediaDownloadEnabled();\n        }\n        return true;\n    };\n    DownloadDialogue.prototype.close = function () {\n        _super.prototype.close.call(this);\n    };\n    DownloadDialogue.prototype.resize = function () {\n        this.setDockedPosition();\n    };\n    return DownloadDialogue;\n}(Dialogue));\nexport { DownloadDialogue };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { BaseEvents } from \"../uv-shared-module/BaseEvents\";\nimport { Dialogue } from \"../uv-shared-module/Dialogue\";\nvar HelpDialogue = /** @class */ (function (_super) {\n    __extends(HelpDialogue, _super);\n    function HelpDialogue($element) {\n        return _super.call(this, $element) || this;\n    }\n    HelpDialogue.prototype.create = function () {\n        var _this = this;\n        this.setConfig(\"helpDialogue\");\n        _super.prototype.create.call(this);\n        this.openCommand = BaseEvents.SHOW_HELP_DIALOGUE;\n        this.closeCommand = BaseEvents.HIDE_HELP_DIALOGUE;\n        this.component.subscribe(this.openCommand, function () {\n            _this.open();\n        });\n        this.component.subscribe(this.closeCommand, function () {\n            _this.close();\n        });\n        this.$title = $(\"<h1></h1>\");\n        this.$content.append(this.$title);\n        this.$scroll = $('<div class=\"scroll\"></div>');\n        this.$content.append(this.$scroll);\n        this.$message = $(\"<p></p>\");\n        this.$scroll.append(this.$message);\n        // initialise ui.\n        this.$title.text(this.content.title);\n        this.$message.html(this.content.text);\n        // ensure anchor tags link to _blank.\n        this.$message.targetBlank();\n        this.$element.hide();\n    };\n    HelpDialogue.prototype.resize = function () {\n        _super.prototype.resize.call(this);\n    };\n    return HelpDialogue;\n}(Dialogue));\nexport { HelpDialogue };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { BaseEvents } from \"../uv-shared-module/BaseEvents\";\nimport { Events } from \"../../extensions/uv-mediaelement-extension/Events\";\nimport { CenterPanel } from \"../uv-shared-module/CenterPanel\";\nimport { sanitize } from \"../../Utils\";\nimport { Dimensions } from \"@edsilv/utils\";\nimport \"mediaelement/build/mediaelement-and-player\";\nvar MediaElementCenterPanel = /** @class */ (function (_super) {\n    __extends(MediaElementCenterPanel, _super);\n    function MediaElementCenterPanel($element) {\n        return _super.call(this, $element) || this;\n    }\n    MediaElementCenterPanel.prototype.create = function () {\n        this.setConfig(\"mediaelementCenterPanel\");\n        _super.prototype.create.call(this);\n        var that = this;\n        // events.\n        // only full screen video\n        if (this.isVideo()) {\n            this.component.subscribe(BaseEvents.TOGGLE_FULLSCREEN, function () {\n                if (that.component.isFullScreen) {\n                    that.player.enterFullScreen(false);\n                }\n                else {\n                    that.player.exitFullScreen(false);\n                }\n            });\n        }\n        this.component.subscribe(BaseEvents.OPEN_EXTERNAL_RESOURCE, function (resources) {\n            that.openMedia(resources);\n        });\n        this.$container = $('<div class=\"container\"></div>');\n        this.$content.append(this.$container);\n        this.title = this.extension.helper.getLabel();\n    };\n    MediaElementCenterPanel.prototype.openMedia = function (resources) {\n        return __awaiter(this, void 0, void 0, function () {\n            var that, canvas, poster, sources, renderings, formats;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        that = this;\n                        return [4 /*yield*/, this.extension.getExternalResources(resources)];\n                    case 1:\n                        _a.sent();\n                        // await import(\n                        //   /* webpackChunkName: \"mediaelement\" */ /* webpackMode: \"lazy\" */ \"mediaelement/build/mediaelement-and-player\"\n                        // );\n                        this.$container.empty();\n                        canvas = this.extension.helper.getCurrentCanvas();\n                        this.mediaHeight = this.config.defaultHeight;\n                        this.mediaWidth = this.config.defaultWidth;\n                        this.$container.height(this.mediaHeight);\n                        this.$container.width(this.mediaWidth);\n                        poster = (this.extension).getPosterImageUri();\n                        sources = [];\n                        renderings = canvas.getRenderings();\n                        if (renderings && renderings.length) {\n                            canvas.getRenderings().forEach(function (rendering) {\n                                sources.push({\n                                    type: rendering.getFormat().toString(),\n                                    src: rendering.id\n                                });\n                            });\n                        }\n                        else {\n                            formats = this.extension.getMediaFormats(this.extension.helper.getCurrentCanvas());\n                            if (formats && formats.length) {\n                                formats.forEach(function (format) {\n                                    var type = format.getFormat();\n                                    if (type) {\n                                        sources.push({\n                                            type: type.toString(),\n                                            src: format.id\n                                        });\n                                    }\n                                });\n                            }\n                        }\n                        if (this.isVideo()) {\n                            this.$media = $('<video controls=\"controls\" preload=\"none\"></video>');\n                            this.$container.append(this.$media);\n                            this.player = new MediaElementPlayer($(\"video\")[0], {\n                                poster: poster,\n                                features: [\"playpause\", \"current\", \"progress\", \"volume\"],\n                                success: function (mediaElement, originalNode) {\n                                    mediaElement.addEventListener(\"canplay\", function () {\n                                        that.resize();\n                                    });\n                                    mediaElement.addEventListener(\"play\", function () {\n                                        that.component.publish(Events.MEDIA_PLAYED, Math.floor(mediaElement.currentTime));\n                                    });\n                                    mediaElement.addEventListener(\"pause\", function () {\n                                        // mediaelement creates a pause event before the ended event. ignore this.\n                                        if (Math.floor(mediaElement.currentTime) !=\n                                            Math.floor(mediaElement.duration)) {\n                                            that.component.publish(Events.MEDIA_PAUSED, Math.floor(mediaElement.currentTime));\n                                        }\n                                    });\n                                    mediaElement.addEventListener(\"ended\", function () {\n                                        that.component.publish(Events.MEDIA_ENDED, Math.floor(mediaElement.duration));\n                                    });\n                                    mediaElement.setSrc(sources);\n                                }\n                            });\n                        }\n                        else {\n                            // audio\n                            this.$media = $('<audio controls=\"controls\" preload=\"none\"></audio>');\n                            this.$container.append(this.$media);\n                            this.player = new MediaElementPlayer($(\"audio\")[0], {\n                                poster: poster,\n                                defaultAudioWidth: \"auto\",\n                                defaultAudioHeight: \"auto\",\n                                showPosterWhenPaused: true,\n                                showPosterWhenEnded: true,\n                                success: function (mediaElement, originalNode) {\n                                    mediaElement.addEventListener(\"canplay\", function () {\n                                        that.resize();\n                                    });\n                                    mediaElement.addEventListener(\"play\", function () {\n                                        that.component.publish(Events.MEDIA_PLAYED, Math.floor(mediaElement.currentTime));\n                                    });\n                                    mediaElement.addEventListener(\"pause\", function () {\n                                        // mediaelement creates a pause event before the ended event. ignore this.\n                                        if (Math.floor(mediaElement.currentTime) !=\n                                            Math.floor(mediaElement.duration)) {\n                                            that.component.publish(Events.MEDIA_PAUSED, Math.floor(mediaElement.currentTime));\n                                        }\n                                    });\n                                    mediaElement.addEventListener(\"ended\", function () {\n                                        that.component.publish(Events.MEDIA_ENDED, Math.floor(mediaElement.duration));\n                                    });\n                                    mediaElement.setSrc(sources);\n                                }\n                            });\n                        }\n                        this._$mejsContainer = this.$container.find(\".mejs__container\");\n                        this._$mejsLayers = this.$container.find(\".mejs__layer\");\n                        this.component.publish(BaseEvents.OPENED_MEDIA);\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    MediaElementCenterPanel.prototype.isVideo = function () {\n        return this.extension.isVideo();\n    };\n    MediaElementCenterPanel.prototype.resize = function () {\n        _super.prototype.resize.call(this);\n        var that = this;\n        // if in Firefox < v13 don't resize the media container.\n        if (window.browserDetect.browser === \"Firefox\" &&\n            window.browserDetect.version < 13) {\n            this.$container.width(this.mediaWidth);\n            this.$container.height(this.mediaHeight);\n        }\n        else {\n            // fit media to available space.\n            var size = Dimensions.fitRect(this.mediaWidth, this.mediaHeight, this.$content.width(), this.$content.height());\n            this.$container.height(size.height);\n            this.$container.width(size.width);\n            if (this.player && !this.extension.isFullScreen()) {\n                this.$media.width(size.width);\n                this.$media.height(size.height);\n            }\n        }\n        var left = Math.floor((this.$content.width() - this.$container.width()) / 2);\n        var top = Math.floor((this.$content.height() - this.$container.height()) / 2);\n        this.$container.css({\n            left: left,\n            top: top\n        });\n        if (this.title) {\n            this.$title.text(sanitize(this.title));\n        }\n        if (this.player) {\n            if (!this.isVideo() || (this.isVideo() && !this.component.isFullScreen)) {\n                this.player.setPlayerSize();\n                this.player.setControlsSize();\n                this._$mejsContainer.height(this.$container.height());\n                this._$mejsContainer.width(this.$container.width());\n                this._$mejsLayers.each(function () {\n                    $(this).height(that.$container.height());\n                    $(this).width(that.$container.width());\n                });\n                // const $mejs: JQuery = $(\".mejs__container\");\n                // $mejs.css({\n                //   \"margin-top\": (this.$container.height() - $mejs.height()) / 2\n                // });\n            }\n        }\n    };\n    return MediaElementCenterPanel;\n}(CenterPanel));\nexport { MediaElementCenterPanel };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { BaseEvents } from \"../uv-shared-module/BaseEvents\";\nimport { LeftPanel } from \"../uv-shared-module/LeftPanel\";\nimport { ThumbsView } from \"./ThumbsView\";\nimport { ViewingDirection } from \"@iiif/vocabulary\";\nimport { Files } from \"@edsilv/utils\";\nimport { LanguageMap } from \"manifesto.js\";\nvar ResourcesLeftPanel = /** @class */ (function (_super) {\n    __extends(ResourcesLeftPanel, _super);\n    function ResourcesLeftPanel($element) {\n        return _super.call(this, $element) || this;\n    }\n    ResourcesLeftPanel.prototype.create = function () {\n        this.setConfig(\"resourcesLeftPanel\");\n        _super.prototype.create.call(this);\n        this.setTitle(this.content.title);\n        /*\n             TODO: make tabs work\n            this.$tabs = $('<div class=\"tabs\"></div>');\n            this.$main.append(this.$tabs);\n    \n            this.$thumbsButton = $('<a class=\"thumbs tab\">' + this.content.thumbnails + '</a>');\n            this.$thumbsButton.prop('title', this.content.thumbnails);\n            this.$tabs.append(this.$thumbsButton);\n    \n            this.$resourcesButton = $('<a class=\"resources tab\">' + this.content.resources+ '</a>');\n            this.$resourcesButton.prop('title', this.content.resources);\n            this.$tabs.append(this.$resourcesButton);\n             */\n        this.$tabsContent = $('<div class=\"tabsContent\"></div>');\n        this.$main.append(this.$tabsContent);\n        this.$views = $('<div class=\"views\"></div>');\n        this.$tabsContent.append(this.$views);\n        this.$thumbsView = $('<div class=\"thumbsView\"></div>');\n        this.$views.append(this.$thumbsView);\n        this.$resourcesView = $('<div class=\"resourcesView\"></div>');\n        this.$resources = $(\"<ul></ul>\");\n        this.$resourcesView.append(this.$resources);\n        this.$views.append(this.$resourcesView);\n        this.thumbsView = new ThumbsView(this.$thumbsView);\n        this.dataBind();\n    };\n    ResourcesLeftPanel.prototype.dataBind = function () {\n        this.dataBindThumbsView();\n        var annotations = this.extension.helper\n            .getCurrentCanvas()\n            .getResources();\n        if (annotations.length === 0) {\n            this.$resourcesView.hide();\n        }\n        for (var i = 0; i < annotations.length; i++) {\n            var annotation = annotations[i];\n            var resource = annotation.getResource();\n            if (resource) {\n                var label = LanguageMap.getValue(resource.getLabel());\n                if (label) {\n                    var mime = Files.simplifyMimeType(resource.getFormat().toString());\n                    var $listItem = $('<li><a href=\"' +\n                        resource.id +\n                        '\" target=\"_blank\">' +\n                        label +\n                        \" (\" +\n                        mime +\n                        \")\" +\n                        \"</li>\");\n                    this.$resources.append($listItem);\n                }\n            }\n        }\n    };\n    ResourcesLeftPanel.prototype.dataBindThumbsView = function () {\n        if (!this.thumbsView)\n            return;\n        var width;\n        var height;\n        var viewingDirection = this.extension.helper.getViewingDirection();\n        if (viewingDirection &&\n            (viewingDirection === ViewingDirection.LEFT_TO_RIGHT ||\n                viewingDirection === ViewingDirection.RIGHT_TO_LEFT)) {\n            width = this.config.options.twoColThumbWidth;\n            height = this.config.options.twoColThumbHeight;\n        }\n        else {\n            width = this.config.options.oneColThumbWidth;\n            height = this.config.options.oneColThumbHeight;\n        }\n        if (typeof width === \"undefined\") {\n            width = 100;\n        }\n        if (typeof height === \"undefined\") {\n            height = 100;\n        }\n        this.thumbsView.thumbs = this.extension.helper.getThumbs(width, height);\n        // hide thumb selector for single-part manifests\n        if (this.thumbsView.thumbs.length < 2) {\n            this.$thumbsView.hide();\n        }\n        this.thumbsView.databind();\n    };\n    ResourcesLeftPanel.prototype.expandFullStart = function () {\n        _super.prototype.expandFullStart.call(this);\n        this.component.publish(BaseEvents.LEFTPANEL_EXPAND_FULL_START);\n    };\n    ResourcesLeftPanel.prototype.expandFullFinish = function () {\n        _super.prototype.expandFullFinish.call(this);\n        this.component.publish(BaseEvents.LEFTPANEL_EXPAND_FULL_FINISH);\n    };\n    ResourcesLeftPanel.prototype.collapseFullStart = function () {\n        _super.prototype.collapseFullStart.call(this);\n        this.component.publish(BaseEvents.LEFTPANEL_COLLAPSE_FULL_START);\n    };\n    ResourcesLeftPanel.prototype.collapseFullFinish = function () {\n        _super.prototype.collapseFullFinish.call(this);\n        this.component.publish(BaseEvents.LEFTPANEL_COLLAPSE_FULL_FINISH);\n    };\n    ResourcesLeftPanel.prototype.resize = function () {\n        _super.prototype.resize.call(this);\n        this.$views.height(this.$main.height());\n        this.$resources.height(this.$main.height());\n    };\n    return ResourcesLeftPanel;\n}(LeftPanel));\nexport { ResourcesLeftPanel };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { ThumbsView as BaseView } from \"../uv-shared-module/ThumbsView\";\nvar ThumbsView = /** @class */ (function (_super) {\n    __extends(ThumbsView, _super);\n    function ThumbsView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ThumbsView.prototype.create = function () {\n        this.setConfig(\"resourcesLeftPanel\");\n        _super.prototype.create.call(this);\n    };\n    return ThumbsView;\n}(BaseView));\nexport { ThumbsView };\n","var Bookmark = /** @class */ (function () {\n    function Bookmark() {\n    }\n    return Bookmark;\n}());\nexport { Bookmark };\n","export var DownloadOption;\n(function (DownloadOption) {\n    DownloadOption[\"CANVAS_RENDERINGS\"] = \"canvasRenderings\";\n    DownloadOption[\"CURRENT_VIEW\"] = \"currentView\";\n    DownloadOption[\"ENTIRE_DOCUMENT_AS_PDF\"] = \"entireDocumentAsPdf\";\n    DownloadOption[\"ENTIRE_DOCUMENT_AS_TEXT\"] = \"entireDocumentAsText\";\n    DownloadOption[\"ENTIRE_FILE_AS_ORIGINAL\"] = \"entireFileAsOriginal\";\n    DownloadOption[\"IMAGE_RENDERINGS\"] = \"imageRenderings\";\n    DownloadOption[\"MANIFEST_RENDERINGS\"] = \"manifestRenderings\";\n    DownloadOption[\"RANGE_RENDERINGS\"] = \"rangeRenderings\";\n    DownloadOption[\"SELECTION\"] = \"selection\";\n    //SEQUENCE_RENDERINGS = \"sequenceRenderings\",\n    DownloadOption[\"UNKNOWN\"] = \"unknown\";\n    DownloadOption[\"WHOLE_IMAGE_HIGH_RES\"] = \"wholeImageHighRes\";\n    DownloadOption[\"WHOLE_IMAGE_LOW_RES\"] = \"wholeImageLowRes\";\n    DownloadOption[\"WHOLE_IMAGES_HIGH_RES\"] = \"wholeImagesHighRes\";\n})(DownloadOption || (DownloadOption = {}));\n"],"sourceRoot":""}