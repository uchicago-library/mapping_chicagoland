{"version":3,"sources":["webpack://UV/./src/extensions/uv-pdf-extension/DownloadDialogue.ts","webpack://UV/./src/extensions/uv-pdf-extension/Events.ts","webpack://UV/./src/extensions/uv-pdf-extension/Extension.ts","webpack://UV/./src/extensions/uv-pdf-extension/SettingsDialogue.ts","webpack://UV/./src/extensions/uv-pdf-extension/ShareDialogue.ts","webpack://UV/./src/modules/uv-dialogues-module/DownloadDialogue.ts","webpack://UV/./src/modules/uv-pdfcenterpanel-module/PDFCenterPanel.ts","webpack://UV/./src/modules/uv-pdfheaderpanel-module/PDFHeaderPanel.ts","webpack://UV/./src/modules/uv-resourcesleftpanel-module/ResourcesLeftPanel.ts","webpack://UV/./src/modules/uv-resourcesleftpanel-module/ThumbsView.ts","webpack://UV/./src/modules/uv-shared-module/Bookmark.ts","webpack://UV/./src/modules/uv-shared-module/DownloadOption.ts"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AAC6G;AAC9G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,8FAAoB;AACM;;;;;;;;;;;;;ACxC5B;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACiB;;;;;;;;;;;;;ACTlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACsE;AACM;AACV;AACb;AACmB;AAC0B;AACZ;AACA;AACY;AAC7C;AACN;AACQ;AACT;AACJ;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,+EAAU;AAC3C;AACA,SAAS;AACT,iCAAiC,+EAAU;AAC3C,oCAAoC,+EAAU;AAC9C,SAAS;AACT,iCAAiC,+EAAU;AAC3C;AACA;AACA,SAAS;AACT,iCAAiC,+EAAU;AAC3C;AACA;AACA;AACA,SAAS;AACT,iCAAiC,+EAAU;AAC3C;AACA;AACA;AACA,SAAS;AACT,iCAAiC,+EAAU;AAC3C;AACA;AACA;AACA,SAAS;AACT,iCAAiC,+EAAU;AAC3C;AACA;AACA,aAAa,MAAM;AACnB,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,oDAAK;AACjB;AACA;AACA;AACA;AACA,mCAAmC,+FAAc;AACjD;AACA;AACA;AACA;AACA;AACA,iCAAiC,2GAAkB;AACnD;AACA,+BAA+B,+FAAc;AAC7C;AACA,kCAAkC,2GAAkB;AACpD;AACA;AACA,mCAAmC,iFAAW;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,kEAAgB;AACpD;AACA;AACA,iCAAiC,6DAAa;AAC9C;AACA;AACA,oCAAoC,kEAAgB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,2EAAQ;AACnC;AACA,yBAAyB,yDAAW;AACpC;AACA;AACA;AACA,wBAAwB,sEAAoB;AAC5C,kBAAkB,+EAAU;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,sDAAO;AAC5B;AACA;AACA;AACA,CAAC,CAAC,qFAAa;AACA,wEAAS,EAAC;;;;;;;;;;;;;AChJzB;AAAA;AAAA;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AAC6G;AAC9G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,8FAAoB;AACM;;;;;;;;;;;;;ACzB5B;AAAA;AAAA;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACoG;AACrG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,wFAAiB;AACM;;;;;;;;;;;;;ACjCzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AAC2D;AACJ;AACY;AACd;AACX;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,uEAAU;AACrC,4BAA4B,uEAAU;AACtC;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,uEAAU;AAC9C,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,2CAA2C,+EAAc;AACzD;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,uBAAuB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D,wDAAW;AAC1E;AACA;AACA;AACA;AACA;AACA,+BAA+B,wBAAwB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,mDAAK;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,uBAAuB;AAC9C;AACA;AACA,4BAA4B,wDAAW;AACvC;AACA;AACA,iCAAiC,EAAE;AACnC;AACA;AACA;AACA;AACA,2BAA2B,mDAAK;AAChC,wBAAwB,qDAAO;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,mDAAK;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,+EAAc;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,mEAAQ;AACkB;;;;;;;;;;;;;ACjN5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,iBAAiB,SAAI,IAAI,SAAI;AAC7B,2BAA2B,+DAA+D,gBAAgB,EAAE,EAAE;AAC9G;AACA,mCAAmC,MAAM,6BAA6B,EAAE,YAAY,WAAW,EAAE;AACjG,kCAAkC,MAAM,iCAAiC,EAAE,YAAY,WAAW,EAAE;AACpG,+BAA+B,qFAAqF;AACpH;AACA,KAAK;AACL;AACA,mBAAmB,SAAI,IAAI,SAAI;AAC/B,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,gBAAgB,qDAAqD,oEAAoE,aAAa,EAAE;AACxJ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;AAC4D;AACE;AACI;AAC5B;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D;AAC1D;AACA;AACA,YAAY,mDAAK;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,uEAAU;AAC3C;AACA,SAAS;AACT,iCAAiC,uEAAU;AAC3C;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,iCAAiC,uEAAU;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,iCAAiC,uEAAU;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,iCAAiC,uEAAU;AAC3C;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,iCAAiC,uEAAU;AAC3C;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,iCAAiC,0EAAM;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,oCAAoC,uEAAU;AAC9C,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,oCAAoC,uEAAU;AAC9C,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,mDAAK;AACnC;AACA,6CAA6C,0KACyD;AACtG;AACA;AACA,yEAAyE,YAAY;AACrF;AACA,iDAAiD,8SAC8C;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,0EAAM;AACrD;AACA;AACA;AACA,+CAA+C,uEAAU;AACzD;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA,aAAa,mDAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,0EAAM;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,yEAAW;AACa;;;;;;;;;;;;;AC/W1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AAC2D;AACM;AACJ;AACtB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,0EAAM;AACvC;AACA;AACA,SAAS;AACT,iCAAiC,0EAAM;AACvC;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,uEAAU;AAC9C,SAAS;AACT;AACA,oCAAoC,uEAAU;AAC9C,SAAS;AACT;AACA,oCAAoC,uEAAU;AAC9C,SAAS;AACT;AACA,oCAAoC,uEAAU;AAC9C,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,qDAAO;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,0EAAM;AACrC;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,yEAAW;AACa;;;;;;;;;;;;;ACzI1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AAC2D;AACF;AAChB;AACU;AACd;AACK;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,sDAAU;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,wBAAwB;AAC/C;AACA;AACA;AACA,4BAA4B,wDAAW;AACvC;AACA,+BAA+B,mDAAK;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,iEAAgB;AAClD,qCAAqC,iEAAgB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,uEAAU;AACzC;AACA;AACA;AACA,+BAA+B,uEAAU;AACzC;AACA;AACA;AACA,+BAA+B,uEAAU;AACzC;AACA;AACA;AACA,+BAA+B,uEAAU;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,qEAAS;AACmB;;;;;;;;;;;;;ACtI9B;AAAA;AAAA;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACuE;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,uEAAQ;AACY;;;;;;;;;;;;;ACzBtB;AAAA;AAAA;AACA;AACA;AACA;AACA,CAAC;AACmB;;;;;;;;;;;;;ACLpB;AAAA;AAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,wCAAwC","file":"uv-pdf-extension.06cb17936559436b4e88.js","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { DownloadDialogue as BaseDownloadDialogue } from \"../../modules/uv-dialogues-module/DownloadDialogue\";\nvar DownloadDialogue = /** @class */ (function (_super) {\n    __extends(DownloadDialogue, _super);\n    function DownloadDialogue($element) {\n        return _super.call(this, $element) || this;\n    }\n    DownloadDialogue.prototype.create = function () {\n        this.setConfig(\"downloadDialogue\");\n        _super.prototype.create.call(this);\n    };\n    DownloadDialogue.prototype.open = function (triggerButton) {\n        _super.prototype.open.call(this, triggerButton);\n        this.addEntireFileDownloadOptions();\n        if (!this.$downloadOptions.find(\"li:visible\").length) {\n            this.$noneAvailable.show();\n        }\n        else {\n            // select first option.\n            this.$noneAvailable.hide();\n        }\n        this.resize();\n    };\n    DownloadDialogue.prototype.isDownloadOptionAvailable = function (option) {\n        return _super.prototype.isDownloadOptionAvailable.call(this, option);\n    };\n    return DownloadDialogue;\n}(BaseDownloadDialogue));\nexport { DownloadDialogue };\n","var Events = /** @class */ (function () {\n    function Events() {\n    }\n    Events.namespace = \"pdfExtension.\";\n    Events.PDF_LOADED = Events.namespace + \"pdfLoaded\";\n    Events.PAGE_INDEX_CHANGED = Events.namespace + \"pageIndexChanged\";\n    Events.SEARCH = Events.namespace + \"search\";\n    return Events;\n}());\nexport { Events };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { BaseEvents } from \"../../modules/uv-shared-module/BaseEvents\";\nimport { BaseExtension } from \"../../modules/uv-shared-module/BaseExtension\";\nimport { Bookmark } from \"../../modules/uv-shared-module/Bookmark\";\nimport { DownloadDialogue } from \"./DownloadDialogue\";\nimport { FooterPanel } from \"../../modules/uv-shared-module/FooterPanel\";\nimport { MoreInfoRightPanel } from \"../../modules/uv-moreinforightpanel-module/MoreInfoRightPanel\";\nimport { PDFCenterPanel } from \"../../modules/uv-pdfcenterpanel-module/PDFCenterPanel\";\nimport { PDFHeaderPanel } from \"../../modules/uv-pdfheaderpanel-module/PDFHeaderPanel\";\nimport { ResourcesLeftPanel } from \"../../modules/uv-resourcesleftpanel-module/ResourcesLeftPanel\";\nimport { SettingsDialogue } from \"./SettingsDialogue\";\nimport { ShareDialogue } from \"./ShareDialogue\";\nimport { ExternalResourceType } from \"@iiif/vocabulary\";\nimport { Bools, Strings } from \"@edsilv/utils\";\nimport { LanguageMap } from \"manifesto.js\";\nvar Extension = /** @class */ (function (_super) {\n    __extends(Extension, _super);\n    function Extension() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Extension.prototype.create = function () {\n        var _this = this;\n        _super.prototype.create.call(this);\n        this.component.subscribe(BaseEvents.CANVAS_INDEX_CHANGED, function (canvasIndex) {\n            _this.viewCanvas(canvasIndex);\n        });\n        this.component.subscribe(BaseEvents.THUMB_SELECTED, function (thumb) {\n            _this.component.publish(BaseEvents.CANVAS_INDEX_CHANGED, thumb.index);\n        });\n        this.component.subscribe(BaseEvents.LEFTPANEL_EXPAND_FULL_START, function () {\n            _this.shell.$centerPanel.hide();\n            _this.shell.$rightPanel.hide();\n        });\n        this.component.subscribe(BaseEvents.LEFTPANEL_COLLAPSE_FULL_FINISH, function () {\n            _this.shell.$centerPanel.show();\n            _this.shell.$rightPanel.show();\n            _this.resize();\n        });\n        this.component.subscribe(BaseEvents.SHOW_OVERLAY, function () {\n            if (_this.IsOldIE()) {\n                _this.centerPanel.$element.hide();\n            }\n        });\n        this.component.subscribe(BaseEvents.HIDE_OVERLAY, function () {\n            if (_this.IsOldIE()) {\n                _this.centerPanel.$element.show();\n            }\n        });\n        this.component.subscribe(BaseEvents.EXIT_FULLSCREEN, function () {\n            setTimeout(function () {\n                _this.resize();\n            }, 10); // allow time to exit full screen, then resize\n        });\n    };\n    Extension.prototype.render = function () {\n        _super.prototype.render.call(this);\n    };\n    Extension.prototype.IsOldIE = function () {\n        var browser = window.browserDetect.browser;\n        var version = window.browserDetect.version;\n        if (browser === \"Explorer\" && version <= 9)\n            return true;\n        return false;\n    };\n    Extension.prototype.isHeaderPanelEnabled = function () {\n        return (_super.prototype.isHeaderPanelEnabled.call(this) &&\n            Bools.getBool(this.data.config.options.usePdfJs, true));\n    };\n    Extension.prototype.createModules = function () {\n        _super.prototype.createModules.call(this);\n        if (this.isHeaderPanelEnabled()) {\n            this.headerPanel = new PDFHeaderPanel(this.shell.$headerPanel);\n        }\n        else {\n            this.shell.$headerPanel.hide();\n        }\n        if (this.isLeftPanelEnabled()) {\n            this.leftPanel = new ResourcesLeftPanel(this.shell.$leftPanel);\n        }\n        this.centerPanel = new PDFCenterPanel(this.shell.$centerPanel);\n        if (this.isRightPanelEnabled()) {\n            this.rightPanel = new MoreInfoRightPanel(this.shell.$rightPanel);\n        }\n        if (this.isFooterPanelEnabled()) {\n            this.footerPanel = new FooterPanel(this.shell.$footerPanel);\n        }\n        else {\n            this.shell.$footerPanel.hide();\n        }\n        this.$downloadDialogue = $('<div class=\"overlay download\" aria-hidden=\"true\"></div>');\n        this.shell.$overlays.append(this.$downloadDialogue);\n        this.downloadDialogue = new DownloadDialogue(this.$downloadDialogue);\n        this.$shareDialogue = $('<div class=\"overlay share\" aria-hidden=\"true\"></div>');\n        this.shell.$overlays.append(this.$shareDialogue);\n        this.shareDialogue = new ShareDialogue(this.$shareDialogue);\n        this.$settingsDialogue = $('<div class=\"overlay settings\" aria-hidden=\"true\"></div>');\n        this.shell.$overlays.append(this.$settingsDialogue);\n        this.settingsDialogue = new SettingsDialogue(this.$settingsDialogue);\n        if (this.isLeftPanelEnabled()) {\n            this.leftPanel.init();\n        }\n        if (this.isRightPanelEnabled()) {\n            this.rightPanel.init();\n        }\n    };\n    Extension.prototype.bookmark = function () {\n        _super.prototype.bookmark.call(this);\n        var canvas = this.helper.getCurrentCanvas();\n        var bookmark = new Bookmark();\n        bookmark.index = this.helper.canvasIndex;\n        bookmark.label = LanguageMap.getValue(canvas.getLabel());\n        bookmark.thumb = canvas.getProperty(\"thumbnail\");\n        bookmark.title = this.helper.getLabel();\n        bookmark.trackingLabel = window.trackingLabel;\n        bookmark.type = ExternalResourceType.DOCUMENT;\n        this.fire(BaseEvents.BOOKMARK, bookmark);\n    };\n    Extension.prototype.dependencyLoaded = function (index, dep) {\n        if (index === 0) {\n            window.PDFObject = dep;\n        }\n    };\n    Extension.prototype.getEmbedScript = function (template, width, height) {\n        //const configUri = this.data.config.uri || '';\n        //const script = String.format(template, this.getSerializedLocales(), configUri, this.helper.manifestUri, this.helper.collectionIndex, this.helper.manifestIndex, this.helper.sequenceIndex, this.helper.canvasIndex, width, height, this.data.embedScriptUri);\n        var appUri = this.getAppUri();\n        var iframeSrc = appUri + \"#?manifest=\" + this.helper.manifestUri + \"&c=\" + this.helper.collectionIndex + \"&m=\" + this.helper.manifestIndex + \"&s=\" + this.helper.sequenceIndex + \"&cv=\" + this.helper.canvasIndex;\n        var script = Strings.format(template, iframeSrc, width.toString(), height.toString());\n        return script;\n    };\n    return Extension;\n}(BaseExtension));\nexport default Extension;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { SettingsDialogue as BaseSettingsDialogue } from \"../../modules/uv-dialogues-module/SettingsDialogue\";\nvar SettingsDialogue = /** @class */ (function (_super) {\n    __extends(SettingsDialogue, _super);\n    function SettingsDialogue($element) {\n        return _super.call(this, $element) || this;\n    }\n    SettingsDialogue.prototype.create = function () {\n        this.setConfig(\"settingsDialogue\");\n        _super.prototype.create.call(this);\n    };\n    return SettingsDialogue;\n}(BaseSettingsDialogue));\nexport { SettingsDialogue };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { ShareDialogue as BaseShareDialogue } from \"../../modules/uv-dialogues-module/ShareDialogue\";\nvar ShareDialogue = /** @class */ (function (_super) {\n    __extends(ShareDialogue, _super);\n    function ShareDialogue($element) {\n        return _super.call(this, $element) || this;\n    }\n    ShareDialogue.prototype.create = function () {\n        this.setConfig(\"shareDialogue\");\n        _super.prototype.create.call(this);\n    };\n    ShareDialogue.prototype.update = function () {\n        _super.prototype.update.call(this);\n        this.code = this.extension.getEmbedScript(this.options.embedTemplate, this.currentWidth, this.currentHeight);\n        this.$code.val(this.code);\n    };\n    ShareDialogue.prototype.resize = function () {\n        _super.prototype.resize.call(this);\n    };\n    return ShareDialogue;\n}(BaseShareDialogue));\nexport { ShareDialogue };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { BaseEvents } from \"../uv-shared-module/BaseEvents\";\nimport { Dialogue } from \"../uv-shared-module/Dialogue\";\nimport { DownloadOption } from \"../uv-shared-module/DownloadOption\";\nimport { Bools, Files, Strings } from \"@edsilv/utils\";\nimport { LanguageMap } from \"manifesto.js\";\nvar DownloadDialogue = /** @class */ (function (_super) {\n    __extends(DownloadDialogue, _super);\n    function DownloadDialogue($element) {\n        return _super.call(this, $element) || this;\n    }\n    DownloadDialogue.prototype.create = function () {\n        var _this = this;\n        this.setConfig(\"downloadDialogue\");\n        _super.prototype.create.call(this);\n        this.openCommand = BaseEvents.SHOW_DOWNLOAD_DIALOGUE;\n        this.closeCommand = BaseEvents.HIDE_DOWNLOAD_DIALOGUE;\n        this.component.subscribe(this.openCommand, function (triggerButton) {\n            _this.open(triggerButton);\n        });\n        this.component.subscribe(this.closeCommand, function () {\n            _this.close();\n        });\n        // create ui.\n        this.$title = $(\"<h1>\" + this.content.title + \"</h1>\");\n        this.$content.append(this.$title);\n        this.$noneAvailable = $('<div class=\"noneAvailable\">' + this.content.noneAvailable + \"</div>\");\n        this.$content.append(this.$noneAvailable);\n        this.$downloadOptions = $('<ol class=\"options\"></ol>');\n        this.$content.append(this.$downloadOptions);\n        this.$footer = $('<div class=\"footer\"></div>');\n        this.$content.append(this.$footer);\n        this.$termsOfUseButton = $('<a href=\"#\">' + this.extension.data.config.content.termsOfUse + \"</a>\");\n        this.$footer.append(this.$termsOfUseButton);\n        this.$termsOfUseButton.onPressed(function () {\n            _this.component.publish(BaseEvents.SHOW_TERMS_OF_USE);\n        });\n        // hide\n        this.$element.hide();\n        this.updateTermsOfUseButton();\n    };\n    DownloadDialogue.prototype.addEntireFileDownloadOptions = function () {\n        if (this.isDownloadOptionAvailable(DownloadOption.ENTIRE_FILE_AS_ORIGINAL)) {\n            this.$downloadOptions.empty();\n            //\n            // add each file src\n            var canvas = this.extension.helper.getCurrentCanvas();\n            var renderingFound = false;\n            var renderings = canvas.getRenderings();\n            for (var i = 0; i < renderings.length; i++) {\n                var rendering = renderings[i];\n                var renderingFormat = rendering.getFormat();\n                var format = \"\";\n                if (renderingFormat) {\n                    format = renderingFormat.toString();\n                }\n                this.addEntireFileDownloadOption(rendering.id, LanguageMap.getValue(rendering.getLabel()), format);\n                renderingFound = true;\n            }\n            if (!renderingFound) {\n                var annotationFound = false;\n                var annotations = canvas.getContent();\n                for (var i = 0; i < annotations.length; i++) {\n                    var annotation = annotations[i];\n                    var body = annotation.getBody();\n                    if (body.length) {\n                        var format = body[0].getFormat();\n                        if (format) {\n                            this.addEntireFileDownloadOption(body[0].id, \"\", format.toString());\n                            annotationFound = true;\n                        }\n                    }\n                }\n                if (!annotationFound) {\n                    this.addEntireFileDownloadOption(canvas.id, \"\", \"\");\n                }\n            }\n        }\n    };\n    DownloadDialogue.prototype.addEntireFileDownloadOption = function (uri, label, format) {\n        var fileType;\n        if (format) {\n            fileType = Files.simplifyMimeType(format);\n        }\n        else {\n            fileType = this.getFileExtension(uri);\n        }\n        if (!label) {\n            label = this.content.entireFileAsOriginal;\n        }\n        if (fileType) {\n            label += \" (\" + fileType + \")\";\n        }\n        this.$downloadOptions.append('<li><a href=\"' +\n            uri +\n            '\" target=\"_blank\" download tabindex=\"0\">' +\n            label +\n            \"</li>\");\n    };\n    DownloadDialogue.prototype.resetDynamicDownloadOptions = function () {\n        this.renderingUrls = [];\n        this.renderingUrlsCount = 0;\n        this.$downloadOptions.find(\"li.dynamic\").remove();\n    };\n    DownloadDialogue.prototype.getDownloadOptionsForRenderings = function (resource, defaultLabel, type) {\n        var renderings = resource.getRenderings();\n        var downloadOptions = [];\n        for (var i = 0; i < renderings.length; i++) {\n            var rendering = renderings[i];\n            if (rendering) {\n                var label = LanguageMap.getValue(rendering.getLabel(), this.extension.getLocale());\n                var currentId = \"downloadOption\" + ++this.renderingUrlsCount;\n                if (label) {\n                    label += \" ({0})\";\n                }\n                else {\n                    label = defaultLabel;\n                }\n                var mime = Files.simplifyMimeType(rendering.getFormat().toString());\n                label = Strings.format(label, mime);\n                this.renderingUrls[currentId] = rendering.id;\n                var $button = $('<li class=\"option dynamic\"><input id=\"' +\n                    currentId +\n                    '\" data-mime=\"' +\n                    mime +\n                    '\" title=\"' +\n                    label +\n                    '\" type=\"radio\" name=\"downloadOptions\" tabindex=\"0\" /><label for=\"' +\n                    currentId +\n                    '\">' +\n                    label +\n                    \"</label></li>\");\n                downloadOptions.push({\n                    type: type,\n                    button: $button\n                });\n            }\n        }\n        return downloadOptions;\n    };\n    DownloadDialogue.prototype.getSelectedOption = function () {\n        return this.$downloadOptions.find(\"li.option input:checked\");\n    };\n    DownloadDialogue.prototype.getCurrentResourceId = function () {\n        var canvas = this.extension.helper.getCurrentCanvas();\n        return canvas.externalResource.data.id;\n    };\n    DownloadDialogue.prototype.getCurrentResourceFormat = function () {\n        var id = this.getCurrentResourceId();\n        return id.substr(id.lastIndexOf(\".\") + 1).toLowerCase();\n    };\n    DownloadDialogue.prototype.updateNoneAvailable = function () {\n        if (!this.$downloadOptions.find(\"li:visible\").length) {\n            this.$noneAvailable.show();\n        }\n        else {\n            // select first option.\n            this.$noneAvailable.hide();\n        }\n    };\n    DownloadDialogue.prototype.updateTermsOfUseButton = function () {\n        var requiredStatement = this.extension.helper.getRequiredStatement();\n        if (Bools.getBool(this.extension.data.config.options.termsOfUseEnabled, false) &&\n            requiredStatement &&\n            requiredStatement.value) {\n            this.$termsOfUseButton.show();\n        }\n        else {\n            this.$termsOfUseButton.hide();\n        }\n    };\n    DownloadDialogue.prototype.getFileExtension = function (fileUri) {\n        var extension = fileUri.split(\".\").pop();\n        // if it's not a valid file extension\n        if (extension.length > 5 || extension.indexOf(\"/\") !== -1) {\n            return null;\n        }\n        return extension;\n    };\n    DownloadDialogue.prototype.isMediaDownloadEnabled = function () {\n        return this.extension.helper.isUIEnabled(\"mediaDownload\");\n    };\n    DownloadDialogue.prototype.isDownloadOptionAvailable = function (option) {\n        switch (option) {\n            case DownloadOption.ENTIRE_FILE_AS_ORIGINAL:\n                return this.isMediaDownloadEnabled();\n        }\n        return true;\n    };\n    DownloadDialogue.prototype.close = function () {\n        _super.prototype.close.call(this);\n    };\n    DownloadDialogue.prototype.resize = function () {\n        this.setDockedPosition();\n    };\n    return DownloadDialogue;\n}(Dialogue));\nexport { DownloadDialogue };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { BaseEvents } from \"../uv-shared-module/BaseEvents\";\nimport { CenterPanel } from \"../uv-shared-module/CenterPanel\";\nimport { Events } from \"../../extensions/uv-pdf-extension/Events\";\nimport { Bools } from \"@edsilv/utils\";\nvar PDFCenterPanel = /** @class */ (function (_super) {\n    __extends(PDFCenterPanel, _super);\n    function PDFCenterPanel($element) {\n        var _this = _super.call(this, $element) || this;\n        _this._maxScale = 5;\n        _this._minScale = 0.7;\n        _this._nextButtonEnabled = false;\n        _this._pageIndex = 1;\n        _this._pageIndexPending = null;\n        _this._pageRendering = false;\n        _this._pdfDoc = null;\n        _this._prevButtonEnabled = false;\n        _this._scale = 0.7;\n        return _this;\n    }\n    PDFCenterPanel.prototype.create = function () {\n        var _this = this;\n        this.setConfig(\"pdfCenterPanel\");\n        _super.prototype.create.call(this);\n        this._$pdfContainer = $('<div class=\"pdfContainer\"></div>');\n        this._$canvas = $(\"<canvas></canvas>\");\n        this._$spinner = $('<div class=\"spinner\"></div>');\n        this._canvas = this._$canvas[0];\n        this._ctx = this._canvas.getContext(\"2d\");\n        this._$prevButton = $('<div class=\"btn prev\" tabindex=\"0\"></div>');\n        this._$nextButton = $('<div class=\"btn next\" tabindex=\"0\"></div>');\n        this._$zoomInButton = $('<div class=\"btn zoomIn\" tabindex=\"0\"></div>');\n        this._$zoomOutButton = $('<div class=\"btn zoomOut\" tabindex=\"0\"></div>');\n        // Only attach PDF controls if we're using PDF.js; they have no meaning in\n        // PDFObject. However, we still create the objects above so that references\n        // to them do not cause errors (simpler than putting usePdfJs checks all over):\n        if (Bools.getBool(this.extension.data.config.options.usePdfJs, false)) {\n            this.$content.append(this._$spinner);\n            this.$content.append(this._$prevButton);\n            this.$content.append(this._$nextButton);\n            this.$content.append(this._$zoomInButton);\n            this.$content.append(this._$zoomOutButton);\n        }\n        this._$pdfContainer.append(this._$canvas);\n        this.$content.prepend(this._$pdfContainer);\n        this.component.subscribe(BaseEvents.OPEN_EXTERNAL_RESOURCE, function (resources) {\n            _this.openMedia(resources);\n        });\n        this.component.subscribe(BaseEvents.FIRST, function () {\n            if (!_this._pdfDoc) {\n                return;\n            }\n            _this._pageIndex = 1;\n            _this._queueRenderPage(_this._pageIndex);\n        });\n        this.component.subscribe(BaseEvents.PREV, function () {\n            if (!_this._pdfDoc) {\n                return;\n            }\n            if (_this._pageIndex <= 1) {\n                return;\n            }\n            _this._pageIndex--;\n            _this._queueRenderPage(_this._pageIndex);\n        });\n        this.component.subscribe(BaseEvents.NEXT, function () {\n            if (!_this._pdfDoc) {\n                return;\n            }\n            if (_this._pageIndex >= _this._pdfDoc.numPages) {\n                return;\n            }\n            _this._pageIndex++;\n            _this._queueRenderPage(_this._pageIndex);\n        });\n        this.component.subscribe(BaseEvents.LAST, function () {\n            if (!_this._pdfDoc) {\n                return;\n            }\n            _this._pageIndex = _this._pdfDoc.numPages;\n            _this._queueRenderPage(_this._pageIndex);\n        });\n        this.component.subscribe(BaseEvents.CANVAS_INDEX_CHANGED, function () {\n            if (!_this._pdfDoc) {\n                return;\n            }\n            _this._pageIndex = 1;\n            _this._queueRenderPage(_this._pageIndex);\n        });\n        this.component.subscribe(Events.SEARCH, function (pageIndex) {\n            if (!_this._pdfDoc) {\n                return;\n            }\n            if (pageIndex < 1 || pageIndex > _this._pdfDoc.numPages) {\n                return;\n            }\n            _this._pageIndex = pageIndex;\n            _this._queueRenderPage(_this._pageIndex);\n        });\n        this._$prevButton.onPressed(function (e) {\n            e.preventDefault();\n            if (!_this._prevButtonEnabled)\n                return;\n            _this.component.publish(BaseEvents.PREV);\n        });\n        this.disablePrevButton();\n        this._$nextButton.onPressed(function (e) {\n            e.preventDefault();\n            if (!_this._nextButtonEnabled)\n                return;\n            _this.component.publish(BaseEvents.NEXT);\n        });\n        this.disableNextButton();\n        this._$zoomInButton.onPressed(function (e) {\n            e.preventDefault();\n            var newScale = _this._scale + 0.5;\n            if (newScale < _this._maxScale) {\n                _this._scale = newScale;\n            }\n            else {\n                _this._scale = _this._maxScale;\n            }\n            _this._render(_this._pageIndex);\n        });\n        this._$zoomOutButton.onPressed(function (e) {\n            e.preventDefault();\n            var newScale = _this._scale - 0.5;\n            if (newScale > _this._minScale) {\n                _this._scale = newScale;\n            }\n            else {\n                _this._scale = _this._minScale;\n            }\n            _this._render(_this._pageIndex);\n        });\n    };\n    PDFCenterPanel.prototype.disablePrevButton = function () {\n        this._prevButtonEnabled = false;\n        this._$prevButton.addClass(\"disabled\");\n    };\n    PDFCenterPanel.prototype.enablePrevButton = function () {\n        this._prevButtonEnabled = true;\n        this._$prevButton.removeClass(\"disabled\");\n    };\n    PDFCenterPanel.prototype.hidePrevButton = function () {\n        this.disablePrevButton();\n        this._$prevButton.hide();\n    };\n    PDFCenterPanel.prototype.showPrevButton = function () {\n        this.enablePrevButton();\n        this._$prevButton.show();\n    };\n    PDFCenterPanel.prototype.disableNextButton = function () {\n        this._nextButtonEnabled = false;\n        this._$nextButton.addClass(\"disabled\");\n    };\n    PDFCenterPanel.prototype.enableNextButton = function () {\n        this._nextButtonEnabled = true;\n        this._$nextButton.removeClass(\"disabled\");\n    };\n    PDFCenterPanel.prototype.hideNextButton = function () {\n        this.disableNextButton();\n        this._$nextButton.hide();\n    };\n    PDFCenterPanel.prototype.showNextButton = function () {\n        this.enableNextButton();\n        this._$nextButton.show();\n    };\n    PDFCenterPanel.prototype.openMedia = function (resources) {\n        return __awaiter(this, void 0, void 0, function () {\n            var mediaUri, canvas, formats, pdfUri, _a, parameter, pdfDoc;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        this._$spinner.show();\n                        return [4 /*yield*/, this.extension.getExternalResources(resources)];\n                    case 1:\n                        _b.sent();\n                        mediaUri = null;\n                        canvas = this.extension.helper.getCurrentCanvas();\n                        formats = this.extension.getMediaFormats(canvas);\n                        pdfUri = canvas.id;\n                        if (formats && formats.length) {\n                            mediaUri = formats[0].id;\n                        }\n                        else {\n                            mediaUri = canvas.id;\n                        }\n                        if (!!Bools.getBool(this.extension.data.config.options.usePdfJs, false)) return [3 /*break*/, 3];\n                        _a = window;\n                        return [4 /*yield*/, import(\n                            /* webpackChunkName: \"pdfobject\" */ /* webpackMode: \"lazy\" */ \"pdfobject\")];\n                    case 2:\n                        _a.PDFObject = _b.sent();\n                        window.PDFObject.embed(pdfUri, \".pdfContainer\", { id: \"PDF\" });\n                        return [3 /*break*/, 6];\n                    case 3: return [4 /*yield*/, import(\n                        /* webpackChunkName: \"pdfjs\" */ /* webpackMode: \"lazy\" */ \"pdfjs-dist\")];\n                    case 4:\n                        PDFJS = _b.sent();\n                        PDFJS.disableWorker = true;\n                        parameter = {\n                            url: mediaUri,\n                            withCredentials: canvas.externalResource.isAccessControlled()\n                        };\n                        return [4 /*yield*/, PDFJS.getDocument(parameter)];\n                    case 5:\n                        pdfDoc = _b.sent();\n                        this._pdfDoc = pdfDoc;\n                        this._render(this._pageIndex);\n                        this.component.publish(Events.PDF_LOADED, pdfDoc);\n                        this._$spinner.hide();\n                        _b.label = 6;\n                    case 6:\n                        this.component.publish(BaseEvents.OPENED_MEDIA);\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    PDFCenterPanel.prototype._render = function (num) {\n        var _this = this;\n        if (!Bools.getBool(this.extension.data.config.options.usePdfJs, false)) {\n            return;\n        }\n        this._pageRendering = true;\n        this._$zoomOutButton.enable();\n        this._$zoomInButton.enable();\n        //disable zoom if not possible\n        var lowScale = this._scale - 0.5;\n        var highScale = this._scale + 0.5;\n        if (lowScale < this._minScale) {\n            this._$zoomOutButton.disable();\n        }\n        if (highScale > this._maxScale) {\n            this._$zoomInButton.disable();\n        }\n        //this._pdfDoc.getPage(num).then((page: any) => {\n        this._pdfDoc.getPage(num).then(function (page) {\n            if (_this._renderTask) {\n                _this._renderTask.cancel();\n            }\n            // how to fit to the available space\n            // const height: number = this.$content.height();\n            // this._canvas.height = height;\n            // this._viewport = page.getViewport(this._canvas.height / page.getViewport(1.0).height);\n            // const width: number = this._viewport.width;\n            // this._canvas.width = width;\n            // this._$canvas.css({\n            //     left: (this.$content.width() / 2) - (width / 2)\n            // });\n            // scale viewport\n            _this._viewport = page.getViewport(_this._scale);\n            _this._canvas.height = _this._viewport.height;\n            _this._canvas.width = _this._viewport.width;\n            // Render PDF page into canvas context\n            var renderContext = {\n                canvasContext: _this._ctx,\n                viewport: _this._viewport\n            };\n            _this._renderTask = page.render(renderContext);\n            // Wait for rendering to finish\n            _this._renderTask.promise\n                .then(function () {\n                _this.component.publish(Events.PAGE_INDEX_CHANGED, _this._pageIndex);\n                _this._pageRendering = false;\n                if (_this._pageIndexPending !== null) {\n                    // New page rendering is pending\n                    _this._render(_this._pageIndexPending);\n                    _this._pageIndexPending = null;\n                }\n                if (_this._pageIndex === 1) {\n                    _this.disablePrevButton();\n                }\n                else {\n                    _this.enablePrevButton();\n                }\n                if (_this._pageIndex === _this._pdfDoc.numPages) {\n                    _this.disableNextButton();\n                }\n                else {\n                    _this.enableNextButton();\n                }\n            })\n                .catch(function (err) {\n                //console.log(err);\n            });\n        });\n    };\n    PDFCenterPanel.prototype._queueRenderPage = function (num) {\n        if (this._pageRendering) {\n            this._pageIndexPending = num;\n        }\n        else {\n            this._render(num);\n        }\n    };\n    PDFCenterPanel.prototype.resize = function () {\n        _super.prototype.resize.call(this);\n        this._$pdfContainer.width(this.$content.width());\n        this._$pdfContainer.height(this.$content.height());\n        this._$spinner.css(\"top\", this.$content.height() / 2 - this._$spinner.height() / 2);\n        this._$spinner.css(\"left\", this.$content.width() / 2 - this._$spinner.width() / 2);\n        this._$prevButton.css({\n            top: (this.$content.height() - this._$prevButton.height()) / 2,\n            left: this._$prevButton.horizontalMargins()\n        });\n        this._$nextButton.css({\n            top: (this.$content.height() - this._$nextButton.height()) / 2,\n            left: this.$content.width() -\n                (this._$nextButton.width() + this._$nextButton.horizontalMargins())\n        });\n        if (!this._viewport) {\n            return;\n        }\n        this._render(this._pageIndex);\n    };\n    return PDFCenterPanel;\n}(CenterPanel));\nexport { PDFCenterPanel };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { BaseEvents } from \"../uv-shared-module/BaseEvents\";\nimport { Events } from \"../../extensions/uv-pdf-extension/Events\";\nimport { HeaderPanel } from \"../uv-shared-module/HeaderPanel\";\nimport { Strings } from \"@edsilv/utils\";\nvar PDFHeaderPanel = /** @class */ (function (_super) {\n    __extends(PDFHeaderPanel, _super);\n    function PDFHeaderPanel($element) {\n        var _this = _super.call(this, $element) || this;\n        _this.firstButtonEnabled = false;\n        _this.lastButtonEnabled = false;\n        _this.nextButtonEnabled = false;\n        _this.prevButtonEnabled = false;\n        _this._pageIndex = 0;\n        _this._pdfDoc = null;\n        return _this;\n    }\n    PDFHeaderPanel.prototype.create = function () {\n        var _this = this;\n        this.setConfig(\"pdfHeaderPanel\");\n        _super.prototype.create.call(this);\n        this.component.subscribe(Events.PAGE_INDEX_CHANGED, function (pageIndex) {\n            _this._pageIndex = pageIndex;\n            _this.render();\n        });\n        this.component.subscribe(Events.PDF_LOADED, function (pdfDoc) {\n            _this._pdfDoc = pdfDoc;\n        });\n        this.$prevOptions = $('<div class=\"prevOptions\"></div>');\n        this.$centerOptions.append(this.$prevOptions);\n        this.$firstButton = $(\"\\n          <button class=\\\"btn imageBtn first\\\" tabindex=\\\"0\\\" title=\\\"\" + this.content.first + \"\\\">\\n            <i class=\\\"uv-icon-first\\\" aria-hidden=\\\"true\\\"></i>\" + this.content.first + \"\\n          </button>\\n        \");\n        this.$prevOptions.append(this.$firstButton);\n        this.$firstButton.disable();\n        this.$prevButton = $(\"\\n          <button class=\\\"btn imageBtn prev\\\" tabindex=\\\"0\\\" title=\\\"\" + this.content.previous + \"\\\">\\n            <i class=\\\"uv-icon-prev\\\" aria-hidden=\\\"true\\\"></i>\" + this.content.previous + \"\\n          </button>\\n        \");\n        this.$prevOptions.append(this.$prevButton);\n        this.$prevButton.disable();\n        this.$search = $('<div class=\"search\"></div>');\n        this.$centerOptions.append(this.$search);\n        this.$searchText = $('<input class=\"searchText\" maxlength=\"50\" type=\"text\" tabindex=\"0\" aria-label=\"' +\n            this.content.pageSearchLabel +\n            '\"/>');\n        this.$search.append(this.$searchText);\n        this.$total = $('<span class=\"total\"></span>');\n        this.$search.append(this.$total);\n        this.$searchButton = $('<a class=\"go btn btn-primary\" tabindex=\"0\">' + this.content.go + \"</a>\");\n        this.$search.append(this.$searchButton);\n        this.$searchButton.disable();\n        this.$nextOptions = $('<div class=\"nextOptions\"></div>');\n        this.$centerOptions.append(this.$nextOptions);\n        this.$nextButton = $(\"\\n          <button class=\\\"btn imageBtn next\\\" tabindex=\\\"0\\\" title=\\\"\" + this.content.next + \"\\\">\\n            <i class=\\\"uv-icon-next\\\" aria-hidden=\\\"true\\\"></i>\" + this.content.next + \"\\n          </button>\\n        \");\n        this.$nextOptions.append(this.$nextButton);\n        this.$nextButton.disable();\n        this.$lastButton = $(\"\\n          <button class=\\\"btn imageBtn last\\\" tabindex=\\\"0\\\" title=\\\"\" + this.content.last + \"\\\">\\n            <i class=\\\"uv-icon-last\\\" aria-hidden=\\\"true\\\"></i>\" + this.content.last + \"\\n          </button>\\n        \");\n        this.$nextOptions.append(this.$lastButton);\n        this.$lastButton.disable();\n        // ui event handlers.\n        this.$firstButton.onPressed(function () {\n            _this.component.publish(BaseEvents.FIRST);\n        });\n        this.$prevButton.onPressed(function () {\n            _this.component.publish(BaseEvents.PREV);\n        });\n        this.$nextButton.onPressed(function () {\n            _this.component.publish(BaseEvents.NEXT);\n        });\n        this.$lastButton.onPressed(function () {\n            _this.component.publish(BaseEvents.LAST);\n        });\n        this.$searchText.onEnter(function () {\n            _this.$searchText.blur();\n            _this.search(_this.$searchText.val());\n        });\n        this.$searchText.click(function () {\n            $(this).select();\n        });\n        this.$searchButton.onPressed(function () {\n            _this.search(_this.$searchText.val());\n        });\n    };\n    PDFHeaderPanel.prototype.render = function () {\n        // check if the book has more than one page, otherwise hide prev/next options.\n        if (this._pdfDoc.numPages === 1) {\n            this.$centerOptions.hide();\n        }\n        else {\n            this.$centerOptions.show();\n        }\n        this.$searchText.val(this._pageIndex);\n        var of = this.content.of;\n        this.$total.html(Strings.format(of, this._pdfDoc.numPages.toString()));\n        this.$searchButton.enable();\n        if (this._pageIndex === 1) {\n            this.$firstButton.disable();\n            this.$prevButton.disable();\n        }\n        else {\n            this.$firstButton.enable();\n            this.$prevButton.enable();\n        }\n        if (this._pageIndex === this._pdfDoc.numPages) {\n            this.$lastButton.disable();\n            this.$nextButton.disable();\n        }\n        else {\n            this.$lastButton.enable();\n            this.$nextButton.enable();\n        }\n    };\n    PDFHeaderPanel.prototype.search = function (value) {\n        if (!value) {\n            this.extension.showMessage(this.content.emptyValue);\n            return;\n        }\n        var index = parseInt(this.$searchText.val(), 10);\n        if (isNaN(index)) {\n            this.extension.showMessage(this.extension.data.config.modules.genericDialogue.content.invalidNumber);\n            return;\n        }\n        this.component.publish(Events.SEARCH, index);\n    };\n    PDFHeaderPanel.prototype.resize = function () {\n        _super.prototype.resize.call(this);\n    };\n    return PDFHeaderPanel;\n}(HeaderPanel));\nexport { PDFHeaderPanel };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { BaseEvents } from \"../uv-shared-module/BaseEvents\";\nimport { LeftPanel } from \"../uv-shared-module/LeftPanel\";\nimport { ThumbsView } from \"./ThumbsView\";\nimport { ViewingDirection } from \"@iiif/vocabulary\";\nimport { Files } from \"@edsilv/utils\";\nimport { LanguageMap } from \"manifesto.js\";\nvar ResourcesLeftPanel = /** @class */ (function (_super) {\n    __extends(ResourcesLeftPanel, _super);\n    function ResourcesLeftPanel($element) {\n        return _super.call(this, $element) || this;\n    }\n    ResourcesLeftPanel.prototype.create = function () {\n        this.setConfig(\"resourcesLeftPanel\");\n        _super.prototype.create.call(this);\n        this.setTitle(this.content.title);\n        /*\n             TODO: make tabs work\n            this.$tabs = $('<div class=\"tabs\"></div>');\n            this.$main.append(this.$tabs);\n    \n            this.$thumbsButton = $('<a class=\"thumbs tab\">' + this.content.thumbnails + '</a>');\n            this.$thumbsButton.prop('title', this.content.thumbnails);\n            this.$tabs.append(this.$thumbsButton);\n    \n            this.$resourcesButton = $('<a class=\"resources tab\">' + this.content.resources+ '</a>');\n            this.$resourcesButton.prop('title', this.content.resources);\n            this.$tabs.append(this.$resourcesButton);\n             */\n        this.$tabsContent = $('<div class=\"tabsContent\"></div>');\n        this.$main.append(this.$tabsContent);\n        this.$views = $('<div class=\"views\"></div>');\n        this.$tabsContent.append(this.$views);\n        this.$thumbsView = $('<div class=\"thumbsView\"></div>');\n        this.$views.append(this.$thumbsView);\n        this.$resourcesView = $('<div class=\"resourcesView\"></div>');\n        this.$resources = $(\"<ul></ul>\");\n        this.$resourcesView.append(this.$resources);\n        this.$views.append(this.$resourcesView);\n        this.thumbsView = new ThumbsView(this.$thumbsView);\n        this.dataBind();\n    };\n    ResourcesLeftPanel.prototype.dataBind = function () {\n        this.dataBindThumbsView();\n        var annotations = this.extension.helper\n            .getCurrentCanvas()\n            .getResources();\n        if (annotations.length === 0) {\n            this.$resourcesView.hide();\n        }\n        for (var i = 0; i < annotations.length; i++) {\n            var annotation = annotations[i];\n            var resource = annotation.getResource();\n            if (resource) {\n                var label = LanguageMap.getValue(resource.getLabel());\n                if (label) {\n                    var mime = Files.simplifyMimeType(resource.getFormat().toString());\n                    var $listItem = $('<li><a href=\"' +\n                        resource.id +\n                        '\" target=\"_blank\">' +\n                        label +\n                        \" (\" +\n                        mime +\n                        \")\" +\n                        \"</li>\");\n                    this.$resources.append($listItem);\n                }\n            }\n        }\n    };\n    ResourcesLeftPanel.prototype.dataBindThumbsView = function () {\n        if (!this.thumbsView)\n            return;\n        var width;\n        var height;\n        var viewingDirection = this.extension.helper.getViewingDirection();\n        if (viewingDirection &&\n            (viewingDirection === ViewingDirection.LEFT_TO_RIGHT ||\n                viewingDirection === ViewingDirection.RIGHT_TO_LEFT)) {\n            width = this.config.options.twoColThumbWidth;\n            height = this.config.options.twoColThumbHeight;\n        }\n        else {\n            width = this.config.options.oneColThumbWidth;\n            height = this.config.options.oneColThumbHeight;\n        }\n        if (typeof width === \"undefined\") {\n            width = 100;\n        }\n        if (typeof height === \"undefined\") {\n            height = 100;\n        }\n        this.thumbsView.thumbs = this.extension.helper.getThumbs(width, height);\n        // hide thumb selector for single-part manifests\n        if (this.thumbsView.thumbs.length < 2) {\n            this.$thumbsView.hide();\n        }\n        this.thumbsView.databind();\n    };\n    ResourcesLeftPanel.prototype.expandFullStart = function () {\n        _super.prototype.expandFullStart.call(this);\n        this.component.publish(BaseEvents.LEFTPANEL_EXPAND_FULL_START);\n    };\n    ResourcesLeftPanel.prototype.expandFullFinish = function () {\n        _super.prototype.expandFullFinish.call(this);\n        this.component.publish(BaseEvents.LEFTPANEL_EXPAND_FULL_FINISH);\n    };\n    ResourcesLeftPanel.prototype.collapseFullStart = function () {\n        _super.prototype.collapseFullStart.call(this);\n        this.component.publish(BaseEvents.LEFTPANEL_COLLAPSE_FULL_START);\n    };\n    ResourcesLeftPanel.prototype.collapseFullFinish = function () {\n        _super.prototype.collapseFullFinish.call(this);\n        this.component.publish(BaseEvents.LEFTPANEL_COLLAPSE_FULL_FINISH);\n    };\n    ResourcesLeftPanel.prototype.resize = function () {\n        _super.prototype.resize.call(this);\n        this.$views.height(this.$main.height());\n        this.$resources.height(this.$main.height());\n    };\n    return ResourcesLeftPanel;\n}(LeftPanel));\nexport { ResourcesLeftPanel };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { ThumbsView as BaseView } from \"../uv-shared-module/ThumbsView\";\nvar ThumbsView = /** @class */ (function (_super) {\n    __extends(ThumbsView, _super);\n    function ThumbsView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ThumbsView.prototype.create = function () {\n        this.setConfig(\"resourcesLeftPanel\");\n        _super.prototype.create.call(this);\n    };\n    return ThumbsView;\n}(BaseView));\nexport { ThumbsView };\n","var Bookmark = /** @class */ (function () {\n    function Bookmark() {\n    }\n    return Bookmark;\n}());\nexport { Bookmark };\n","export var DownloadOption;\n(function (DownloadOption) {\n    DownloadOption[\"CANVAS_RENDERINGS\"] = \"canvasRenderings\";\n    DownloadOption[\"CURRENT_VIEW\"] = \"currentView\";\n    DownloadOption[\"ENTIRE_DOCUMENT_AS_PDF\"] = \"entireDocumentAsPdf\";\n    DownloadOption[\"ENTIRE_DOCUMENT_AS_TEXT\"] = \"entireDocumentAsText\";\n    DownloadOption[\"ENTIRE_FILE_AS_ORIGINAL\"] = \"entireFileAsOriginal\";\n    DownloadOption[\"IMAGE_RENDERINGS\"] = \"imageRenderings\";\n    DownloadOption[\"MANIFEST_RENDERINGS\"] = \"manifestRenderings\";\n    DownloadOption[\"RANGE_RENDERINGS\"] = \"rangeRenderings\";\n    DownloadOption[\"SELECTION\"] = \"selection\";\n    //SEQUENCE_RENDERINGS = \"sequenceRenderings\",\n    DownloadOption[\"UNKNOWN\"] = \"unknown\";\n    DownloadOption[\"WHOLE_IMAGE_HIGH_RES\"] = \"wholeImageHighRes\";\n    DownloadOption[\"WHOLE_IMAGE_LOW_RES\"] = \"wholeImageLowRes\";\n    DownloadOption[\"WHOLE_IMAGES_HIGH_RES\"] = \"wholeImagesHighRes\";\n})(DownloadOption || (DownloadOption = {}));\n"],"sourceRoot":""}