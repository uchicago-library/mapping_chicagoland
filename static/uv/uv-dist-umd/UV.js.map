{"version":3,"sources":["webpack://UV/webpack/universalModuleDefinition","webpack://UV/webpack/bootstrap","webpack://UV/./node_modules/@edsilv/http-status-codes/dist-umd/httpstatuscodes.js","webpack://UV/./node_modules/@edsilv/jquery-plugins/dist/jquery-plugins.js","webpack://UV/./node_modules/@edsilv/utils/dist-esmodule/index.js","webpack://UV/./node_modules/@iiif/base-component/dist-esmodule/index.js","webpack://UV/./node_modules/@iiif/manifold/dist-esmodule/AnnotationGroup.js","webpack://UV/./node_modules/@iiif/manifold/dist-esmodule/AnnotationRect.js","webpack://UV/./node_modules/@iiif/manifold/dist-esmodule/Bootstrapper.js","webpack://UV/./node_modules/@iiif/manifold/dist-esmodule/Errors.js","webpack://UV/./node_modules/@iiif/manifold/dist-esmodule/ExternalResource.js","webpack://UV/./node_modules/@iiif/manifold/dist-esmodule/Helper.js","webpack://UV/./node_modules/@iiif/manifold/dist-esmodule/ILabelValuePair.js","webpack://UV/./node_modules/@iiif/manifold/dist-esmodule/MetadataGroup.js","webpack://UV/./node_modules/@iiif/manifold/dist-esmodule/MetadataOptions.js","webpack://UV/./node_modules/@iiif/manifold/dist-esmodule/MultiSelectState.js","webpack://UV/./node_modules/@iiif/manifold/dist-esmodule/Translation.js","webpack://UV/./node_modules/@iiif/manifold/dist-esmodule/TreeSortType.js","webpack://UV/./node_modules/@iiif/manifold/dist-esmodule/UriLabeller.js","webpack://UV/./node_modules/@iiif/manifold/dist-esmodule/index.js","webpack://UV/./node_modules/@iiif/vocabulary/dist-esmodule/index.js","webpack://UV/./node_modules/cssfilter/lib/css.js","webpack://UV/./node_modules/cssfilter/lib/default.js","webpack://UV/./node_modules/cssfilter/lib/index.js","webpack://UV/./node_modules/cssfilter/lib/parser.js","webpack://UV/./node_modules/cssfilter/lib/util.js","webpack://UV/./node_modules/manifesto.js/dist-umd/manifesto.js","webpack://UV/./node_modules/xss/lib/default.js","webpack://UV/./node_modules/xss/lib/index.js","webpack://UV/./node_modules/xss/lib/parser.js","webpack://UV/./node_modules/xss/lib/util.js","webpack://UV/./node_modules/xss/lib/xss.js","webpack://UV/./src/PubSub.ts","webpack://UV/./src/URLDataProvider.ts","webpack://UV/./src/UVDataProvider.ts","webpack://UV/./src/Utils.ts","webpack://UV/./src/Viewer.ts","webpack://UV/./src/index.ts","webpack://UV/./src/lib/index.js","webpack://UV/./src/modules/uv-shared-module/BaseEvents.ts"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;QCVA;QACA;QACA;QACA;;;QAGA;QACA;QACA;QACA,QAAQ,oBAAoB;QAC5B;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;;QAEA;;;QAGA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;;;;QAIA;QACA;QACA,yCAAyC,o2CAAo2C,6BAA6B,6jCAA6jC;QACv+E;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;QAEA;QACA;QACA;QACA;;;QAGA;;QAEA;QACA,iCAAiC;;QAEjC;QACA;QACA;QACA,KAAK;QACL;QACA;QACA;QACA,MAAM;QACN;;QAEA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,wBAAwB,kCAAkC;QAC1D,MAAM;QACN;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;QAEA;QACA,0CAA0C,oBAAoB,WAAW;;QAEzE;QACA;QACA;QACA;QACA,gBAAgB,uBAAuB;QACvC;;;QAGA;QACA;;;;;;;;;;;;ACrMA,eAAe,KAAiD,oBAAoB,SAA+I,CAAC,oBAAoB,mBAAmB,SAAS,cAAc,4BAA4B,YAAY,qBAAqB,2DAA2D,uCAAuC,qCAAqC,oBAAoB,EAAE,iBAAiB,4FAA4F,eAAe,wCAAwC,SAAS,EAAE,mBAAmB,8BAA8B,qDAAqD,0BAA0B,6CAA6C,sBAAsB,6DAA6D,YAAY,eAAe,SAAS,iBAAiB,iCAAiC,iBAAiB,YAAY,UAAU,sBAAsB,mBAAmB,iDAAiD,iBAAiB,kBAAkB,eAAe,iBAAiB,aAAa,sCAAsC,SAAS,kxCAAkxC,GAAG;AACthF,2C;;;;;;;;;;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D;AAC1D;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE;AACtE;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD;AACxD;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,0CAA0C,cAAc,EAAE;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,cAAc;AAC3B;AACA;AACA,yCAAyC,eAAe,0BAA0B,EAAE;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA,+BAA+B,WAAW;AAC1C,+BAA+B,WAAW;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD;AACrD;AACA;AACA;AACA;AACA,sDAAsD;AACtD;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD;AACxD;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;;AC9YD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,CAAC;AACgB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACgB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACoB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,gBAAgB;AACvC;AACA;AACA;AACA;AACA;AACA,CAAC;AACiB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACgB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACiB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,qBAAqB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACoB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,CAAC;AACiB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACgB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACmB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACgB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACe;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACqB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACkB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACkB;AACnB;AACA;AACA;AACA;AACA,qCAAqC,kCAAkC;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,kCAAkC;AACvE;AACA,uBAAuB,kBAAkB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,kCAAkC;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,kCAAkC;AACvE;AACA;AACA;AACA;AACA,+BAA+B,iBAAiB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,2BAA2B;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,yBAAyB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,kCAAkC;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,kCAAkC;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACkB;AACnB;AACA;AACA;AACA;AACA,CAAC;AACsB;AAChB;AACP;AACA;AACA;AACA;AACA,CAAC,kCAAkC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA,uBAAuB,mBAAmB;AAC1C,qCAAqC,YAAY;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACkB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACe;AAChB,iC;;;;;;;;;;;;AC7nBA;AAAA;AAAA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA,+CAA+C;AAC/C;AACA;AACA,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACwB;AACzB,iC;;;;;;;;;;;;AC5CA;AAAA;AAAA;AAAkD;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,8DAAc;AACrC;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,CAAC;AAC0B;AAC3B,2C;;;;;;;;;;;;ACpBA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACyB;AAC1B,0C;;;;;;;;;;;;ACbA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkC;AACkB;AACf;AACrC;AACA;AACA;AACA,+DAA+D;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,kDAAK;AACjB;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,2BAA2B,kDAAK;AAChC;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,wEAAwE;AACxE,sEAAsE;AACtE,uDAAuD,iEAAgB;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,8CAAM;AACvD;AACA,6BAA6B;AAC7B;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,yCAAyC,8CAAM;AAC/C;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,iCAAiC,8CAAM;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACuB;AACxB,wC;;;;;;;;;;;;ACrFA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA,CAAC;AACiB;AAClB,kC;;;;;;;;;;;;ACPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkD;AACU;AACvB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,qBAAqB;AAC5C;AACA;AACA;AACA;AACA;AACA,gBAAgB,kDAAK;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,+DAAc;AAC1D,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,kDAAK,sBAAsB,+DAAc;AAChF,gCAAgC,kDAAK,sBAAsB,+DAAc;AACzE,qCAAqC,kDAAK,sBAAsB,+DAAc;AAC9E;AACA,yEAAyE,+DAAc;AACvF,wEAAwE,+DAAc;AACtF;AACA;AACA,kEAAkE,+DAAc;AAChF,iEAAiE,+DAAc;AAC/E;AACA;AACA,uEAAuE,+DAAc;AACrF,sEAAsE,+DAAc;AACpF;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,kDAAK,sBAAsB,+DAAc;AAChF,gCAAgC,kDAAK,sBAAsB,+DAAc;AACzE,mCAAmC,kDAAK,sBAAsB,+DAAc;AAC5E,gCAAgC,kDAAK,sBAAsB,+DAAc;AACzE;AACA,yEAAyE,+DAAc;AACvF,wEAAwE,+DAAc;AACtF,wEAAwE,+DAAc;AACtF;AACA;AACA,kEAAkE,+DAAc;AAChF,iEAAiE,+DAAc;AAC/E,iEAAiE,+DAAc;AAC/E;AACA;AACA,qEAAqE,+DAAc;AACnF,oEAAoE,+DAAc;AAClF,oEAAoE,+DAAc;AAClF;AACA;AACA,kEAAkE,+DAAc;AAChF,iEAAiE,+DAAc;AAC/E,iEAAiE,+DAAc;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,2EAAgC;AACtE;AACA;AACA,sCAAsC,4DAAiB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,4DAAiB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,4DAAiB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,2EAAgC;AAC1E;AACA;AACA,0CAA0C,4DAAiB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,CAAC;AAC2B;AAC5B,4C;;;;;;;;;;;;AC7VA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAsD;AACN;AACF;AACmC;AAC/C;AACgF;AAClH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,+DAAc;AACnE;AACA,yDAAyD,+DAAc;AACvE;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,8CAAM;AAClC;AACA;AACA;AACA,mBAAmB,wDAAW;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,gBAAgB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,yDAAY;AAC9D;AACA;AACA;AACA;AACA;AACA,2BAA2B,mBAAmB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA,4BAA4B,8CAAM;AAClC;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA,kFAAkF,mDAAmD,QAAQ,kDAAK,uBAAuB,kDAAK,yBAAyB,EAAE,GAAG,EAAE;AAC9M;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,8CAAM;AAClC;AACA;AACA;AACA,mBAAmB,wDAAW;AAC9B;AACA;AACA;AACA;AACA;AACA,4BAA4B,8CAAM;AAClC;AACA;AACA;AACA,mBAAmB,wDAAW;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,8CAAM;AAClC;AACA;AACA;AACA;AACA;AACA,4BAA4B,8CAAM;AAClC;AACA;AACA;AACA;AACA;AACA,4BAA4B,8CAAM;AAClC;AACA;AACA;AACA,6BAA6B,yDAAY;AACzC,2BAA2B,yDAAY;AACvC;AACA;AACA;AACA;AACA;AACA,4BAA4B,8CAAM;AAClC;AACA;AACA;AACA,gCAAgC,4DAAa;AAC7C,yCAAyC;AACzC;AACA;AACA;AACA;AACA,mCAAmC,2DAAc;AACjD,sCAAsC,qDAAQ;AAC9C;AACA;AACA;AACA;AACA;AACA,mCAAmC,2DAAc;AACjD,sCAAsC,qDAAQ;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,2DAAc;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,2DAAc;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,8CAAM;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,4DAAa;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,6BAA6B;AACxD;AACA;AACA;AACA,0CAA0C,4DAAa;AACvD;AACA;AACA;AACA;AACA;AACA,+BAA+B,mBAAmB;AAClD;AACA;AACA;AACA,6CAA6C,4DAAa;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,4DAAa;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,kEAAgB;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,8CAAM;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,qBAAqB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,qBAAqB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,oBAAoB;AACjD;AACA;AACA;AACA,uCAAuC,uCAAuC,EAAE;AAChF,yCAAyC,oBAAoB,EAAE;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,8CAAM;AAClC;AACA;AACA;AACA;AACA;AACA,4BAA4B,8CAAM;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,8CAAM;AAClC;AACA;AACA;AACA;AACA;AACA,4BAA4B,8CAAM;AAClC;AACA,+CAA+C,+DAAc;AAC7D;AACA,+CAA+C,+DAAc;AAC7D;AACA;AACA;AACA;AACA;AACA,4BAA4B,8CAAM;AAClC;AACA;AACA;AACA;AACA;AACA,4BAA4B,8CAAM;AAClC;AACA;AACA;AACA;AACA;AACA,4BAA4B,8CAAM;AAClC;AACA;AACA,oDAAoD,+DAAc;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D,wBAAwB,yDAAY,UAAU,EAAE;AAC/G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,8CAAM;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,8CAAM;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,mBAAmB;AAC1D,kCAAkC,YAAY,0DAAY,MAAM;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,qDAAQ;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,qDAAQ;AACrC;AACA,iBAAiB,0DAAY;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,0BAA0B,EAAE;AAC9F;AACA;AACA;AACA,4BAA4B,8CAAM;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,8CAAM;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,8CAAM;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,iEAAgB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,4DAAW;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,iEAAgB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,8CAAM;AAClC;AACA;AACA;AACA;AACA;AACA,4BAA4B,8CAAM;AAClC;AACA;AACA;AACA;AACA,mCAAmC,4DAAW;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,8CAAM;AAClC;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,iEAAgB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,iEAAgB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,8CAAM;AAClC;AACA,oDAAoD,+DAAc;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,kBAAkB;AACzC;AACA;AACA;AACA,+BAA+B,qDAAQ;AACvC;AACA;AACA;AACA,iCAAiC,yDAAY;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,kBAAkB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,qDAAQ;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,kBAAkB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,qDAAQ;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,kBAAkB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,qDAAQ;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,2BAA2B;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,2BAA2B;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,6BAA6B;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,2BAA2B;AAClD;AACA;AACA;AACA;AACA;AACA,uBAAuB,mBAAmB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,uBAAuB,2BAA2B;AAClD;AACA,2BAA2B,6BAA6B;AACxD;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,uBAAuB,2BAA2B;AAClD;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,CAAC;AACiB;AAClB,kC;;;;;;;;;;;;ACh2BA;AAAA;AAAA;AACA;AACA;AACA;AACA,CAAC;AAC0B;AAC3B,2C;;;;;;;;;;;;ACNA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,qBAAqB;AAC1D,uBAAuB,qBAAqB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACwB;AACzB,yC;;;;;;;;;;;;ACpBA;AAAA;AAAA;AACA;AACA;AACA;AACA,CAAC;AAC0B;AAC3B,2C;;;;;;;;;;;;ACNA;AAAA;AAAA;AAAA;AAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,wBAAwB,EAAE;AAC5E;AACA;AACA,gDAAgD,wBAAwB,EAAE;AAC1E;AACA;AACA,kDAAkD,QAAQ,kDAAK,wBAAwB,kDAAK,kBAAkB,EAAE;AAChH;AACA;AACA;AACA,uBAAuB,gBAAgB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,2BAA2B,EAAE;AAChF;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,qBAAqB;AAC5C;AACA;AACA;AACA;AACA;AACA,iDAAiD,0BAA0B,EAAE;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,mBAAmB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,kBAAkB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAC2B;AAC5B,4C;;;;;;;;;;;;ACxFA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACsB;AACvB,uC;;;;;;;;;;;;ACRA;AAAA;AAAO;AACP;AACA;AACA;AACA,CAAC,oCAAoC;AACrC,wC;;;;;;;;;;;;ACLA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACsB;AACvB,uC;;;;;;;;;;;;ACfA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkC;AACD;AACF;AACI;AACV;AACS;AACF;AACE;AACC;AACL;AACC;AACD;AACgB;AACvC;AACP,eAAe,0DAAY;AAC3B;AACA,iC;;;;;;;;;;;;AChBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,oDAAoD;AAC9C;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,4BAA4B;AACtB;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,oDAAoD;AAC9C;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,4CAA4C;AACtC;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,8BAA8B;AACxB;AACP;AACA;AACA;AACA;AACA,CAAC,0CAA0C;AACpC;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,wCAAwC;AAClC;AACP;AACA;AACA;AACA;AACA;AACA,CAAC,4CAA4C;AACtC;AACP;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,kCAAkC;AACnC,iC;;;;;;;;;;;AC5JA;AACA;AACA;AACA;AACA;;AAEA,cAAc,mBAAO,CAAC,0DAAW;AACjC,iBAAiB,mBAAO,CAAC,wDAAU;AACnC,QAAQ,mBAAO,CAAC,oDAAQ;;;AAGxB;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,QAAQ,OAAO;AACf,QAAQ,SAAS;AACjB,QAAQ,SAAS;AACjB,QAAQ,SAAS;AACjB;AACA;AACA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;;;AAGA;;;;;;;;;;;;AC7GA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,+BAA+B,EAAE;AACjC;AACA;AACA;;AAEA,qCAAqC;AACrC,mCAAmC;AA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A;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA,sCAAsC,2BAA2B;AACjE;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B,4CAA4C;AAC5C,sCAAsC;AACtC,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA,0CAA0C;AAC1C;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;AACA;AACA,mCAAmC,SAAS;AAC5C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC9ZA;AACA;AACA;AACA;AACA;;AAEA,cAAc,mBAAO,CAAC,oDAAW;AACjC,aAAa,mBAAO,CAAC,kDAAU;AAC/B,gBAAgB,mBAAO,CAAC,4CAAO;;AAE/B;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO,UAAU;AAC5B,YAAY;AACZ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACtCA;AACA;AACA;AACA;AACA;;AAEA,QAAQ,mBAAO,CAAC,8CAAQ;;AAExB;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB,WAAW,SAAS;AACpB,YAAY;AACZ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,sBAAsB,kBAAkB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB,YAAY;AACZ;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA,QAAQ,gBAAgB;AACxB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,QAAQ,OAAO;AACf;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;AC9OA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,OAAO;AACtC;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,+BAA+B,OAAO;AACtC;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACjCA;AACA;AACA;AACA;AACA;;AAEA,gBAAgB,mBAAO,CAAC,wDAAW;AACnC,cAAc,mBAAO,CAAC,oDAAW;AACjC,aAAa,mBAAO,CAAC,kDAAU;AAC/B;AACA;AACA,QAAQ,mBAAO,CAAC,8CAAQ;;AAExB;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ,QAAQ,OAAO;AACf,QAAQ,QAAQ;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA,cAAc,gCAAgC;AAC9C;AACA;AACA,2CAA2C;;AAE3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;;;;;;;;;;;AClNA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACiB;;;;;;;;;;;;;AChClB;AAAA;AAAA;AAAA;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACiD;AACb;AACrC;AACA;AACA;AACA,kCAAkC,kBAAkB;AACpD;AACA;AACA;AACA,eAAe,kDAAI;AACnB;AACA;AACA;AACA;AACA,gBAAgB,kDAAI;AACpB;AACA;AACA,gBAAgB,kDAAI;AACpB;AACA;AACA;AACA;AACA,CAAC,CAAC,8DAAc;AACW;;;;;;;;;;;;;ACpC3B;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D;AAC5D;AACA,CAAC;AACyB;;;;;;;;;;;;;ACX1B;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAgB,mBAAO,CAAC,4CAAK;AACtB;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACO;AACP;AACA;AACA;AACA;AACO;AACP;AACA,mBAAmB,uBAAuB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;;;;;;;;;;;;;ACnCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,iBAAiB,SAAI,IAAI,SAAI;AAC7B,2BAA2B,+DAA+D,gBAAgB,EAAE,EAAE;AAC9G;AACA,mCAAmC,MAAM,6BAA6B,EAAE,YAAY,WAAW,EAAE;AACjG,kCAAkC,MAAM,iCAAiC,EAAE,YAAY,WAAW,EAAE;AACpG,+BAA+B,qFAAqF;AACpH;AACA,KAAK;AACL;AACA,mBAAmB,SAAI,IAAI,SAAI;AAC/B,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,gBAAgB,qDAAqD,oEAAoE,aAAa,EAAE;AACxJ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;AACmE;AACjC;AACU;AACwC;AACtC;AACO;AACD;AACpC;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,8BAA8B;AAC/B;AACA;AACA;AACA;AACA;AACA,iCAAiC,gEAAe;AAChD,4BAA4B,8CAAM;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB,iDAAiD;AACjD;AACA;AACA;AACA,qDAAqD,ggBAC8F;AACnJ;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa,EAAE,EAAE;AACjB,sDAAsD;AACtD;AACA;AACA;AACA,qDAAqD,4qBACwG;AAC7J;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa,EAAE,EAAE;AACjB,6CAA6C;AAC7C;AACA;AACA;AACA,qDAAqD,2vBAC0G;AAC/J;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa,EAAE,EAAE;AACjB,6CAA6C;AAC7C;AACA;AACA;AACA,qDAAqD,gfACsF;AAC3I;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa,EAAE,EAAE;AACjB,qDAAqD;AACrD;AACA;AACA;AACA,qDAAqD,k1BACwG;AAC7J;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa,EAAE,EAAE;AACjB;AACA;AACA,gCAAgC,qEAAoB;AACpD;AACA;AACA,gCAAgC,qEAAoB;AACpD;AACA;AACA,gCAAgC,qEAAoB;AACpD;AACA;AACA,gCAAgC,qEAAoB;AACpD;AACA;AACA,gCAAgC,qEAAoB;AACpD;AACA;AACA,gCAAgC,qEAAoB;AACpD;AACA;AACA,gCAAgC,gEAAe;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,0DAAS;AACzC;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,0DAAS;AACzC;AACA;AACA,gCAAgC,0DAAS;AACzC;AACA;AACA,gCAAgC,0DAAS;AACzC;AACA;AACA,gCAAgC,0DAAS;AACzC;AACA;AACA;AACA;AACA;AACA,gCAAgC,0DAAS;AACzC;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,0DAAS;AACzC;AACA;AACA,gCAAgC,0DAAS;AACzC;AACA;AACA,gCAAgC,0DAAS;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,gEAAiB;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD;AACtD;AACA;AACA;AACA;AACA,sDAAsD;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C,uCAAuC,+EAAU;AACjD,uCAAuC,+EAAU;AACjD,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,mEAAY;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA,gCAAgC,KAAwD;AACxF;AACA,sCAAsC,SAAiB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,kBAAkB,+EAAU;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,kEAAa;AACG;;;;;;;;;;;;;ACvgBlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAoD;AAClB;;;;;;;;;;;;;ACDlC;AAAA;AAAA;AAAgC;;AAEhC;AACA;AACA;AACA,MAAM;AACN;;AAEA;AACA;AACA;AACA;;AAEA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,CAAC;;AAED;AACA;AACA,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,mBAAmB,iBAAiB;AACpC;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC,KAAK;AACL,sBAAsB;AACtB;AACA;AACA,GAAG;;AAEH;AACA,KAAK,uEAAuE;AAC5E,KAAK,uEAAuE;AAC5E,KAAK,0EAA0E;AAC/E,KAAK,yEAAyE;AAC9E,KAAK,uEAAuE;AAC5E,KAAK;AACL;AACA;;AAEA;;;;;;;;;;;;;AC3JA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACqB","file":"UV.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"UV\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"UV\"] = factory();\n\telse\n\t\troot[\"UV\"] = factory();\n})(window, function() {\nreturn "," \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t};\n\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"UV\": 0\n \t};\n\n\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"\" + ({\"vendors~uv-default-extension~uv-mediaelement-extension~uv-model-viewer-extension~uv-openseadragon-ex~df006b11\":\"vendors~uv-default-extension~uv-mediaelement-extension~uv-model-viewer-extension~uv-openseadragon-ex~df006b11\",\"uv-default-extension~uv-mediaelement-extension~uv-model-viewer-extension~uv-openseadragon-extension~~ce4435a6\":\"uv-default-extension~uv-mediaelement-extension~uv-model-viewer-extension~uv-openseadragon-extension~~ce4435a6\",\"uv-default-extension\":\"uv-default-extension\",\"uv-pdf-extension\":\"uv-pdf-extension\",\"vendors~pdfjs~uv-mediaelement-extension~uv-model-viewer-extension\":\"vendors~pdfjs~uv-mediaelement-extension~uv-model-viewer-extension\",\"vendors~uv-mediaelement-extension\":\"vendors~uv-mediaelement-extension\",\"uv-mediaelement-extension\":\"uv-mediaelement-extension\",\"vendors~uv-model-viewer-extension~uv-openseadragon-extension\":\"vendors~uv-model-viewer-extension~uv-openseadragon-extension\",\"vendors~uv-model-viewer-extension\":\"vendors~uv-model-viewer-extension\",\"uv-model-viewer-extension~uv-openseadragon-extension\":\"uv-model-viewer-extension~uv-openseadragon-extension\",\"uv-model-viewer-extension\":\"uv-model-viewer-extension\",\"vendors~uv-openseadragon-extension\":\"vendors~uv-openseadragon-extension\",\"uv-openseadragon-extension\":\"uv-openseadragon-extension\",\"vendors~pdfjs\":\"vendors~pdfjs\",\"pdfjs\":\"pdfjs\",\"vendors~pdfobject\":\"vendors~pdfobject\"}[chunkId]||chunkId) + \".\" + {\"0\":\"d16a514f430ee6013732\",\"vendors~uv-default-extension~uv-mediaelement-extension~uv-model-viewer-extension~uv-openseadragon-ex~df006b11\":\"b4385109cfc296c2126c\",\"uv-default-extension~uv-mediaelement-extension~uv-model-viewer-extension~uv-openseadragon-extension~~ce4435a6\":\"e81ec8a44b0b007ad3d4\",\"uv-default-extension\":\"3d8dee4cd159db1cbbda\",\"uv-pdf-extension\":\"06cb17936559436b4e88\",\"vendors~pdfjs~uv-mediaelement-extension~uv-model-viewer-extension\":\"84b23ca1fd15e6b25f57\",\"vendors~uv-mediaelement-extension\":\"643f39324a88ea513854\",\"uv-mediaelement-extension\":\"450a8a8e7388c3e52117\",\"vendors~uv-model-viewer-extension~uv-openseadragon-extension\":\"fc5f02e84272dbbf2d8b\",\"vendors~uv-model-viewer-extension\":\"65353b3294894af2a966\",\"uv-model-viewer-extension~uv-openseadragon-extension\":\"00d4883ab14104a2c053\",\"uv-model-viewer-extension\":\"4267a6331489a928e0de\",\"vendors~uv-openseadragon-extension\":\"cbeb561d8f5245fc0a9f\",\"uv-openseadragon-extension\":\"17fd00a1039dcf08ad3b\",\"vendors~pdfjs\":\"530f2ed2588671488063\",\"pdfjs\":\"e469a7826caf75c9c3f0\",\"vendors~pdfobject\":\"c3e3ff0404e5e581ad63\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"uv-dist-umd/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonpUV\"] = window[\"webpackJsonpUV\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","!function(E,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(\"httpstatuscodes\",[],e):\"object\"==typeof exports?exports.httpstatuscodes=e():E.httpstatuscodes=e()}(window,(function(){return function(E){var e={};function T(t){if(e[t])return e[t].exports;var O=e[t]={i:t,l:!1,exports:{}};return E[t].call(O.exports,O,O.exports,T),O.l=!0,O.exports}return T.m=E,T.c=e,T.d=function(E,e,t){T.o(E,e)||Object.defineProperty(E,e,{enumerable:!0,get:t})},T.r=function(E){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(E,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(E,\"__esModule\",{value:!0})},T.t=function(E,e){if(1&e&&(E=T(E)),8&e)return E;if(4&e&&\"object\"==typeof E&&E&&E.__esModule)return E;var t=Object.create(null);if(T.r(t),Object.defineProperty(t,\"default\",{enumerable:!0,value:E}),2&e&&\"string\"!=typeof E)for(var O in E)T.d(t,O,function(e){return E[e]}.bind(null,O));return t},T.n=function(E){var e=E&&E.__esModule?function(){return E.default}:function(){return E};return T.d(e,\"a\",e),e},T.o=function(E,e){return Object.prototype.hasOwnProperty.call(E,e)},T.p=\"\",T(T.s=0)}([function(E,e,T){E.exports=T(1)},function(E,e,T){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.CONTINUE=100,e.SWITCHING_PROTOCOLS=101,e.PROCESSING=102,e.OK=200,e.CREATED=201,e.ACCEPTED=202,e.NON_AUTHORITATIVE_INFORMATION=203,e.NO_CONTENT=204,e.RESET_CONTENT=205,e.PARTIAL_CONTENT=206,e.MULTI_STATUS=207,e.MULTIPLE_CHOICES=300,e.MOVED_PERMANENTLY=301,e.MOVED_TEMPORARILY=302,e.SEE_OTHER=303,e.NOT_MODIFIED=304,e.USE_PROXY=305,e.TEMPORARY_REDIRECT=307,e.BAD_REQUEST=400,e.UNAUTHORIZED=401,e.PAYMENT_REQUIRED=402,e.FORBIDDEN=403,e.NOT_FOUND=404,e.METHOD_NOT_ALLOWED=405,e.NOT_ACCEPTABLE=406,e.PROXY_AUTHENTICATION_REQUIRED=407,e.REQUEST_TIME_OUT=408,e.CONFLICT=409,e.GONE=410,e.LENGTH_REQUIRED=411,e.PRECONDITION_FAILED=412,e.REQUEST_ENTITY_TOO_LARGE=413,e.REQUEST_URI_TOO_LARGE=414,e.UNSUPPORTED_MEDIA_TYPE=415,e.REQUESTED_RANGE_NOT_SATISFIABLE=416,e.EXPECTATION_FAILED=417,e.IM_A_TEAPOT=418,e.UNPROCESSABLE_ENTITY=422,e.LOCKED=423,e.FAILED_DEPENDENCY=424,e.UNORDERED_COLLECTION=425,e.UPGRADE_REQUIRED=426,e.PRECONDITION_REQUIRED=428,e.TOO_MANY_REQUESTS=429,e.REQUEST_HEADER_FIELDS_TOO_LARGE=431,e.INTERNAL_SERVER_ERROR=500,e.NOT_IMPLEMENTED=501,e.BAD_GATEWAY=502,e.SERVICE_UNAVAILABLE=503,e.GATEWAY_TIME_OUT=504,e.HTTP_VERSION_NOT_SUPPORTED=505,e.VARIANT_ALSO_NEGOTIATES=506,e.INSUFFICIENT_STORAGE=507,e.BANDWIDTH_LIMIT_EXCEEDED=509,e.NOT_EXTENDED=510,e.NETWORK_AUTHENTICATION_REQUIRED=511}])}));\n//# sourceMappingURL=httpstatuscodes.js.map","(function ($) {\r\n    $.fn.checkboxButton = function (onClick) {\r\n        return this.each(function () {\r\n            var $this = $(this);\r\n            $this.on('click', function (e) {\r\n                var tagName = e.target.tagName;\r\n                var $checkbox = $(this).find(':checkbox');\r\n                if (tagName !== \"INPUT\") {\r\n                    e.preventDefault();\r\n                    $checkbox.prop('checked', !$checkbox.prop('checked'));\r\n                }\r\n                var checked = $checkbox.is(':checked');\r\n                onClick.call(this, checked);\r\n            });\r\n        });\r\n    };\r\n    $.fn.disable = function () {\r\n        return this.each(function () {\r\n            var $this = $(this);\r\n            $this.addClass('disabled');\r\n            $this.data('tabindex', $this.attr('tabindex'));\r\n            $this.removeAttr('tabindex');\r\n        });\r\n    };\r\n    $.fn.ellipsis = function (chars) {\r\n        return this.each(function () {\r\n            var $self = $(this);\r\n            var text = $self.text();\r\n            if (text.length > chars) {\r\n                var trimmedText = text.substr(0, chars);\r\n                trimmedText = trimmedText.substr(0, Math.min(trimmedText.length, trimmedText.lastIndexOf(\" \")));\r\n                $self.empty().html(trimmedText + \"&hellip;\");\r\n            }\r\n        });\r\n    };\r\n    $.fn.ellipsisFill = function (text) {\r\n        var textPassed = true;\r\n        if (!text)\r\n            textPassed = false;\r\n        return this.each(function () {\r\n            var $self = $(this);\r\n            if (!textPassed)\r\n                text = $self.text();\r\n            $self.empty();\r\n            var $spanElem = $('<span title=\"' + text + '\"></span>');\r\n            $self.append($spanElem);\r\n            $self.css('overflow', 'hidden');\r\n            $spanElem.css('white-space', 'nowrap');\r\n            $spanElem.html(text);\r\n            // get the width of the span.\r\n            // if it's wider than the container, remove a word until it's not.\r\n            if ($spanElem.width() > $self.width()) {\r\n                var lastText = null;\r\n                while ($spanElem.width() > $self.width()) {\r\n                    var t = $spanElem.html();\r\n                    t = t.substring(0, t.lastIndexOf(' ')) + '&hellip;';\r\n                    if (t === lastText)\r\n                        break;\r\n                    $spanElem.html(t);\r\n                    lastText = t;\r\n                }\r\n            }\r\n        });\r\n    };\r\n    // Truncates to a certain number of letters, while ignoring and preserving HTML\r\n    $.fn.ellipsisHtmlFixed = function (chars, cb) {\r\n        return this.each(function () {\r\n            var $self = $(this);\r\n            var expandedText = $self.html();\r\n            var $trunc = $('<span></span>');\r\n            $trunc.html($self.html().replace(/\\s[\\s]*/g, ' ').trim());\r\n            if ($trunc.text().trim().length <= chars) {\r\n                return; // do nothing if we're under the limit!\r\n            }\r\n            while ($trunc.text().trim().length > chars) {\r\n                $trunc.removeLastWord(chars);\r\n            }\r\n            var collapsedText = $trunc.html();\r\n            // Toggle function\r\n            var expanded = false;\r\n            $self.toggle = function () {\r\n                $self.empty();\r\n                var $toggleButton = $('<a href=\"#\" class=\"toggle\"></a>');\r\n                if (expanded) {\r\n                    $self.html(expandedText + \" \");\r\n                    $toggleButton.text(\"less\");\r\n                    $toggleButton.switchClass(\"less\", \"more\");\r\n                }\r\n                else {\r\n                    $self.html(collapsedText + \"&hellip; \");\r\n                    $toggleButton.text(\"more\");\r\n                    $toggleButton.switchClass(\"more\", \"less\");\r\n                }\r\n                $toggleButton.one('click', function (e) {\r\n                    e.preventDefault();\r\n                    $self.toggle();\r\n                });\r\n                expanded = !expanded;\r\n                $self.append($toggleButton);\r\n                if (cb)\r\n                    cb();\r\n            };\r\n            $self.toggle();\r\n        });\r\n    };\r\n    $.fn.enable = function () {\r\n        return this.each(function () {\r\n            var $self = $(this);\r\n            $self.removeClass('disabled');\r\n            $self.attr('tabindex', $self.data('tabindex'));\r\n        });\r\n    };\r\n    $.fn.equaliseHeight = function (reset, average) {\r\n        var maxHeight = -1;\r\n        var minHeight = Number.MAX_VALUE;\r\n        var heights = [];\r\n        // reset all heights to auto first so they can be re-measured.\r\n        if (reset) {\r\n            this.each(function () {\r\n                $(this).height('auto');\r\n            });\r\n        }\r\n        this.each(function () {\r\n            var currentHeight = $(this).height();\r\n            heights.push(currentHeight);\r\n            maxHeight = maxHeight > currentHeight ? maxHeight : currentHeight;\r\n            minHeight = minHeight < currentHeight ? minHeight : currentHeight;\r\n        });\r\n        var finalHeight = maxHeight;\r\n        if (average) {\r\n            heights.sort(function (a, b) { return a - b; });\r\n            var half = Math.floor(heights.length / 2);\r\n            if (heights.length % 2) {\r\n                finalHeight = heights[half];\r\n            }\r\n            else {\r\n                finalHeight = (heights[half - 1] + heights[half]) / 2.0;\r\n            }\r\n        }\r\n        this.each(function () {\r\n            $(this).height(finalHeight);\r\n        });\r\n        return this;\r\n    };\r\n    $.fn.getVisibleElementWithGreatestTabIndex = function () {\r\n        var $self = $(this);\r\n        var maxTabIndex = 0;\r\n        var $elementWithGreatestTabIndex = null;\r\n        $self.find('*:visible[tabindex]').each(function (index, el) {\r\n            var $el = $(el);\r\n            var tabIndex = parseInt($el.attr('tabindex'));\r\n            if (tabIndex > maxTabIndex) {\r\n                maxTabIndex = tabIndex;\r\n                $elementWithGreatestTabIndex = $el;\r\n            }\r\n        });\r\n        return $elementWithGreatestTabIndex;\r\n    };\r\n    $.fn.horizontalMargins = function () {\r\n        var $self = $(this);\r\n        return parseInt($self.css('marginLeft')) + parseInt($self.css('marginRight'));\r\n    };\r\n    $.fn.leftMargin = function () {\r\n        var $self = $(this);\r\n        return parseInt($self.css('marginLeft'));\r\n    };\r\n    $.fn.rightMargin = function () {\r\n        var $self = $(this);\r\n        return parseInt($self.css('marginRight'));\r\n    };\r\n    $.fn.horizontalPadding = function () {\r\n        var $self = $(this);\r\n        return parseInt($self.css('paddingLeft')) + parseInt($self.css('paddingRight'));\r\n    };\r\n    $.fn.leftPadding = function () {\r\n        var $self = $(this);\r\n        return parseInt($self.css('paddingLeft'));\r\n    };\r\n    $.fn.rightPadding = function () {\r\n        var $self = $(this);\r\n        return parseInt($self.css('paddingRight'));\r\n    };\r\n    $.mlp = { x: 0, y: 0 }; // Mouse Last Position\r\n    function documentHandler() {\r\n        var $current = this === document ? $(this) : $(this).contents();\r\n        $current.mousemove(function (e) { jQuery.mlp = { x: e.pageX, y: e.pageY }; });\r\n        $current.find('iframe').on('load', documentHandler);\r\n    }\r\n    $(documentHandler);\r\n    $.fn.ismouseover = function () {\r\n        var result = false;\r\n        this.eq(0).each(function () {\r\n            var $current = $(this).is(\"iframe\") ? $(this).contents().find(\"body\") : $(this);\r\n            var offset = $current.offset();\r\n            result = offset.left <= $.mlp.x && offset.left + $current.outerWidth() > $.mlp.x &&\r\n                offset.top <= $.mlp.y && offset.top + $current.outerHeight() > $.mlp.y;\r\n        });\r\n        return result;\r\n    };\r\n    var on = $.fn.on;\r\n    var timer;\r\n    $.fn.on = function () {\r\n        var args = Array.apply(null, arguments);\r\n        var last = args[args.length - 1];\r\n        if (isNaN(last) || (last === 1 && args.pop()))\r\n            return on.apply(this, args);\r\n        var delay = args.pop();\r\n        var fn = args.pop();\r\n        args.push(function () {\r\n            var self = this;\r\n            var params = arguments;\r\n            clearTimeout(timer);\r\n            timer = setTimeout(function () {\r\n                fn.apply(self, params);\r\n            }, delay);\r\n        });\r\n        return on.apply(this, args);\r\n    };\r\n    $.fn.onEnter = function (cb) {\r\n        return this.each(function () {\r\n            var $this = $(this);\r\n            $this.on('keyup', function (e) {\r\n                if (e.keyCode === 13) {\r\n                    e.preventDefault();\r\n                    cb();\r\n                }\r\n            });\r\n        });\r\n    };\r\n    $.fn.onPressed = function (cb) {\r\n        return this.each(function () {\r\n            var $this = $(this);\r\n            $this.on('touchstart click', function (e) {\r\n                e.preventDefault();\r\n                cb(e);\r\n            });\r\n            $this.on('keyup', function (e) {\r\n                if (e.keyCode === 13) {\r\n                    e.preventDefault();\r\n                    cb(e);\r\n                }\r\n            });\r\n        });\r\n    };\r\n    // Recursively removes the last empty element (img, audio, etc) or word in an element\r\n    $.fn.removeLastWord = function (chars, depth) {\r\n        if (chars === void 0) { chars = 8; }\r\n        if (depth === void 0) { depth = 0; }\r\n        return this.each(function () {\r\n            var $self = $(this);\r\n            if ($self.contents().length > 0) {\r\n                var $lastElement = $self.contents().last();\r\n                if ($lastElement[0].nodeType === 3) {\r\n                    var words = $lastElement.text().trim().split(' ');\r\n                    if (words.length > 1) {\r\n                        words.splice(words.length - 1, 1);\r\n                        $lastElement[0].data = words.join(' '); // textnode.data\r\n                        return;\r\n                    }\r\n                    else if ('undefined' !== typeof chars && words.length === 1 && words[0].length > chars) {\r\n                        $lastElement[0].data = words.join(' ').substring(0, chars);\r\n                        return;\r\n                    }\r\n                }\r\n                $lastElement.removeLastWord(chars, depth + 1); // Element\r\n            }\r\n            else if (depth > 0) {\r\n                // Empty element\r\n                $self.remove();\r\n            }\r\n        });\r\n    };\r\n    $.fn.switchClass = function (class1, class2) {\r\n        return this.each(function () {\r\n            $(this).removeClass(class1).addClass(class2);\r\n        });\r\n    };\r\n    $.fn.targetBlank = function () {\r\n        return this.each(function () {\r\n            $(this).find('a').prop('target', '_blank');\r\n        });\r\n    };\r\n    $.fn.toggleExpandText = function (chars, lessText, moreText, cb) {\r\n        return this.each(function () {\r\n            var $self = $(this);\r\n            var expandedText = $self.html();\r\n            if (chars > expandedText.length)\r\n                return;\r\n            var expanded = false;\r\n            var collapsedText = expandedText.substr(0, chars);\r\n            collapsedText = collapsedText.substr(0, Math.min(collapsedText.length, collapsedText.lastIndexOf(\" \")));\r\n            $self.toggle = function () {\r\n                $self.empty();\r\n                var $toggleButton = $('<a href=\"#\" class=\"toggle\"></a>');\r\n                if (expanded) {\r\n                    $self.html(expandedText + \"&nbsp;\");\r\n                    $toggleButton.text(lessText);\r\n                    $toggleButton.switchClass(\"less\", \"more\");\r\n                }\r\n                else {\r\n                    $self.html(collapsedText + \"&nbsp;\");\r\n                    $toggleButton.text(moreText);\r\n                    $toggleButton.switchClass(\"more\", \"less\");\r\n                }\r\n                $toggleButton.one('click', function (e) {\r\n                    e.preventDefault();\r\n                    $self.toggle();\r\n                });\r\n                expanded = !expanded;\r\n                $self.append($toggleButton);\r\n                if (cb)\r\n                    cb();\r\n            };\r\n            $self.toggle();\r\n        });\r\n    };\r\n    // Toggle expansion by number of lines\r\n    $.fn.toggleExpandTextByLines = function (lines, lessText, moreText, cb) {\r\n        return this.each(function () {\r\n            var $self = $(this);\r\n            var expandedText = $self.html();\r\n            // add 'pad' to account for the right margin in the sidebar\r\n            var $buttonPad = $('<span>&hellip; <a href=\"#\" class=\"toggle more\">morepad</a></span>');\r\n            // when height changes, store string, then pick from line counts\r\n            var stringsByLine = [expandedText];\r\n            var lastHeight = $self.height();\r\n            // Until empty\r\n            while ($self.text().length > 0) {\r\n                $self.removeLastWord();\r\n                var html = $self.html();\r\n                $self.append($buttonPad);\r\n                if (lastHeight > $self.height()) {\r\n                    stringsByLine.unshift(html);\r\n                    lastHeight = $self.height();\r\n                }\r\n                $buttonPad.remove();\r\n            }\r\n            if (stringsByLine.length <= lines) {\r\n                $self.html(expandedText);\r\n                return;\r\n            }\r\n            var collapsedText = stringsByLine[lines - 1];\r\n            // Toggle function\r\n            var expanded = false;\r\n            $self.toggle = function () {\r\n                $self.empty();\r\n                var $toggleButton = $('<a href=\"#\" class=\"toggle\"></a>');\r\n                if (expanded) {\r\n                    $self.html(expandedText + \" \");\r\n                    $toggleButton.text(lessText);\r\n                    $toggleButton.switchClass(\"less\", \"more\");\r\n                }\r\n                else {\r\n                    $self.html(collapsedText + \"&hellip; \");\r\n                    $toggleButton.text(moreText);\r\n                    $toggleButton.switchClass(\"more\", \"less\");\r\n                }\r\n                $toggleButton.one('click', function (e) {\r\n                    e.preventDefault();\r\n                    $self.toggle();\r\n                });\r\n                expanded = !expanded;\r\n                $self.append($toggleButton);\r\n                if (cb)\r\n                    cb();\r\n            };\r\n            $self.toggle();\r\n        });\r\n    };\r\n    $.fn.toggleText = function (text1, text2) {\r\n        return this.each(function () {\r\n            var $self = $(this);\r\n            if ($self.text() === text1) {\r\n                $(this).text(text2);\r\n            }\r\n            else {\r\n                $(this).text(text1);\r\n            }\r\n        });\r\n    };\r\n    $.fn.updateAttr = function (attrName, oldVal, newVal) {\r\n        return this.each(function () {\r\n            var $self = $(this);\r\n            var attr = $self.attr(attrName);\r\n            if (attr && attr.indexOf(oldVal) === 0) {\r\n                attr = attr.replace(oldVal, newVal);\r\n                $self.attr(attrName, attr);\r\n            }\r\n        });\r\n    };\r\n    $.fn.verticalMargins = function () {\r\n        var $self = $(this);\r\n        return parseInt($self.css('marginTop')) + parseInt($self.css('marginBottom'));\r\n    };\r\n    $.fn.verticalPadding = function () {\r\n        var $self = $(this);\r\n        return parseInt($self.css('paddingTop')) + parseInt($self.css('paddingBottom'));\r\n    };\r\n})(jQuery);\r\n","var Async = /** @class */ (function () {\r\n    function Async() {\r\n    }\r\n    Async.waitFor = function (test, successCallback, failureCallback, interval, maxTries, numTries) {\r\n        if (!interval)\r\n            interval = 200;\r\n        if (!maxTries)\r\n            maxTries = 100; // try 100 times over 20 seconds\r\n        if (!numTries)\r\n            numTries = 0;\r\n        numTries += 1;\r\n        if (numTries > maxTries) {\r\n            if (failureCallback)\r\n                failureCallback();\r\n        }\r\n        else if (test()) {\r\n            successCallback();\r\n        }\r\n        else {\r\n            setTimeout(function () {\r\n                Async.waitFor(test, successCallback, failureCallback, interval, maxTries, numTries);\r\n            }, interval);\r\n        }\r\n    };\r\n    return Async;\r\n}());\r\nexport { Async };\r\nvar Bools = /** @class */ (function () {\r\n    function Bools() {\r\n    }\r\n    Bools.getBool = function (val, defaultVal) {\r\n        if (val === null || typeof (val) === 'undefined') {\r\n            return defaultVal;\r\n        }\r\n        return val;\r\n    };\r\n    return Bools;\r\n}());\r\nexport { Bools };\r\nvar Clipboard = /** @class */ (function () {\r\n    function Clipboard() {\r\n    }\r\n    Clipboard.supportsCopy = function () {\r\n        return document.queryCommandSupported && document.queryCommandSupported('copy');\r\n    };\r\n    Clipboard.copy = function (text) {\r\n        text = Clipboard.convertBrToNewLine(text);\r\n        var textArea = document.createElement(\"textarea\");\r\n        textArea.value = text;\r\n        Clipboard.hideButKeepEnabled(textArea);\r\n        document.body.appendChild(textArea);\r\n        textArea.focus();\r\n        textArea.select();\r\n        document.execCommand('copy');\r\n        document.body.removeChild(textArea);\r\n    };\r\n    Clipboard.hideButKeepEnabled = function (textArea) {\r\n        // Place in top-left corner of screen regardless of scroll position.\r\n        textArea.style.position = 'fixed';\r\n        textArea.style.top = '0';\r\n        textArea.style.left = '0';\r\n        // Ensure it has a small width and height. Setting to 1px / 1em\r\n        // doesn't work as this gives a negative w/h on some browsers.\r\n        textArea.style.width = '2em';\r\n        textArea.style.height = '2em';\r\n        // We don't need padding, reducing the size if it does flash render.\r\n        textArea.style.padding = '0';\r\n        // Clean up any borders.\r\n        textArea.style.border = 'none';\r\n        textArea.style.outline = 'none';\r\n        textArea.style.boxShadow = 'none';\r\n        // Avoid flash of white box if rendered for any reason.\r\n        textArea.style.background = 'transparent';\r\n    };\r\n    Clipboard.convertBrToNewLine = function (text) {\r\n        var brRegex = /<br\\s*[\\/]?>/gi;\r\n        text = text.replace(brRegex, \"\\n\");\r\n        return text;\r\n    };\r\n    return Clipboard;\r\n}());\r\nexport { Clipboard };\r\nvar Colors = /** @class */ (function () {\r\n    function Colors() {\r\n    }\r\n    Colors.float32ColorToARGB = function (float32Color) {\r\n        var a = (float32Color & 0xff000000) >>> 24;\r\n        var r = (float32Color & 0xff0000) >>> 16;\r\n        var g = (float32Color & 0xff00) >>> 8;\r\n        var b = float32Color & 0xff;\r\n        var result = [a, r, g, b];\r\n        return result;\r\n    };\r\n    Colors._componentToHex = function (c) {\r\n        var hex = c.toString(16);\r\n        return hex.length == 1 ? \"0\" + hex : hex;\r\n    };\r\n    Colors.rgbToHexString = function (rgb) {\r\n        Colors.coalesce(rgb);\r\n        return \"#\" + Colors._componentToHex(rgb[0]) + Colors._componentToHex(rgb[1]) + Colors._componentToHex(rgb[2]);\r\n    };\r\n    Colors.argbToHexString = function (argb) {\r\n        return \"#\" + Colors._componentToHex(argb[0]) + Colors._componentToHex(argb[1]) + Colors._componentToHex(argb[2]) + Colors._componentToHex(argb[3]);\r\n    };\r\n    Colors.coalesce = function (arr) {\r\n        for (var i = 1; i < arr.length; i++) {\r\n            if (typeof (arr[i]) === 'undefined')\r\n                arr[i] = arr[i - 1];\r\n        }\r\n    };\r\n    return Colors;\r\n}());\r\nexport { Colors };\r\nvar Dates = /** @class */ (function () {\r\n    function Dates() {\r\n    }\r\n    Dates.getTimeStamp = function () {\r\n        return new Date().getTime();\r\n    };\r\n    return Dates;\r\n}());\r\nexport { Dates };\r\nvar Device = /** @class */ (function () {\r\n    function Device() {\r\n    }\r\n    Device.getPixelRatio = function (ctx) {\r\n        var dpr = window.devicePixelRatio || 1;\r\n        var bsr = ctx.webkitBackingStorePixelRatio ||\r\n            ctx.mozBackingStorePixelRatio ||\r\n            ctx.msBackingStorePixelRatio ||\r\n            ctx.oBackingStorePixelRatio ||\r\n            ctx.backingStorePixelRatio || 1;\r\n        return dpr / bsr;\r\n    };\r\n    Device.isTouch = function () {\r\n        return !!(\"ontouchstart\" in window) || window.navigator.msMaxTouchPoints > 0;\r\n    };\r\n    return Device;\r\n}());\r\nexport { Device };\r\nvar Documents = /** @class */ (function () {\r\n    function Documents() {\r\n    }\r\n    Documents.isInIFrame = function () {\r\n        // see http://stackoverflow.com/questions/326069/how-to-identify-if-a-webpage-is-being-loaded-inside-an-iframe-or-directly-into-t\r\n        try {\r\n            return window.self !== window.top;\r\n        }\r\n        catch (e) {\r\n            return true;\r\n        }\r\n    };\r\n    Documents.supportsFullscreen = function () {\r\n        var doc = document.documentElement;\r\n        var support = doc.requestFullscreen || doc.mozRequestFullScreen ||\r\n            doc.webkitRequestFullScreen || doc.msRequestFullscreen;\r\n        return support !== undefined;\r\n    };\r\n    Documents.isHidden = function () {\r\n        var prop = Documents.getHiddenProp();\r\n        if (!prop)\r\n            return false;\r\n        return true;\r\n        //return document[prop];\r\n    };\r\n    Documents.getHiddenProp = function () {\r\n        var prefixes = ['webkit', 'moz', 'ms', 'o'];\r\n        // if 'hidden' is natively supported just return it\r\n        if ('hidden' in document)\r\n            return 'hidden';\r\n        // otherwise loop over all the known prefixes until we find one\r\n        for (var i = 0; i < prefixes.length; i++) {\r\n            if ((prefixes[i] + 'Hidden') in document) {\r\n                return prefixes[i] + 'Hidden';\r\n            }\r\n        }\r\n        // otherwise it's not supported\r\n        return null;\r\n    };\r\n    return Documents;\r\n}());\r\nexport { Documents };\r\nvar Events = /** @class */ (function () {\r\n    function Events() {\r\n    }\r\n    Events.debounce = function (fn, debounceDuration) {\r\n        // summary:\r\n        //      Returns a debounced function that will make sure the given\r\n        //      function is not triggered too much.\r\n        // fn: Function\r\n        //      Function to debounce.\r\n        // debounceDuration: Number\r\n        //      OPTIONAL. The amount of time in milliseconds for which we\r\n        //      will debounce the function. (defaults to 100ms)\r\n        debounceDuration = debounceDuration || 100;\r\n        return function () {\r\n            if (!fn.debouncing) {\r\n                var args = Array.prototype.slice.apply(arguments);\r\n                fn.lastReturnVal = fn.apply(window, args);\r\n                fn.debouncing = true;\r\n            }\r\n            clearTimeout(fn.debounceTimeout);\r\n            fn.debounceTimeout = setTimeout(function () {\r\n                fn.debouncing = false;\r\n            }, debounceDuration);\r\n            return fn.lastReturnVal;\r\n        };\r\n    };\r\n    return Events;\r\n}());\r\nexport { Events };\r\nvar Files = /** @class */ (function () {\r\n    function Files() {\r\n    }\r\n    Files.simplifyMimeType = function (mime) {\r\n        switch (mime) {\r\n            case 'text/plain':\r\n                return 'txt';\r\n            case 'image/jpeg':\r\n                return 'jpg';\r\n            case 'application/msword':\r\n                return 'doc';\r\n            case 'application/vnd.openxmlformats-officedocument.wordprocessingml.document':\r\n                return 'docx';\r\n            default:\r\n                var parts = mime.split('/');\r\n                return parts[parts.length - 1];\r\n        }\r\n    };\r\n    return Files;\r\n}());\r\nexport { Files };\r\nvar Keyboard = /** @class */ (function () {\r\n    function Keyboard() {\r\n    }\r\n    Keyboard.getCharCode = function (e) {\r\n        var charCode = (typeof e.which == \"number\") ? e.which : e.keyCode;\r\n        return charCode;\r\n    };\r\n    return Keyboard;\r\n}());\r\nexport { Keyboard };\r\nvar Maths = /** @class */ (function () {\r\n    function Maths() {\r\n    }\r\n    Maths.normalise = function (num, min, max) {\r\n        return (num - min) / (max - min);\r\n    };\r\n    Maths.median = function (values) {\r\n        values.sort(function (a, b) {\r\n            return a - b;\r\n        });\r\n        var half = Math.floor(values.length / 2);\r\n        if (values.length % 2) {\r\n            return values[half];\r\n        }\r\n        else {\r\n            return (values[half - 1] + values[half]) / 2.0;\r\n        }\r\n    };\r\n    Maths.clamp = function (value, min, max) {\r\n        return Math.min(Math.max(value, min), max);\r\n    };\r\n    return Maths;\r\n}());\r\nexport { Maths };\r\nvar Size = /** @class */ (function () {\r\n    function Size(width, height) {\r\n        this.width = width;\r\n        this.height = height;\r\n    }\r\n    return Size;\r\n}());\r\nexport { Size };\r\nvar Dimensions = /** @class */ (function () {\r\n    function Dimensions() {\r\n    }\r\n    Dimensions.fitRect = function (width1, height1, width2, height2) {\r\n        var ratio1 = height1 / width1;\r\n        var ratio2 = height2 / width2;\r\n        var width = 0;\r\n        var height = 0;\r\n        var scale;\r\n        if (ratio1 < ratio2) {\r\n            scale = width2 / width1;\r\n            width = width1 * scale;\r\n            height = height1 * scale;\r\n        }\r\n        else {\r\n            scale = height2 / height1;\r\n            width = width1 * scale;\r\n            height = height1 * scale;\r\n        }\r\n        return new Size(Math.floor(width), Math.floor(height));\r\n    };\r\n    Dimensions.hitRect = function (x, y, w, h, mx, my) {\r\n        if (mx > x && mx < (x + w) && my > y && my < (y + h)) {\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    return Dimensions;\r\n}());\r\nexport { Dimensions };\r\nvar Numbers = /** @class */ (function () {\r\n    function Numbers() {\r\n    }\r\n    Numbers.numericalInput = function (event) {\r\n        // Allow: backspace, delete, tab and escape\r\n        if (event.keyCode == 46 || event.keyCode == 8 || event.keyCode == 9 || event.keyCode == 27 ||\r\n            // Allow: Ctrl+A\r\n            (event.keyCode == 65 && event.ctrlKey === true) ||\r\n            // Allow: home, end, left, right\r\n            (event.keyCode >= 35 && event.keyCode <= 39)) {\r\n            // let it happen, don't do anything\r\n            return true;\r\n        }\r\n        else {\r\n            // Ensure that it is a number and stop the keypress\r\n            if (event.shiftKey || (event.keyCode < 48 || event.keyCode > 57) && (event.keyCode < 96 || event.keyCode > 105)) {\r\n                event.preventDefault();\r\n                return false;\r\n            }\r\n            return true;\r\n        }\r\n    };\r\n    return Numbers;\r\n}());\r\nexport { Numbers };\r\nvar Objects = /** @class */ (function () {\r\n    function Objects() {\r\n    }\r\n    Objects.toPlainObject = function (value) {\r\n        value = Object(value);\r\n        var result = {};\r\n        for (var key in value) {\r\n            result[key] = value[key];\r\n        }\r\n        return result;\r\n    };\r\n    return Objects;\r\n}());\r\nexport { Objects };\r\nvar Storage = /** @class */ (function () {\r\n    function Storage() {\r\n    }\r\n    Storage.clear = function (storageType) {\r\n        if (storageType === void 0) { storageType = StorageType.MEMORY; }\r\n        switch (storageType) {\r\n            case StorageType.MEMORY:\r\n                this._memoryStorage = {};\r\n                break;\r\n            case StorageType.SESSION:\r\n                sessionStorage.clear();\r\n                break;\r\n            case StorageType.LOCAL:\r\n                localStorage.clear();\r\n                break;\r\n        }\r\n    };\r\n    Storage.clearExpired = function (storageType) {\r\n        if (storageType === void 0) { storageType = StorageType.MEMORY; }\r\n        var items = this.getItems(storageType);\r\n        for (var i = 0; i < items.length; i++) {\r\n            var item = items[i];\r\n            if (this._isExpired(item)) {\r\n                this.remove(item.key);\r\n            }\r\n        }\r\n    };\r\n    Storage.get = function (key, storageType) {\r\n        if (storageType === void 0) { storageType = StorageType.MEMORY; }\r\n        var data = null;\r\n        switch (storageType) {\r\n            case StorageType.MEMORY:\r\n                data = this._memoryStorage[key];\r\n                break;\r\n            case StorageType.SESSION:\r\n                data = sessionStorage.getItem(key);\r\n                break;\r\n            case StorageType.LOCAL:\r\n                data = localStorage.getItem(key);\r\n                break;\r\n        }\r\n        if (!data)\r\n            return null;\r\n        var item = null;\r\n        try {\r\n            item = JSON.parse(data);\r\n        }\r\n        catch (error) {\r\n            return null;\r\n        }\r\n        if (!item)\r\n            return null;\r\n        if (this._isExpired(item))\r\n            return null;\r\n        // useful reference\r\n        item.key = key;\r\n        return item;\r\n    };\r\n    Storage._isExpired = function (item) {\r\n        if (new Date().getTime() < item.expiresAt) {\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n    Storage.getItems = function (storageType) {\r\n        if (storageType === void 0) { storageType = StorageType.MEMORY; }\r\n        var items = [];\r\n        switch (storageType) {\r\n            case StorageType.MEMORY:\r\n                var keys = Object.keys(this._memoryStorage);\r\n                for (var i = 0; i < keys.length; i++) {\r\n                    var item = this.get(keys[i], StorageType.MEMORY);\r\n                    if (item) {\r\n                        items.push(item);\r\n                    }\r\n                }\r\n                break;\r\n            case StorageType.SESSION:\r\n                for (var i = 0; i < sessionStorage.length; i++) {\r\n                    var key = sessionStorage.key(i);\r\n                    if (key) {\r\n                        var item = this.get(key, StorageType.SESSION);\r\n                        if (item) {\r\n                            items.push(item);\r\n                        }\r\n                    }\r\n                }\r\n                break;\r\n            case StorageType.LOCAL:\r\n                for (var i = 0; i < localStorage.length; i++) {\r\n                    var key = localStorage.key(i);\r\n                    if (key) {\r\n                        var item = this.get(key, StorageType.LOCAL);\r\n                        if (item) {\r\n                            items.push(item);\r\n                        }\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n        return items;\r\n    };\r\n    Storage.remove = function (key, storageType) {\r\n        if (storageType === void 0) { storageType = StorageType.MEMORY; }\r\n        switch (storageType) {\r\n            case StorageType.MEMORY:\r\n                delete this._memoryStorage[key];\r\n                break;\r\n            case StorageType.SESSION:\r\n                sessionStorage.removeItem(key);\r\n                break;\r\n            case StorageType.LOCAL:\r\n                localStorage.removeItem(key);\r\n                break;\r\n        }\r\n    };\r\n    Storage.set = function (key, value, expirationSecs, storageType) {\r\n        if (storageType === void 0) { storageType = StorageType.MEMORY; }\r\n        var expirationMS = expirationSecs * 1000;\r\n        var record = new StorageItem();\r\n        record.value = value;\r\n        record.expiresAt = new Date().getTime() + expirationMS;\r\n        switch (storageType) {\r\n            case StorageType.MEMORY:\r\n                this._memoryStorage[key] = JSON.stringify(record);\r\n                break;\r\n            case StorageType.SESSION:\r\n                sessionStorage.setItem(key, JSON.stringify(record));\r\n                break;\r\n            case StorageType.LOCAL:\r\n                localStorage.setItem(key, JSON.stringify(record));\r\n                break;\r\n        }\r\n        return record;\r\n    };\r\n    Storage._memoryStorage = {};\r\n    return Storage;\r\n}());\r\nexport { Storage };\r\nvar StorageItem = /** @class */ (function () {\r\n    function StorageItem() {\r\n    }\r\n    return StorageItem;\r\n}());\r\nexport { StorageItem };\r\nexport var StorageType;\r\n(function (StorageType) {\r\n    StorageType[\"MEMORY\"] = \"memory\";\r\n    StorageType[\"SESSION\"] = \"session\";\r\n    StorageType[\"LOCAL\"] = \"local\";\r\n})(StorageType || (StorageType = {}));\r\nvar Strings = /** @class */ (function () {\r\n    function Strings() {\r\n    }\r\n    Strings.ellipsis = function (text, chars) {\r\n        if (text.length <= chars)\r\n            return text;\r\n        var trimmedText = text.substr(0, chars);\r\n        var lastSpaceIndex = trimmedText.lastIndexOf(\" \");\r\n        if (lastSpaceIndex != -1) {\r\n            trimmedText = trimmedText.substr(0, Math.min(trimmedText.length, lastSpaceIndex));\r\n        }\r\n        return trimmedText + \"&hellip;\";\r\n    };\r\n    Strings.htmlDecode = function (encoded) {\r\n        var div = document.createElement(\"div\");\r\n        div.innerHTML = encoded;\r\n        return div.firstChild.nodeValue;\r\n    };\r\n    Strings.format = function (str) {\r\n        var values = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            values[_i - 1] = arguments[_i];\r\n        }\r\n        for (var i = 0; i < values.length; i++) {\r\n            var reg = new RegExp(\"\\\\{\" + i + \"\\\\}\", \"gm\");\r\n            str = str.replace(reg, values[i]);\r\n        }\r\n        return str;\r\n    };\r\n    Strings.isAlphanumeric = function (str) {\r\n        return /^[a-zA-Z0-9]*$/.test(str);\r\n    };\r\n    Strings.toCssClass = function (str) {\r\n        return str.replace(/[^a-z0-9]/g, function (s) {\r\n            var c = s.charCodeAt(0);\r\n            if (c == 32)\r\n                return '-';\r\n            if (c >= 65 && c <= 90)\r\n                return '_' + s.toLowerCase();\r\n            return '__' + ('000' + c.toString(16)).slice(-4);\r\n        });\r\n    };\r\n    Strings.toFileName = function (str) {\r\n        return str.replace(/[^a-z0-9]/gi, '_').toLowerCase();\r\n    };\r\n    Strings.utf8_to_b64 = function (str) {\r\n        return window.btoa(unescape(encodeURIComponent(str)));\r\n    };\r\n    return Strings;\r\n}());\r\nexport { Strings };\r\nvar Urls = /** @class */ (function () {\r\n    function Urls() {\r\n    }\r\n    Urls.getHashParameter = function (key, doc) {\r\n        if (!doc)\r\n            doc = window.document;\r\n        if (doc && doc.location) {\r\n            return this.getHashParameterFromString(key, doc.location.hash);\r\n        }\r\n        return null;\r\n    };\r\n    Urls.getHashParameterFromString = function (key, url) {\r\n        var regex = new RegExp(\"#.*[?&]\" + key + \"=([^&]+)(&|$)\");\r\n        var match = regex.exec(url);\r\n        return (match ? decodeURIComponent(match[1].replace(/\\+/g, \" \")) : null);\r\n    };\r\n    Urls.setHashParameter = function (key, value, doc) {\r\n        if (!doc)\r\n            doc = window.document;\r\n        if (doc && doc.location) {\r\n            var kvp = this.updateURIKeyValuePair(doc.location.hash.replace('#?', ''), key, value);\r\n            var newHash = \"#?\" + kvp;\r\n            var url = doc.URL;\r\n            // remove hash value (if present).\r\n            var index = url.indexOf('#');\r\n            if (index != -1) {\r\n                url = url.substr(0, url.indexOf('#'));\r\n            }\r\n            doc.location.replace(url + newHash);\r\n        }\r\n    };\r\n    Urls.getQuerystringParameter = function (key, w) {\r\n        if (!w)\r\n            w = window;\r\n        return this.getQuerystringParameterFromString(key, w.location.search);\r\n    };\r\n    Urls.getQuerystringParameterFromString = function (key, querystring) {\r\n        key = key.replace(/[\\[]/, \"\\\\\\[\").replace(/[\\]]/, \"\\\\\\]\");\r\n        var regex = new RegExp(\"[\\\\?&]\" + key + \"=([^&#]*)\");\r\n        var match = regex.exec(querystring);\r\n        return (match ? decodeURIComponent(match[1].replace(/\\+/g, \" \")) : null);\r\n    };\r\n    Urls.setQuerystringParameter = function (key, value, doc) {\r\n        if (!doc)\r\n            doc = window.document;\r\n        if (doc && doc.location) {\r\n            var kvp = this.updateURIKeyValuePair(doc.location.hash.replace('#?', ''), key, value);\r\n            // redirects.\r\n            window.location.search = kvp;\r\n        }\r\n    };\r\n    Urls.updateURIKeyValuePair = function (uriSegment, key, value) {\r\n        key = encodeURIComponent(key);\r\n        value = encodeURIComponent(value);\r\n        var kvp = uriSegment.split('&');\r\n        // Array.split() returns an array with a single \"\" item\r\n        // if the target string is empty. remove if present.\r\n        if (kvp[0] == \"\")\r\n            kvp.shift();\r\n        var i = kvp.length;\r\n        var x;\r\n        // replace if already present.\r\n        while (i--) {\r\n            x = kvp[i].split('=');\r\n            if (x[0] == key) {\r\n                x[1] = value;\r\n                kvp[i] = x.join('=');\r\n                break;\r\n            }\r\n        }\r\n        // not found, so append.\r\n        if (i < 0) {\r\n            kvp[kvp.length] = [key, value].join('=');\r\n        }\r\n        return kvp.join('&');\r\n    };\r\n    Urls.getUrlParts = function (url) {\r\n        var a = document.createElement('a');\r\n        a.href = url;\r\n        return a;\r\n    };\r\n    Urls.convertToRelativeUrl = function (url) {\r\n        var parts = this.getUrlParts(url);\r\n        var relUri = parts.pathname + parts.searchWithin;\r\n        if (!relUri.startsWith(\"/\")) {\r\n            relUri = \"/\" + relUri;\r\n        }\r\n        return relUri;\r\n    };\r\n    return Urls;\r\n}());\r\nexport { Urls };\r\n//# sourceMappingURL=index.js.map","var BaseComponent = /** @class */ (function () {\r\n    function BaseComponent(options) {\r\n        this.options = options;\r\n        this.options.data = Object.assign({}, this.data(), options.data);\r\n    }\r\n    BaseComponent.prototype._init = function () {\r\n        this.el = this.options.target;\r\n        if (!this.el) {\r\n            console.warn('element not found');\r\n            return false;\r\n        }\r\n        this.el.innerHTML = '';\r\n        return true;\r\n    };\r\n    BaseComponent.prototype.data = function () {\r\n        return {};\r\n    };\r\n    BaseComponent.prototype.on = function (name, callback, ctx) {\r\n        var e = this._e || (this._e = {});\r\n        (e[name] || (e[name] = [])).push({\r\n            fn: callback,\r\n            ctx: ctx\r\n        });\r\n    };\r\n    BaseComponent.prototype.fire = function (name) {\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        var data = [].slice.call(arguments, 1);\r\n        var evtArr = ((this._e || (this._e = {}))[name] || []).slice();\r\n        var i = 0;\r\n        var len = evtArr.length;\r\n        for (i; i < len; i++) {\r\n            evtArr[i].fn.apply(evtArr[i].ctx, data);\r\n        }\r\n    };\r\n    BaseComponent.prototype._resize = function () {\r\n    };\r\n    BaseComponent.prototype.set = function (_data) {\r\n    };\r\n    return BaseComponent;\r\n}());\r\nexport { BaseComponent };\r\n//# sourceMappingURL=index.js.map","import { AnnotationRect } from \"./AnnotationRect\";\r\nvar AnnotationGroup = /** @class */ (function () {\r\n    function AnnotationGroup(resource, canvasIndex) {\r\n        this.rects = [];\r\n        this.canvasIndex = canvasIndex;\r\n        this.addRect(resource);\r\n    }\r\n    AnnotationGroup.prototype.addRect = function (resource) {\r\n        var rect = new AnnotationRect(resource);\r\n        rect.canvasIndex = this.canvasIndex;\r\n        rect.index = this.rects.length;\r\n        this.rects.push(rect);\r\n        // sort ascending\r\n        this.rects.sort(function (a, b) {\r\n            return a.index - b.index;\r\n        });\r\n    };\r\n    return AnnotationGroup;\r\n}());\r\nexport { AnnotationGroup };\r\n//# sourceMappingURL=AnnotationGroup.js.map","var AnnotationRect = /** @class */ (function () {\r\n    function AnnotationRect(result) {\r\n        this.isVisible = true;\r\n        var xywh = result.on.match(/.*xywh=(\\d*),(\\d*),(\\d*),(\\d*)/);\r\n        this.x = Number(xywh[1]);\r\n        this.y = Number(xywh[2]);\r\n        this.width = Number(xywh[3]);\r\n        this.height = Number(xywh[4]);\r\n        this.chars = result.resource.chars;\r\n    }\r\n    return AnnotationRect;\r\n}());\r\nexport { AnnotationRect };\r\n//# sourceMappingURL=AnnotationRect.js.map","import { Helper } from \"./Helper\";\r\nimport { IIIFResourceType } from \"@iiif/vocabulary\";\r\nimport { Utils } from \"manifesto.js\";\r\nvar Bootstrapper = /** @class */ (function () {\r\n    function Bootstrapper(options) {\r\n        this._options = options;\r\n        this._options.locale = this._options.locale || 'en-GB'; // default locale\r\n    }\r\n    Bootstrapper.prototype.bootstrap = function (res, rej) {\r\n        var that = this;\r\n        return new Promise(function (resolve, reject) {\r\n            // if this is a recursive bootstrap we will have existing resolve & reject methods.\r\n            if (res && rej) {\r\n                resolve = res;\r\n                reject = rej;\r\n            }\r\n            Utils.loadManifest(that._options.manifestUri).then(function (json) {\r\n                that._loaded(that, json, resolve, reject);\r\n            });\r\n        });\r\n    };\r\n    Bootstrapper.prototype._loaded = function (bootstrapper, json, resolve, reject) {\r\n        var iiifResource = Utils.parseManifest(json, {\r\n            locale: bootstrapper._options.locale\r\n        });\r\n        if (iiifResource) {\r\n            // only set the root IIIFResource on the first load\r\n            if (!bootstrapper._options.iiifResource) {\r\n                bootstrapper._options.iiifResource = iiifResource;\r\n            }\r\n            var collectionIndex = bootstrapper._options.collectionIndex; // this is either undefined, 0, or a positive number (defaults to undefined)\r\n            var manifestIndex_1 = bootstrapper._options.manifestIndex; // this is either 0 or a positive number (defaults to 0)\r\n            if (iiifResource.getIIIFResourceType() === IIIFResourceType.COLLECTION) {\r\n                // it's a collection\r\n                var manifests = iiifResource.getManifests();\r\n                var collections = iiifResource.getCollections();\r\n                // if there are only collections available, set the collectionIndex to 0 if undefined.\r\n                if (!manifests.length && collectionIndex === undefined) {\r\n                    collectionIndex = 0;\r\n                }\r\n                if (collectionIndex !== undefined && collections && collections.length) {\r\n                    // a collectionIndex has been passed and we have sub collections\r\n                    iiifResource.getCollectionByIndex(collectionIndex).then(function (collection) {\r\n                        if (!collection) {\r\n                            reject('Collection index not found');\r\n                        }\r\n                        // Special case: we're trying to load the first manifest of the\r\n                        // specified collection, but the collection has no manifests but does have\r\n                        // subcollections. Thus, we should dive in until we find something\r\n                        // we can display!\r\n                        if (collection.getTotalManifests() === 0 && manifestIndex_1 === 0 && collection.getTotalCollections() > 0) {\r\n                            bootstrapper._options.collectionIndex = 0;\r\n                            bootstrapper._options.manifestUri = collection.id;\r\n                            bootstrapper.bootstrap(resolve, reject);\r\n                        }\r\n                        else if (manifestIndex_1 !== undefined) {\r\n                            collection.getManifestByIndex(manifestIndex_1).then(function (manifest) {\r\n                                bootstrapper._options.manifest = manifest;\r\n                                var helper = new Helper(bootstrapper._options);\r\n                                resolve(helper);\r\n                            });\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    iiifResource.getManifestByIndex(bootstrapper._options.manifestIndex).then(function (manifest) {\r\n                        bootstrapper._options.manifest = manifest;\r\n                        var helper = new Helper(bootstrapper._options);\r\n                        resolve(helper);\r\n                    });\r\n                }\r\n            }\r\n            else {\r\n                bootstrapper._options.manifest = iiifResource;\r\n                var helper = new Helper(bootstrapper._options);\r\n                resolve(helper);\r\n            }\r\n        }\r\n        else {\r\n            console.error('Unable to load IIIF resource');\r\n        }\r\n    };\r\n    return Bootstrapper;\r\n}());\r\nexport { Bootstrapper };\r\n//# sourceMappingURL=Bootstrapper.js.map","var Errors = /** @class */ (function () {\r\n    function Errors() {\r\n    }\r\n    Errors.manifestNotLoaded = \"Manifest has not loaded yet\";\r\n    return Errors;\r\n}());\r\nexport { Errors };\r\n//# sourceMappingURL=Errors.js.map","import { ServiceProfile } from \"@iiif/vocabulary\";\r\nimport * as HTTPStatusCode from \"@edsilv/http-status-codes\";\r\nimport { Utils } from \"manifesto.js\";\r\nvar ExternalResource = /** @class */ (function () {\r\n    function ExternalResource(canvas, options) {\r\n        this.authHoldingPage = null;\r\n        this.clickThroughService = null;\r\n        this.externalService = null;\r\n        this.isProbed = false;\r\n        this.isResponseHandled = false;\r\n        this.kioskService = null;\r\n        this.loginService = null;\r\n        this.logoutService = null;\r\n        this.probeService = null;\r\n        this.restrictedService = null;\r\n        this.tokenService = null;\r\n        canvas.externalResource = this;\r\n        this.dataUri = this._getDataUri(canvas);\r\n        this.index = canvas.index;\r\n        this.authAPIVersion = options.authApiVersion;\r\n        this._parseAuthServices(canvas);\r\n        // get the height and width of the image resource if available\r\n        this._parseCanvasDimensions(canvas);\r\n    }\r\n    ExternalResource.prototype._getImageServiceDescriptor = function (services) {\r\n        var infoUri = null;\r\n        for (var i = 0; i < services.length; i++) {\r\n            var service = services[i];\r\n            var id = service.id;\r\n            if (!id.endsWith('/')) {\r\n                id += '/';\r\n            }\r\n            if (Utils.isImageProfile(service.getProfile())) {\r\n                infoUri = id + 'info.json';\r\n            }\r\n        }\r\n        return infoUri;\r\n    };\r\n    ExternalResource.prototype._getDataUri = function (canvas) {\r\n        var content = canvas.getContent();\r\n        var images = canvas.getImages();\r\n        var infoUri = null;\r\n        // presentation 3\r\n        if (content && content.length) {\r\n            var annotation = content[0];\r\n            var annotationBody = annotation.getBody();\r\n            if (annotationBody.length) {\r\n                var body = annotationBody[0];\r\n                var services = body.getServices();\r\n                if (services.length) {\r\n                    infoUri = this._getImageServiceDescriptor(services);\r\n                    if (infoUri) {\r\n                        return infoUri;\r\n                    }\r\n                }\r\n                // no image services. return the image id\r\n                return annotationBody[0].id;\r\n            }\r\n            return null;\r\n        }\r\n        else if (images && images.length) { // presentation 2\r\n            var firstImage = images[0];\r\n            var resource = firstImage.getResource();\r\n            var services = resource.getServices();\r\n            if (services.length) {\r\n                infoUri = this._getImageServiceDescriptor(services);\r\n                if (infoUri) {\r\n                    return infoUri;\r\n                }\r\n            }\r\n            // no image services. return the image id\r\n            return resource.id;\r\n        }\r\n        else {\r\n            // Legacy IxIF\r\n            var service = canvas.getService(ServiceProfile.IXIF);\r\n            if (service) { // todo: deprecate\r\n                return service.getInfoUri();\r\n            }\r\n            // return the canvas id.\r\n            return canvas.id;\r\n        }\r\n    };\r\n    ExternalResource.prototype._parseAuthServices = function (resource) {\r\n        if (this.authAPIVersion === 0.9) {\r\n            this.clickThroughService = Utils.getService(resource, ServiceProfile.AUTH_0_CLICK_THROUGH);\r\n            this.loginService = Utils.getService(resource, ServiceProfile.AUTH_0_LOGIN);\r\n            this.restrictedService = Utils.getService(resource, ServiceProfile.AUTH_0_RESTRICTED);\r\n            if (this.clickThroughService) {\r\n                this.logoutService = this.clickThroughService.getService(ServiceProfile.AUTH_0_LOGOUT);\r\n                this.tokenService = this.clickThroughService.getService(ServiceProfile.AUTH_0_TOKEN);\r\n            }\r\n            else if (this.loginService) {\r\n                this.logoutService = this.loginService.getService(ServiceProfile.AUTH_0_LOGOUT);\r\n                this.tokenService = this.loginService.getService(ServiceProfile.AUTH_0_TOKEN);\r\n            }\r\n            else if (this.restrictedService) {\r\n                this.logoutService = this.restrictedService.getService(ServiceProfile.AUTH_0_LOGOUT);\r\n                this.tokenService = this.restrictedService.getService(ServiceProfile.AUTH_0_TOKEN);\r\n            }\r\n        }\r\n        else { // auth 1\r\n            // if the resource is a canvas, not an info.json, look for auth services on its content.\r\n            if (resource.isCanvas !== undefined && resource.isCanvas()) {\r\n                var content = resource.getContent();\r\n                if (content && content.length) {\r\n                    var body = content[0].getBody();\r\n                    if (body && body.length) {\r\n                        var annotation = body[0];\r\n                        resource = annotation;\r\n                    }\r\n                }\r\n            }\r\n            this.clickThroughService = Utils.getService(resource, ServiceProfile.AUTH_1_CLICK_THROUGH);\r\n            this.loginService = Utils.getService(resource, ServiceProfile.AUTH_1_LOGIN);\r\n            this.externalService = Utils.getService(resource, ServiceProfile.AUTH_1_EXTERNAL);\r\n            this.kioskService = Utils.getService(resource, ServiceProfile.AUTH_1_KIOSK);\r\n            if (this.clickThroughService) {\r\n                this.logoutService = this.clickThroughService.getService(ServiceProfile.AUTH_1_LOGOUT);\r\n                this.tokenService = this.clickThroughService.getService(ServiceProfile.AUTH_1_TOKEN);\r\n                this.probeService = this.clickThroughService.getService(ServiceProfile.AUTH_1_PROBE);\r\n            }\r\n            else if (this.loginService) {\r\n                this.logoutService = this.loginService.getService(ServiceProfile.AUTH_1_LOGOUT);\r\n                this.tokenService = this.loginService.getService(ServiceProfile.AUTH_1_TOKEN);\r\n                this.probeService = this.loginService.getService(ServiceProfile.AUTH_1_PROBE);\r\n            }\r\n            else if (this.externalService) {\r\n                this.logoutService = this.externalService.getService(ServiceProfile.AUTH_1_LOGOUT);\r\n                this.tokenService = this.externalService.getService(ServiceProfile.AUTH_1_TOKEN);\r\n                this.probeService = this.externalService.getService(ServiceProfile.AUTH_1_PROBE);\r\n            }\r\n            else if (this.kioskService) {\r\n                this.logoutService = this.kioskService.getService(ServiceProfile.AUTH_1_LOGOUT);\r\n                this.tokenService = this.kioskService.getService(ServiceProfile.AUTH_1_TOKEN);\r\n                this.probeService = this.kioskService.getService(ServiceProfile.AUTH_1_PROBE);\r\n            }\r\n        }\r\n    };\r\n    ExternalResource.prototype._parseCanvasDimensions = function (canvas) {\r\n        var images = canvas.getImages();\r\n        if (images && images.length) {\r\n            var firstImage = images[0];\r\n            var resource = firstImage.getResource();\r\n            this.width = resource.getWidth();\r\n            this.height = resource.getHeight();\r\n        }\r\n        else {\r\n            // presentation 3\r\n            images = canvas.getContent();\r\n            if (images.length) {\r\n                var annotation = images[0];\r\n                var body = annotation.getBody();\r\n                if (body.length) {\r\n                    this.width = body[0].getWidth();\r\n                    this.height = body[0].getHeight();\r\n                }\r\n            }\r\n        }\r\n    };\r\n    ExternalResource.prototype._parseDescriptorDimensions = function (descriptor) {\r\n        if (descriptor.width !== undefined) {\r\n            this.width = descriptor.width;\r\n        }\r\n        if (descriptor.height !== undefined) {\r\n            this.height = descriptor.height;\r\n        }\r\n    };\r\n    ExternalResource.prototype.isAccessControlled = function () {\r\n        if (this.clickThroughService || this.loginService || this.externalService || this.kioskService || this.probeService) {\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    ExternalResource.prototype.hasServiceDescriptor = function () {\r\n        if (this.dataUri) {\r\n            return this.dataUri.endsWith('info.json');\r\n        }\r\n        return false;\r\n    };\r\n    ExternalResource.prototype.getData = function (accessToken) {\r\n        var that = this;\r\n        that.data = {};\r\n        return new Promise(function (resolve, reject) {\r\n            if (!that.dataUri) {\r\n                reject('There is no dataUri to fetch');\r\n                return;\r\n            }\r\n            // if the resource has a probe service, use that to get http status code\r\n            if (that.probeService) {\r\n                that.isProbed = true;\r\n                // leaving this in for reference until the XHR version is fully tested\r\n                // $.ajax(<JQueryAjaxSettings>{\r\n                //     url: that.probeService.id,\r\n                //     type: 'GET',\r\n                //     dataType: 'json',\r\n                //     beforeSend: (xhr) => {\r\n                //         if (accessToken) {\r\n                //             xhr.setRequestHeader(\"Authorization\", \"Bearer \" + accessToken.accessToken);\r\n                //         }\r\n                //     }\r\n                // }).done((data: any) => {\r\n                //     let contentLocation: string = unescape(data.contentLocation);\r\n                //     if (contentLocation !== that.dataUri) {\r\n                //         that.status = HTTPStatusCode.MOVED_TEMPORARILY;\r\n                //     } else {\r\n                //         that.status = HTTPStatusCode.OK;\r\n                //     }\r\n                //     resolve(that);\r\n                // }).fail((error) => {\r\n                //     that.status = error.status;\r\n                //     that.error = error;\r\n                //     resolve(that);\r\n                // });\r\n                // xhr implementation\r\n                var xhr_1 = new XMLHttpRequest();\r\n                xhr_1.open('GET', that.probeService.id, true);\r\n                xhr_1.withCredentials = true;\r\n                xhr_1.onload = function () {\r\n                    var data = JSON.parse(xhr_1.responseText);\r\n                    var contentLocation = unescape(data.contentLocation);\r\n                    if (contentLocation !== that.dataUri) {\r\n                        that.status = HTTPStatusCode.MOVED_TEMPORARILY;\r\n                    }\r\n                    else {\r\n                        that.status = HTTPStatusCode.OK;\r\n                    }\r\n                    resolve(that);\r\n                };\r\n                xhr_1.onerror = function () {\r\n                    that.status = xhr_1.status;\r\n                    resolve(that);\r\n                };\r\n                xhr_1.send();\r\n            }\r\n            else {\r\n                // check if dataUri ends with info.json\r\n                // if not issue a HEAD request.\r\n                var type = 'GET';\r\n                if (!that.hasServiceDescriptor()) {\r\n                    // If access control is unnecessary, short circuit the process.\r\n                    // Note that isAccessControlled check for short-circuiting only\r\n                    // works in the \"binary resource\" context, since in that case,\r\n                    // we know about access control from the manifest. For image\r\n                    // resources, we need to check info.json for details and can't\r\n                    // short-circuit like this.\r\n                    if (!that.isAccessControlled()) {\r\n                        that.status = HTTPStatusCode.OK;\r\n                        resolve(that);\r\n                        return;\r\n                    }\r\n                    type = 'HEAD';\r\n                }\r\n                // leaving this in for reference until the XHR version is fully tested\r\n                // $.ajax(<JQueryAjaxSettings>{\r\n                //     url: that.dataUri,\r\n                //     type: type,\r\n                //     dataType: 'json',\r\n                //     beforeSend: (xhr) => {\r\n                //         if (accessToken) {\r\n                //             xhr.setRequestHeader(\"Authorization\", \"Bearer \" + accessToken.accessToken);\r\n                //         }\r\n                //     }\r\n                // }).done((data: any) => {\r\n                //     // if it's a resource without an info.json\r\n                //     // todo: if resource doesn't have a @profile\r\n                //     if (!data) {\r\n                //         that.status = HTTPStatusCode.OK;\r\n                //         resolve(that);\r\n                //     } else {\r\n                //         let uri: string = unescape(data['@id']);\r\n                //         that.data = data;\r\n                //         that._parseAuthServices(that.data);\r\n                //         // remove trailing /info.json\r\n                //         if (uri.endsWith('/info.json')){\r\n                //             uri = uri.substr(0, uri.lastIndexOf('/'));\r\n                //         }\r\n                //         let dataUri: string | null = that.dataUri;\r\n                //         if (dataUri && dataUri.endsWith('/info.json')){\r\n                //             dataUri = dataUri.substr(0, dataUri.lastIndexOf('/'));\r\n                //         }\r\n                //         // if the request was redirected to a degraded version and there's a login service to get the full quality version\r\n                //         if (uri !== dataUri && that.loginService) {\r\n                //             that.status = HTTPStatusCode.MOVED_TEMPORARILY;\r\n                //         } else {\r\n                //             that.status = HTTPStatusCode.OK;\r\n                //         }\r\n                //         resolve(that);\r\n                //     }\r\n                // }).fail((error) => {\r\n                //     that.status = error.status;\r\n                //     that.error = error;\r\n                //     if (error.responseJSON){\r\n                //         that._parseAuthServices(error.responseJSON);\r\n                //     }\r\n                //     resolve(that);\r\n                // });\r\n                // xhr implementation\r\n                var xhr_2 = new XMLHttpRequest();\r\n                xhr_2.open(type, that.dataUri, true);\r\n                //xhr.withCredentials = true;\r\n                if (accessToken) {\r\n                    xhr_2.setRequestHeader(\"Authorization\", \"Bearer \" + accessToken.accessToken);\r\n                }\r\n                xhr_2.onload = function () {\r\n                    var data = JSON.parse(xhr_2.responseText);\r\n                    // if it's a resource without an info.json\r\n                    // todo: if resource doesn't have a @profile\r\n                    if (!data) {\r\n                        that.status = HTTPStatusCode.OK;\r\n                        resolve(that);\r\n                    }\r\n                    else {\r\n                        var uri = unescape(data['@id']);\r\n                        that.data = data;\r\n                        that._parseAuthServices(that.data);\r\n                        that._parseDescriptorDimensions(that.data);\r\n                        // remove trailing /info.json\r\n                        if (uri.endsWith('/info.json')) {\r\n                            uri = uri.substr(0, uri.lastIndexOf('/'));\r\n                        }\r\n                        var dataUri = that.dataUri;\r\n                        if (dataUri && dataUri.endsWith('/info.json')) {\r\n                            dataUri = dataUri.substr(0, dataUri.lastIndexOf('/'));\r\n                        }\r\n                        // if the request was redirected to a degraded version and there's a login service to get the full quality version\r\n                        if (uri !== dataUri && that.loginService) {\r\n                            that.status = HTTPStatusCode.MOVED_TEMPORARILY;\r\n                        }\r\n                        else {\r\n                            that.status = HTTPStatusCode.OK;\r\n                        }\r\n                        resolve(that);\r\n                    }\r\n                };\r\n                xhr_2.onerror = function () {\r\n                    that.status = xhr_2.status;\r\n                    if (xhr_2.responseText) {\r\n                        that._parseAuthServices(JSON.parse(xhr_2.responseText));\r\n                    }\r\n                    resolve(that);\r\n                };\r\n                xhr_2.send();\r\n            }\r\n        });\r\n    };\r\n    return ExternalResource;\r\n}());\r\nexport { ExternalResource };\r\n//# sourceMappingURL=ExternalResource.js.map","import { MultiSelectState } from \"./MultiSelectState\";\r\nimport { MetadataGroup } from \"./MetadataGroup\";\r\nimport { TreeSortType } from \"./TreeSortType\";\r\nimport { ServiceProfile, ViewingHint, ViewingDirection } from \"@iiif/vocabulary\";\r\nimport { Errors } from \"./Errors\";\r\nimport { LabelValuePair, Language, LanguageMap, ManifestType, TreeNode, TreeNodeType, Utils } from \"manifesto.js\";\r\nvar Helper = /** @class */ (function () {\r\n    function Helper(options) {\r\n        this.options = options;\r\n        this.iiifResource = this.options.iiifResource;\r\n        this.manifestUri = this.options.manifestUri;\r\n        this.manifest = this.options.manifest;\r\n        this.collectionIndex = this.options.collectionIndex || 0;\r\n        this.manifestIndex = this.options.manifestIndex || 0;\r\n        this.sequenceIndex = this.options.sequenceIndex || 0;\r\n        this.canvasIndex = this.options.canvasIndex || 0;\r\n    }\r\n    // getters //\r\n    Helper.prototype.getAutoCompleteService = function () {\r\n        var service = this.getSearchService();\r\n        var autoCompleteService = null;\r\n        if (service) {\r\n            autoCompleteService = service.getService(ServiceProfile.SEARCH_0_AUTO_COMPLETE);\r\n            if (!autoCompleteService) {\r\n                autoCompleteService = service.getService(ServiceProfile.SEARCH_1_AUTO_COMPLETE);\r\n            }\r\n        }\r\n        return autoCompleteService;\r\n    };\r\n    Helper.prototype.getAttribution = function () {\r\n        if (!this.manifest) {\r\n            throw new Error(Errors.manifestNotLoaded);\r\n        }\r\n        var attribution = this.manifest.getAttribution();\r\n        if (attribution) {\r\n            return LanguageMap.getValue(attribution, this.options.locale);\r\n        }\r\n        return null;\r\n    };\r\n    Helper.prototype.getCanvases = function () {\r\n        return this.getCurrentSequence().getCanvases();\r\n    };\r\n    Helper.prototype.getCanvasById = function (id) {\r\n        return this.getCurrentSequence().getCanvasById(id);\r\n    };\r\n    Helper.prototype.getCanvasesById = function (ids) {\r\n        var canvases = [];\r\n        for (var i = 0; i < ids.length; i++) {\r\n            var id = ids[i];\r\n            var canvas = this.getCanvasById(id);\r\n            if (canvas) {\r\n                canvases.push(canvas);\r\n            }\r\n        }\r\n        return canvases;\r\n    };\r\n    Helper.prototype.getCanvasByIndex = function (index) {\r\n        return this.getCurrentSequence().getCanvasByIndex(index);\r\n    };\r\n    Helper.prototype.getCanvasIndexById = function (id) {\r\n        return this.getCurrentSequence().getCanvasIndexById(id);\r\n    };\r\n    Helper.prototype.getCanvasIndexByLabel = function (label) {\r\n        var foliated = this.getManifestType() === ManifestType.MANUSCRIPT;\r\n        return this.getCurrentSequence().getCanvasIndexByLabel(label, foliated);\r\n    };\r\n    Helper.prototype.getCanvasRange = function (canvas, path) {\r\n        var ranges = this.getCanvasRanges(canvas);\r\n        if (path) {\r\n            for (var i = 0; i < ranges.length; i++) {\r\n                var range = ranges[i];\r\n                if (range.path === path) {\r\n                    return range;\r\n                }\r\n            }\r\n            return null;\r\n        }\r\n        else {\r\n            return ranges[0]; // else return the first range\r\n        }\r\n    };\r\n    Helper.prototype.getCanvasRanges = function (canvas) {\r\n        if (!this.manifest) {\r\n            throw new Error(Errors.manifestNotLoaded);\r\n        }\r\n        if (canvas.ranges) {\r\n            return canvas.ranges; // cache\r\n        }\r\n        else {\r\n            // todo: write test\r\n            canvas.ranges = this.manifest.getAllRanges().filter(function (range) { return (range.getCanvasIds().some(function (cid) { return Utils.normaliseUrl(cid) === Utils.normaliseUrl(canvas.id); })); });\r\n        }\r\n        return canvas.ranges;\r\n    };\r\n    Helper.prototype.getCollectionIndex = function (iiifResource) {\r\n        // todo: this only works for collections nested one level deep\r\n        if (iiifResource.parentCollection && !iiifResource.parentCollection.parentCollection) {\r\n            // manifest must be in the root\r\n            return undefined;\r\n        }\r\n        else if (iiifResource.parentCollection) {\r\n            return iiifResource.parentCollection.index;\r\n        }\r\n        return undefined;\r\n    };\r\n    Helper.prototype.getCurrentCanvas = function () {\r\n        return this.getCurrentSequence().getCanvasByIndex(this.canvasIndex);\r\n    };\r\n    Helper.prototype.getCurrentSequence = function () {\r\n        return this.getSequenceByIndex(this.sequenceIndex);\r\n    };\r\n    Helper.prototype.getDescription = function () {\r\n        if (!this.manifest) {\r\n            throw new Error(Errors.manifestNotLoaded);\r\n        }\r\n        var description = this.manifest.getDescription();\r\n        if (description) {\r\n            return LanguageMap.getValue(description, this.options.locale);\r\n        }\r\n        return null;\r\n    };\r\n    Helper.prototype.getLabel = function () {\r\n        if (!this.manifest) {\r\n            throw new Error(Errors.manifestNotLoaded);\r\n        }\r\n        var label = this.manifest.getLabel();\r\n        if (label) {\r\n            return LanguageMap.getValue(label, this.options.locale);\r\n        }\r\n        return null;\r\n    };\r\n    Helper.prototype.getLastCanvasLabel = function (alphanumeric) {\r\n        return this.getCurrentSequence().getLastCanvasLabel(alphanumeric);\r\n    };\r\n    Helper.prototype.getFirstPageIndex = function () {\r\n        return 0; // why is this needed?\r\n    };\r\n    Helper.prototype.getLastPageIndex = function () {\r\n        return this.getTotalCanvases() - 1;\r\n    };\r\n    Helper.prototype.getLicense = function () {\r\n        if (!this.manifest) {\r\n            throw new Error(Errors.manifestNotLoaded);\r\n        }\r\n        return this.manifest.getLicense();\r\n    };\r\n    Helper.prototype.getLogo = function () {\r\n        if (!this.manifest) {\r\n            throw new Error(Errors.manifestNotLoaded);\r\n        }\r\n        return this.manifest.getLogo();\r\n    };\r\n    Helper.prototype.getManifestType = function () {\r\n        if (!this.manifest) {\r\n            throw new Error(Errors.manifestNotLoaded);\r\n        }\r\n        var manifestType = this.manifest.getManifestType();\r\n        // default to monograph\r\n        if (manifestType === ManifestType.EMPTY) {\r\n            manifestType = ManifestType.MONOGRAPH;\r\n        }\r\n        return manifestType;\r\n    };\r\n    Helper.prototype.getMetadata = function (options) {\r\n        if (!this.manifest) {\r\n            throw new Error(Errors.manifestNotLoaded);\r\n        }\r\n        var metadataGroups = [];\r\n        var manifestMetadata = this.manifest.getMetadata();\r\n        var manifestGroup = new MetadataGroup(this.manifest);\r\n        var locale = this.options.locale; // this will always default to en-GB\r\n        if (manifestMetadata && manifestMetadata.length) {\r\n            manifestGroup.addMetadata(manifestMetadata, true);\r\n        }\r\n        if (this.manifest.getDescription().length) {\r\n            var metadataItem = new LabelValuePair(locale);\r\n            metadataItem.label = [new Language(\"description\", locale)];\r\n            metadataItem.value = this.manifest.getDescription();\r\n            metadataItem.isRootLevel = true;\r\n            manifestGroup.addItem(metadataItem);\r\n        }\r\n        if (this.manifest.getAttribution().length) {\r\n            var metadataItem = new LabelValuePair(locale);\r\n            metadataItem.label = [new Language(\"attribution\", locale)];\r\n            metadataItem.value = this.manifest.getAttribution();\r\n            metadataItem.isRootLevel = true;\r\n            manifestGroup.addItem(metadataItem);\r\n        }\r\n        var license = this.manifest.getLicense();\r\n        if (license) {\r\n            var item = {\r\n                label: \"license\",\r\n                value: (options && options.licenseFormatter) ? options.licenseFormatter.format(license) : license\r\n            };\r\n            var metadataItem = new LabelValuePair(locale);\r\n            metadataItem.parse(item);\r\n            metadataItem.isRootLevel = true;\r\n            manifestGroup.addItem(metadataItem);\r\n        }\r\n        if (this.manifest.getLogo()) {\r\n            var item = {\r\n                label: \"logo\",\r\n                value: '<img src=\"' + this.manifest.getLogo() + '\"/>'\r\n            };\r\n            var metadataItem = new LabelValuePair(locale);\r\n            metadataItem.parse(item);\r\n            metadataItem.isRootLevel = true;\r\n            manifestGroup.addItem(metadataItem);\r\n        }\r\n        metadataGroups.push(manifestGroup);\r\n        if (options) {\r\n            return this._parseMetadataOptions(options, metadataGroups);\r\n        }\r\n        else {\r\n            return metadataGroups;\r\n        }\r\n    };\r\n    Helper.prototype.getRequiredStatement = function () {\r\n        if (!this.manifest) {\r\n            throw new Error(Errors.manifestNotLoaded);\r\n        }\r\n        var requiredStatement = this.manifest.getRequiredStatement();\r\n        if (requiredStatement) {\r\n            return {\r\n                label: requiredStatement.getLabel(),\r\n                value: requiredStatement.getValue()\r\n            };\r\n        }\r\n        return null;\r\n    };\r\n    Helper.prototype._parseMetadataOptions = function (options, metadataGroups) {\r\n        // get sequence metadata\r\n        var sequence = this.getCurrentSequence();\r\n        var sequenceMetadata = sequence.getMetadata();\r\n        if (sequenceMetadata && sequenceMetadata.length) {\r\n            var sequenceGroup = new MetadataGroup(sequence);\r\n            sequenceGroup.addMetadata(sequenceMetadata);\r\n            metadataGroups.push(sequenceGroup);\r\n        }\r\n        // get range metadata\r\n        if (options.range) {\r\n            var rangeGroups = this._getRangeMetadata([], options.range);\r\n            rangeGroups = rangeGroups.reverse();\r\n            metadataGroups = metadataGroups.concat(rangeGroups);\r\n        }\r\n        // get canvas metadata\r\n        if (options.canvases && options.canvases.length) {\r\n            for (var i = 0; i < options.canvases.length; i++) {\r\n                var canvas = options.canvases[i];\r\n                var canvasMetadata = canvas.getMetadata();\r\n                if (canvasMetadata && canvasMetadata.length) {\r\n                    var canvasGroup = new MetadataGroup(canvas);\r\n                    canvasGroup.addMetadata(canvas.getMetadata());\r\n                    metadataGroups.push(canvasGroup);\r\n                }\r\n                // add image metadata\r\n                var images = canvas.getImages();\r\n                for (var j = 0; j < images.length; j++) {\r\n                    var image = images[j];\r\n                    var imageMetadata = image.getMetadata();\r\n                    if (imageMetadata && imageMetadata.length) {\r\n                        var imageGroup = new MetadataGroup(image);\r\n                        imageGroup.addMetadata(imageMetadata);\r\n                        metadataGroups.push(imageGroup);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return metadataGroups;\r\n    };\r\n    Helper.prototype._getRangeMetadata = function (metadataGroups, range) {\r\n        var rangeMetadata = range.getMetadata();\r\n        if (rangeMetadata && rangeMetadata.length) {\r\n            var rangeGroup = new MetadataGroup(range);\r\n            rangeGroup.addMetadata(rangeMetadata);\r\n            metadataGroups.push(rangeGroup);\r\n        }\r\n        else if (range.parentRange) {\r\n            return this._getRangeMetadata(metadataGroups, range.parentRange);\r\n        }\r\n        return metadataGroups;\r\n    };\r\n    Helper.prototype.getMultiSelectState = function () {\r\n        if (!this._multiSelectState) {\r\n            this._multiSelectState = new MultiSelectState();\r\n            this._multiSelectState.ranges = this.getRanges().slice(0);\r\n            this._multiSelectState.canvases = this.getCurrentSequence().getCanvases().slice(0);\r\n        }\r\n        return this._multiSelectState;\r\n    };\r\n    Helper.prototype.getCurrentRange = function () {\r\n        if (this.rangeId) {\r\n            return this.getRangeById(this.rangeId);\r\n        }\r\n        return null;\r\n    };\r\n    Helper.prototype.getPosterCanvas = function () {\r\n        if (!this.manifest) {\r\n            throw new Error(Errors.manifestNotLoaded);\r\n        }\r\n        return this.manifest.getPosterCanvas();\r\n    };\r\n    Helper.prototype.getPosterImage = function () {\r\n        var posterCanvas = this.getPosterCanvas();\r\n        if (posterCanvas) {\r\n            var content = posterCanvas.getContent();\r\n            if (content && content.length) {\r\n                var anno = content[0];\r\n                var body = anno.getBody();\r\n                return body[0].id;\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    Helper.prototype.getPreviousRange = function (range) {\r\n        var currentRange = null;\r\n        if (range) {\r\n            currentRange = range;\r\n        }\r\n        else {\r\n            currentRange = this.getCurrentRange();\r\n        }\r\n        if (currentRange) {\r\n            var flatTree = this.getFlattenedTree();\r\n            if (flatTree) {\r\n                for (var i = 0; i < flatTree.length; i++) {\r\n                    var node = flatTree[i];\r\n                    // find current range in flattened tree\r\n                    if (node && node.data.id === currentRange.id) {\r\n                        // find the first node before it that has canvases\r\n                        while (i > 0) {\r\n                            i--;\r\n                            var prevNode = flatTree[i];\r\n                            return prevNode.data;\r\n                        }\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    Helper.prototype.getNextRange = function (range) {\r\n        // if a range is passed, use that. otherwise get the current range.\r\n        var currentRange = null;\r\n        if (range) {\r\n            currentRange = range;\r\n        }\r\n        else {\r\n            currentRange = this.getCurrentRange();\r\n        }\r\n        if (currentRange) {\r\n            var flatTree = this.getFlattenedTree();\r\n            if (flatTree) {\r\n                for (var i = 0; i < flatTree.length; i++) {\r\n                    var node = flatTree[i];\r\n                    // find current range in flattened tree\r\n                    if (node && node.data.id === currentRange.id) {\r\n                        // find the first node after it that has canvases\r\n                        while (i < flatTree.length - 1) {\r\n                            i++;\r\n                            var nextNode = flatTree[i];\r\n                            if (nextNode.data.canvases && nextNode.data.canvases.length) {\r\n                                return nextNode.data;\r\n                            }\r\n                        }\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    Helper.prototype.getFlattenedTree = function (treeNode) {\r\n        var t = null;\r\n        if (!treeNode) {\r\n            t = this.getTree();\r\n        }\r\n        else {\r\n            t = treeNode;\r\n        }\r\n        if (t) {\r\n            return this._flattenTree(t, 'nodes');\r\n        }\r\n        return null;\r\n    };\r\n    // use object.assign to return a set of new nodes\r\n    // right now the UV needs the nodes to retain properties for databinding like expanded\r\n    // as we're not redrawing the tree every time as per react.\r\n    // maybe make this optional.\r\n    // not sure why deleting the nodes key from each node is necessary\r\n    Helper.prototype._flattenTree = function (root, key) {\r\n        var _this = this;\r\n        var flatten = [root]; //[Object.assign({}, root)];\r\n        //delete flatten[0][key];\r\n        if (root[key] && root[key].length > 0) {\r\n            return flatten.concat(root[key]\r\n                .map(function (child) { return _this._flattenTree(child, key); })\r\n                .reduce(function (a, b) { return a.concat(b); }, []));\r\n        }\r\n        return flatten;\r\n    };\r\n    Helper.prototype.getRanges = function () {\r\n        return this.manifest.getAllRanges();\r\n    };\r\n    Helper.prototype.getRangeByPath = function (path) {\r\n        if (!this.manifest) {\r\n            throw new Error(Errors.manifestNotLoaded);\r\n        }\r\n        return this.manifest.getRangeByPath(path);\r\n    };\r\n    Helper.prototype.getRangeById = function (id) {\r\n        if (!this.manifest) {\r\n            throw new Error(Errors.manifestNotLoaded);\r\n        }\r\n        return this.manifest.getRangeById(id);\r\n    };\r\n    Helper.prototype.getRangeCanvases = function (range) {\r\n        var ids = range.getCanvasIds();\r\n        return this.getCanvasesById(ids);\r\n    };\r\n    Helper.prototype.getRelated = function () {\r\n        if (!this.manifest) {\r\n            throw new Error(Errors.manifestNotLoaded);\r\n        }\r\n        return this.manifest.getRelated();\r\n    };\r\n    Helper.prototype.getSearchService = function () {\r\n        if (!this.manifest) {\r\n            throw new Error(Errors.manifestNotLoaded);\r\n        }\r\n        var service = this.manifest.getService(ServiceProfile.SEARCH_0);\r\n        if (!service) {\r\n            service = this.manifest.getService(ServiceProfile.SEARCH_1);\r\n        }\r\n        return service;\r\n    };\r\n    Helper.prototype.getSeeAlso = function () {\r\n        if (!this.manifest) {\r\n            throw new Error(Errors.manifestNotLoaded);\r\n        }\r\n        return this.manifest.getSeeAlso();\r\n    };\r\n    Helper.prototype.getSequenceByIndex = function (index) {\r\n        if (!this.manifest) {\r\n            throw new Error(Errors.manifestNotLoaded);\r\n        }\r\n        return this.manifest.getSequenceByIndex(index);\r\n    };\r\n    Helper.prototype.getShareServiceUrl = function () {\r\n        if (!this.manifest) {\r\n            throw new Error(Errors.manifestNotLoaded);\r\n        }\r\n        var url = null;\r\n        var shareService = this.manifest.getService(ServiceProfile.SHARE_EXTENSIONS);\r\n        if (shareService) {\r\n            if (shareService.length) {\r\n                shareService = shareService[0];\r\n            }\r\n            url = shareService.__jsonld.shareUrl;\r\n        }\r\n        return url;\r\n    };\r\n    Helper.prototype._getSortedTreeNodesByDate = function (sortedTree, tree) {\r\n        // const all: TreeNode[] = <TreeNode[]>tree.nodes.en().traverseUnique(node => node.nodes)\r\n        //     .where((n) => n.data.type === TreeNodeType.COLLECTION ||\r\n        //                 n.data.type === TreeNodeType.MANIFEST).toArray();\r\n        var flattenedTree = this.getFlattenedTree(tree);\r\n        // const manifests: TreeNode[] = <TreeNode[]>tree.nodes.en().traverseUnique(n => n.nodes)\r\n        //     .where((n) => n.data.type === TreeNodeType.MANIFEST).toArray();\r\n        if (flattenedTree) {\r\n            var manifests = flattenedTree.filter(function (n) { return n.data.type === TreeNodeType.MANIFEST; });\r\n            this.createDecadeNodes(sortedTree, flattenedTree);\r\n            this.sortDecadeNodes(sortedTree);\r\n            this.createYearNodes(sortedTree, flattenedTree);\r\n            this.sortYearNodes(sortedTree);\r\n            this.createMonthNodes(sortedTree, manifests);\r\n            this.sortMonthNodes(sortedTree);\r\n            this.createDateNodes(sortedTree, manifests);\r\n            this.pruneDecadeNodes(sortedTree);\r\n        }\r\n    };\r\n    Helper.prototype.getStartCanvasIndex = function () {\r\n        return this.getCurrentSequence().getStartCanvasIndex();\r\n    };\r\n    Helper.prototype.getThumbs = function (width, height) {\r\n        return this.getCurrentSequence().getThumbs(width, height);\r\n    };\r\n    Helper.prototype.getTopRanges = function () {\r\n        if (!this.manifest) {\r\n            throw new Error(Errors.manifestNotLoaded);\r\n        }\r\n        return this.manifest.getTopRanges();\r\n    };\r\n    Helper.prototype.getTotalCanvases = function () {\r\n        return this.getCurrentSequence().getTotalCanvases();\r\n    };\r\n    Helper.prototype.getTrackingLabel = function () {\r\n        if (!this.manifest) {\r\n            throw new Error(Errors.manifestNotLoaded);\r\n        }\r\n        return this.manifest.getTrackingLabel();\r\n    };\r\n    Helper.prototype._getTopRanges = function () {\r\n        return this.iiifResource.getTopRanges();\r\n    };\r\n    Helper.prototype.getTree = function (topRangeIndex, sortType) {\r\n        // if it's a collection, use IIIFResource.getDefaultTree()\r\n        // otherwise, get the top range by index and use Range.getTree()\r\n        if (topRangeIndex === void 0) { topRangeIndex = 0; }\r\n        if (sortType === void 0) { sortType = TreeSortType.NONE; }\r\n        if (!this.iiifResource) {\r\n            return null;\r\n        }\r\n        var tree;\r\n        if (this.iiifResource.isCollection()) {\r\n            tree = this.iiifResource.getDefaultTree();\r\n        }\r\n        else {\r\n            var topRanges = this._getTopRanges();\r\n            var root = new TreeNode();\r\n            root.label = 'root';\r\n            root.data = this.iiifResource;\r\n            if (topRanges.length) {\r\n                var range = topRanges[topRangeIndex];\r\n                tree = range.getTree(root);\r\n            }\r\n            else {\r\n                return root;\r\n            }\r\n        }\r\n        var sortedTree = new TreeNode();\r\n        switch (sortType.toString()) {\r\n            case TreeSortType.DATE.toString():\r\n                // returns a list of treenodes for each decade.\r\n                // expanding a decade generates a list of years\r\n                // expanding a year gives a list of months containing issues\r\n                // expanding a month gives a list of issues.\r\n                if (this.treeHasNavDates(tree)) {\r\n                    this._getSortedTreeNodesByDate(sortedTree, tree);\r\n                    break;\r\n                }\r\n            default:\r\n                sortedTree = tree;\r\n        }\r\n        return sortedTree;\r\n    };\r\n    Helper.prototype.treeHasNavDates = function (tree) {\r\n        //const node: TreeNode = tree.nodes.en().traverseUnique(node => node.nodes).where((n) => !isNaN(<any>n.navDate)).first();\r\n        // todo: write test\r\n        var flattenedTree = this.getFlattenedTree(tree);\r\n        return (flattenedTree) ? flattenedTree.some(function (n) { return !isNaN(n.navDate); }) : false;\r\n    };\r\n    Helper.prototype.getViewingDirection = function () {\r\n        if (!this.manifest) {\r\n            throw new Error(Errors.manifestNotLoaded);\r\n        }\r\n        var viewingDirection = this.getCurrentSequence().getViewingDirection();\r\n        if (!viewingDirection) {\r\n            viewingDirection = this.manifest.getViewingDirection();\r\n        }\r\n        return viewingDirection;\r\n    };\r\n    Helper.prototype.getViewingHint = function () {\r\n        if (!this.manifest) {\r\n            throw new Error(Errors.manifestNotLoaded);\r\n        }\r\n        var viewingHint = this.getCurrentSequence().getViewingHint();\r\n        if (!viewingHint) {\r\n            viewingHint = this.manifest.getViewingHint();\r\n        }\r\n        return viewingHint;\r\n    };\r\n    // inquiries //\r\n    Helper.prototype.hasParentCollection = function () {\r\n        if (!this.manifest) {\r\n            throw new Error(Errors.manifestNotLoaded);\r\n        }\r\n        return !!this.manifest.parentCollection;\r\n    };\r\n    Helper.prototype.hasRelatedPage = function () {\r\n        var related = this.getRelated();\r\n        if (!related)\r\n            return false;\r\n        if (related.length) {\r\n            related = related[0];\r\n        }\r\n        return related['format'] === 'text/html';\r\n    };\r\n    Helper.prototype.hasResources = function () {\r\n        var canvas = this.getCurrentCanvas();\r\n        return canvas.getResources().length > 0;\r\n    };\r\n    Helper.prototype.isBottomToTop = function () {\r\n        var viewingDirection = this.getViewingDirection();\r\n        if (viewingDirection) {\r\n            return viewingDirection === ViewingDirection.BOTTOM_TO_TOP;\r\n        }\r\n        return false;\r\n    };\r\n    Helper.prototype.isCanvasIndexOutOfRange = function (index) {\r\n        return this.getCurrentSequence().isCanvasIndexOutOfRange(index);\r\n    };\r\n    Helper.prototype.isContinuous = function () {\r\n        var viewingHint = this.getViewingHint();\r\n        if (viewingHint) {\r\n            return viewingHint === ViewingHint.CONTINUOUS;\r\n        }\r\n        return false;\r\n    };\r\n    Helper.prototype.isFirstCanvas = function (index) {\r\n        if (typeof index !== 'undefined') {\r\n            return this.getCurrentSequence().isFirstCanvas(index);\r\n        }\r\n        return this.getCurrentSequence().isFirstCanvas(this.canvasIndex);\r\n    };\r\n    Helper.prototype.isHorizontallyAligned = function () {\r\n        return this.isLeftToRight() || this.isRightToLeft();\r\n    };\r\n    Helper.prototype.isLastCanvas = function (index) {\r\n        if (typeof index !== 'undefined') {\r\n            return this.getCurrentSequence().isLastCanvas(index);\r\n        }\r\n        return this.getCurrentSequence().isLastCanvas(this.canvasIndex);\r\n    };\r\n    Helper.prototype.isLeftToRight = function () {\r\n        var viewingDirection = this.getViewingDirection();\r\n        if (viewingDirection) {\r\n            return viewingDirection === ViewingDirection.LEFT_TO_RIGHT;\r\n        }\r\n        return false;\r\n    };\r\n    Helper.prototype.isMultiCanvas = function () {\r\n        return this.getCurrentSequence().isMultiCanvas();\r\n    };\r\n    Helper.prototype.isMultiSequence = function () {\r\n        if (!this.manifest) {\r\n            throw new Error(Errors.manifestNotLoaded);\r\n        }\r\n        return this.manifest.isMultiSequence();\r\n    };\r\n    Helper.prototype.isPaged = function () {\r\n        if (!this.manifest) {\r\n            throw new Error(Errors.manifestNotLoaded);\r\n        }\r\n        // check the sequence for a viewingHint (deprecated)\r\n        var viewingHint = this.getViewingHint();\r\n        if (viewingHint) {\r\n            return viewingHint === ViewingHint.PAGED;\r\n        }\r\n        // check the manifest for a viewingHint (deprecated) or paged behavior\r\n        return this.manifest.isPagingEnabled();\r\n    };\r\n    Helper.prototype.isPagingAvailable = function () {\r\n        // paged mode is useless unless you have at least 3 pages...\r\n        return this.isPagingEnabled() && this.getTotalCanvases() > 2;\r\n    };\r\n    Helper.prototype.isPagingEnabled = function () {\r\n        if (!this.manifest) {\r\n            throw new Error(Errors.manifestNotLoaded);\r\n        }\r\n        return (this.manifest.isPagingEnabled() || this.getCurrentSequence().isPagingEnabled());\r\n    };\r\n    Helper.prototype.isRightToLeft = function () {\r\n        var viewingDirection = this.getViewingDirection();\r\n        if (viewingDirection) {\r\n            return viewingDirection === ViewingDirection.RIGHT_TO_LEFT;\r\n        }\r\n        return false;\r\n    };\r\n    Helper.prototype.isTopToBottom = function () {\r\n        var viewingDirection = this.getViewingDirection();\r\n        if (viewingDirection) {\r\n            return viewingDirection === ViewingDirection.TOP_TO_BOTTOM;\r\n        }\r\n        return false;\r\n    };\r\n    Helper.prototype.isTotalCanvasesEven = function () {\r\n        return this.getCurrentSequence().isTotalCanvasesEven();\r\n    };\r\n    Helper.prototype.isUIEnabled = function (name) {\r\n        if (!this.manifest) {\r\n            throw new Error(Errors.manifestNotLoaded);\r\n        }\r\n        var uiExtensions = this.manifest.getService(ServiceProfile.UI_EXTENSIONS);\r\n        if (uiExtensions) {\r\n            var disableUI = uiExtensions.getProperty('disableUI');\r\n            if (disableUI) {\r\n                if (disableUI.indexOf(name) !== -1 || disableUI.indexOf(name.toLowerCase()) !== -1) {\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n    Helper.prototype.isVerticallyAligned = function () {\r\n        return this.isTopToBottom() || this.isBottomToTop();\r\n    };\r\n    // dates //     \r\n    Helper.prototype.createDateNodes = function (rootNode, nodes) {\r\n        for (var i = 0; i < nodes.length; i++) {\r\n            var node = nodes[i];\r\n            var year = this.getNodeYear(node);\r\n            var month = this.getNodeMonth(node);\r\n            var dateNode = new TreeNode();\r\n            dateNode.id = node.id;\r\n            dateNode.label = this.getNodeDisplayDate(node);\r\n            dateNode.data = node.data;\r\n            dateNode.data.type = TreeNodeType.MANIFEST;\r\n            dateNode.data.year = year;\r\n            dateNode.data.month = month;\r\n            var decadeNode = this.getDecadeNode(rootNode, year);\r\n            if (decadeNode) {\r\n                var yearNode = this.getYearNode(decadeNode, year);\r\n                if (yearNode) {\r\n                    var monthNode = this.getMonthNode(yearNode, month);\r\n                    if (monthNode) {\r\n                        monthNode.addNode(dateNode);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n    Helper.prototype.createDecadeNodes = function (rootNode, nodes) {\r\n        for (var i = 0; i < nodes.length; i++) {\r\n            var node = nodes[i];\r\n            if (!node.navDate) {\r\n                continue;\r\n            }\r\n            var year = this.getNodeYear(node);\r\n            var endYear = Number(year.toString().substr(0, 3) + \"9\");\r\n            if (!this.getDecadeNode(rootNode, year)) {\r\n                var decadeNode = new TreeNode();\r\n                decadeNode.label = year + \" - \" + endYear;\r\n                decadeNode.navDate = node.navDate;\r\n                decadeNode.data.startYear = year;\r\n                decadeNode.data.endYear = endYear;\r\n                rootNode.addNode(decadeNode);\r\n            }\r\n        }\r\n    };\r\n    Helper.prototype.createMonthNodes = function (rootNode, nodes) {\r\n        for (var i = 0; i < nodes.length; i++) {\r\n            var node = nodes[i];\r\n            if (!node.navDate) {\r\n                continue;\r\n            }\r\n            var year = this.getNodeYear(node);\r\n            var month = this.getNodeMonth(node);\r\n            var decadeNode = this.getDecadeNode(rootNode, year);\r\n            var yearNode = null;\r\n            if (decadeNode) {\r\n                yearNode = this.getYearNode(decadeNode, year);\r\n            }\r\n            if (decadeNode && yearNode && !this.getMonthNode(yearNode, month)) {\r\n                var monthNode = new TreeNode();\r\n                monthNode.label = this.getNodeDisplayMonth(node);\r\n                monthNode.navDate = node.navDate;\r\n                monthNode.data.year = year;\r\n                monthNode.data.month = month;\r\n                yearNode.addNode(monthNode);\r\n            }\r\n        }\r\n    };\r\n    Helper.prototype.createYearNodes = function (rootNode, nodes) {\r\n        for (var i = 0; i < nodes.length; i++) {\r\n            var node = nodes[i];\r\n            if (!node.navDate) {\r\n                continue;\r\n            }\r\n            var year = this.getNodeYear(node);\r\n            var decadeNode = this.getDecadeNode(rootNode, year);\r\n            if (decadeNode && !this.getYearNode(decadeNode, year)) {\r\n                var yearNode = new TreeNode();\r\n                yearNode.label = year.toString();\r\n                yearNode.navDate = node.navDate;\r\n                yearNode.data.year = year;\r\n                decadeNode.addNode(yearNode);\r\n            }\r\n        }\r\n    };\r\n    Helper.prototype.getDecadeNode = function (rootNode, year) {\r\n        for (var i = 0; i < rootNode.nodes.length; i++) {\r\n            var n = rootNode.nodes[i];\r\n            if (year >= n.data.startYear && year <= n.data.endYear)\r\n                return n;\r\n        }\r\n        return null;\r\n    };\r\n    Helper.prototype.getMonthNode = function (yearNode, month) {\r\n        for (var i = 0; i < yearNode.nodes.length; i++) {\r\n            var n = yearNode.nodes[i];\r\n            if (month === this.getNodeMonth(n))\r\n                return n;\r\n        }\r\n        return null;\r\n    };\r\n    Helper.prototype.getNodeDisplayDate = function (node) {\r\n        return node.navDate.toDateString();\r\n    };\r\n    Helper.prototype.getNodeDisplayMonth = function (node) {\r\n        var months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\r\n        return months[node.navDate.getMonth()];\r\n    };\r\n    Helper.prototype.getNodeMonth = function (node) {\r\n        return node.navDate.getMonth();\r\n    };\r\n    Helper.prototype.getNodeYear = function (node) {\r\n        return node.navDate.getFullYear();\r\n    };\r\n    Helper.prototype.getYearNode = function (decadeNode, year) {\r\n        for (var i = 0; i < decadeNode.nodes.length; i++) {\r\n            var n = decadeNode.nodes[i];\r\n            if (year === this.getNodeYear(n))\r\n                return n;\r\n        }\r\n        return null;\r\n    };\r\n    // delete any empty decades\r\n    Helper.prototype.pruneDecadeNodes = function (rootNode) {\r\n        var pruned = [];\r\n        for (var i = 0; i < rootNode.nodes.length; i++) {\r\n            var n = rootNode.nodes[i];\r\n            if (!n.nodes.length) {\r\n                pruned.push(n);\r\n            }\r\n        }\r\n        for (var j = 0; j < pruned.length; j++) {\r\n            var p = pruned[j];\r\n            var index = rootNode.nodes.indexOf(p);\r\n            if (index > -1) {\r\n                rootNode.nodes.splice(index, 1);\r\n            }\r\n        }\r\n    };\r\n    Helper.prototype.sortDecadeNodes = function (rootNode) {\r\n        rootNode.nodes = rootNode.nodes.sort(function (a, b) {\r\n            return a.data.startYear - b.data.startYear;\r\n        });\r\n    };\r\n    Helper.prototype.sortMonthNodes = function (rootNode) {\r\n        var _this = this;\r\n        for (var i = 0; i < rootNode.nodes.length; i++) {\r\n            var decadeNode = rootNode.nodes[i];\r\n            for (var j = 0; j < decadeNode.nodes.length; j++) {\r\n                var monthNode = decadeNode.nodes[j];\r\n                monthNode.nodes = monthNode.nodes.sort(function (a, b) {\r\n                    return _this.getNodeMonth(a) - _this.getNodeMonth(b);\r\n                });\r\n            }\r\n        }\r\n    };\r\n    Helper.prototype.sortYearNodes = function (rootNode) {\r\n        var _this = this;\r\n        for (var i = 0; i < rootNode.nodes.length; i++) {\r\n            var decadeNode = rootNode.nodes[i];\r\n            decadeNode.nodes = decadeNode.nodes.sort(function (a, b) {\r\n                return (_this.getNodeYear(a) - _this.getNodeYear(b));\r\n            });\r\n        }\r\n    };\r\n    return Helper;\r\n}());\r\nexport { Helper };\r\n//# sourceMappingURL=Helper.js.map","var ILabelValuePair = /** @class */ (function () {\r\n    function ILabelValuePair() {\r\n    }\r\n    return ILabelValuePair;\r\n}());\r\nexport { ILabelValuePair };\r\n//# sourceMappingURL=ILabelValuePair.js.map","var MetadataGroup = /** @class */ (function () {\r\n    function MetadataGroup(resource, label) {\r\n        this.items = [];\r\n        this.resource = resource;\r\n        this.label = label;\r\n    }\r\n    MetadataGroup.prototype.addItem = function (item) {\r\n        this.items.push(item);\r\n    };\r\n    MetadataGroup.prototype.addMetadata = function (metadata, isRootLevel) {\r\n        if (isRootLevel === void 0) { isRootLevel = false; }\r\n        for (var i = 0; i < metadata.length; i++) {\r\n            var item = metadata[i];\r\n            item.isRootLevel = isRootLevel;\r\n            this.addItem(item);\r\n        }\r\n    };\r\n    return MetadataGroup;\r\n}());\r\nexport { MetadataGroup };\r\n//# sourceMappingURL=MetadataGroup.js.map","var MetadataOptions = /** @class */ (function () {\r\n    function MetadataOptions() {\r\n    }\r\n    return MetadataOptions;\r\n}());\r\nexport { MetadataOptions };\r\n//# sourceMappingURL=MetadataOptions.js.map","import { Utils } from \"manifesto.js\";\r\nvar MultiSelectState = /** @class */ (function () {\r\n    function MultiSelectState() {\r\n        this.isEnabled = false;\r\n        this.ranges = [];\r\n        this.canvases = [];\r\n    }\r\n    MultiSelectState.prototype.allCanvasesSelected = function () {\r\n        return this.canvases.length > 0 && this.getAllSelectedCanvases().length === this.canvases.length;\r\n    };\r\n    MultiSelectState.prototype.allRangesSelected = function () {\r\n        return this.ranges.length > 0 && this.getAllSelectedRanges().length === this.ranges.length;\r\n    };\r\n    MultiSelectState.prototype.allSelected = function () {\r\n        return this.allRangesSelected() && this.allCanvasesSelected();\r\n    };\r\n    MultiSelectState.prototype.getAll = function () {\r\n        return this.canvases.concat(this.ranges);\r\n    };\r\n    MultiSelectState.prototype.getAllSelectedCanvases = function () {\r\n        return this.canvases.filter(function (c) { return c.multiSelected; });\r\n    };\r\n    MultiSelectState.prototype.getAllSelectedRanges = function () {\r\n        return this.ranges.filter(function (r) { return r.multiSelected; });\r\n    };\r\n    MultiSelectState.prototype.getCanvasById = function (id) {\r\n        return this.canvases.filter(function (c) { return Utils.normaliseUrl(c.id) === Utils.normaliseUrl(id); })[0];\r\n    };\r\n    MultiSelectState.prototype.getCanvasesByIds = function (ids) {\r\n        var canvases = [];\r\n        for (var i = 0; i < ids.length; i++) {\r\n            var id = ids[i];\r\n            canvases.push(this.getCanvasById(id));\r\n        }\r\n        return canvases;\r\n    };\r\n    MultiSelectState.prototype.getRangeCanvases = function (range) {\r\n        var ids = range.getCanvasIds();\r\n        return this.getCanvasesByIds(ids);\r\n    };\r\n    MultiSelectState.prototype.selectAll = function (selected) {\r\n        this.selectRanges(this.ranges, selected);\r\n        this.selectCanvases(this.canvases, selected);\r\n    };\r\n    MultiSelectState.prototype.selectCanvas = function (canvas, selected) {\r\n        var c = this.canvases.filter(function (c) { return c.id === canvas.id; })[0];\r\n        c.multiSelected = selected;\r\n    };\r\n    MultiSelectState.prototype.selectAllCanvases = function (selected) {\r\n        this.selectCanvases(this.canvases, selected);\r\n    };\r\n    MultiSelectState.prototype.selectCanvases = function (canvases, selected) {\r\n        for (var j = 0; j < canvases.length; j++) {\r\n            var canvas = canvases[j];\r\n            canvas.multiSelected = selected;\r\n        }\r\n    };\r\n    MultiSelectState.prototype.selectRange = function (range, selected) {\r\n        var r = this.ranges.filter(function (r) { return r.id === range.id; })[0];\r\n        r.multiSelected = selected;\r\n        var canvases = this.getRangeCanvases(r);\r\n        this.selectCanvases(canvases, selected);\r\n    };\r\n    MultiSelectState.prototype.selectAllRanges = function (selected) {\r\n        this.selectRanges(this.ranges, selected);\r\n    };\r\n    MultiSelectState.prototype.selectRanges = function (ranges, selected) {\r\n        for (var i = 0; i < ranges.length; i++) {\r\n            var range = ranges[i];\r\n            range.multiSelected = selected;\r\n            var canvases = this.getCanvasesByIds(range.getCanvasIds());\r\n            this.selectCanvases(canvases, selected);\r\n        }\r\n    };\r\n    MultiSelectState.prototype.setEnabled = function (enabled) {\r\n        this.isEnabled = enabled;\r\n        var items = this.getAll();\r\n        for (var i = 0; i < items.length; i++) {\r\n            var item = items[i];\r\n            item.multiSelectEnabled = this.isEnabled;\r\n            if (!enabled) {\r\n                item.multiSelected = false;\r\n            }\r\n        }\r\n    };\r\n    return MultiSelectState;\r\n}());\r\nexport { MultiSelectState };\r\n//# sourceMappingURL=MultiSelectState.js.map","var Translation = /** @class */ (function () {\r\n    function Translation(value, locale) {\r\n        this.value = value;\r\n        this.locale = locale;\r\n    }\r\n    return Translation;\r\n}());\r\nexport { Translation };\r\n//# sourceMappingURL=Translation.js.map","export var TreeSortType;\r\n(function (TreeSortType) {\r\n    TreeSortType[\"DATE\"] = \"date\";\r\n    TreeSortType[\"NONE\"] = \"none\";\r\n})(TreeSortType || (TreeSortType = {}));\r\n//# sourceMappingURL=TreeSortType.js.map","// This class formats URIs into HTML <a> links, applying labels when available\r\nvar UriLabeller = /** @class */ (function () {\r\n    function UriLabeller(labels) {\r\n        this.labels = labels;\r\n    }\r\n    UriLabeller.prototype.format = function (url) {\r\n        // if already a link, do nothing.\r\n        if (url.indexOf('<a') != -1)\r\n            return url;\r\n        var label = (this.labels[url]) ? this.labels[url] : url;\r\n        return '<a href=\"' + url + '\">' + label + '</a>';\r\n    };\r\n    return UriLabeller;\r\n}());\r\nexport { UriLabeller };\r\n//# sourceMappingURL=UriLabeller.js.map","export * from \"./AnnotationGroup\";\r\nexport * from \"./AnnotationRect\";\r\nexport * from \"./Bootstrapper\";\r\nexport * from \"./ExternalResource\";\r\nexport * from \"./Helper\";\r\nexport * from \"./ILabelValuePair\";\r\nexport * from \"./MetadataGroup\";\r\nexport * from \"./MetadataOptions\";\r\nexport * from \"./MultiSelectState\";\r\nexport * from \"./Translation\";\r\nexport * from \"./TreeSortType\";\r\nexport * from \"./UriLabeller\";\r\nimport { Bootstrapper } from \"./Bootstrapper\";\r\nexport var loadManifest = function (options) {\r\n    return new Bootstrapper(options).bootstrap();\r\n};\r\n//# sourceMappingURL=index.js.map","export var AnnotationMotivation;\r\n(function (AnnotationMotivation) {\r\n    AnnotationMotivation[\"BOOKMARKING\"] = \"oa:bookmarking\";\r\n    AnnotationMotivation[\"CLASSIFYING\"] = \"oa:classifying\";\r\n    AnnotationMotivation[\"COMMENTING\"] = \"oa:commenting\";\r\n    AnnotationMotivation[\"DESCRIBING\"] = \"oa:describing\";\r\n    AnnotationMotivation[\"EDITING\"] = \"oa:editing\";\r\n    AnnotationMotivation[\"HIGHLIGHTING\"] = \"oa:highlighting\";\r\n    AnnotationMotivation[\"IDENTIFYING\"] = \"oa:identifying\";\r\n    AnnotationMotivation[\"LINKING\"] = \"oa:linking\";\r\n    AnnotationMotivation[\"MODERATING\"] = \"oa:moderating\";\r\n    AnnotationMotivation[\"PAINTING\"] = \"sc:painting\";\r\n    AnnotationMotivation[\"QUESTIONING\"] = \"oa:questioning\";\r\n    AnnotationMotivation[\"REPLYING\"] = \"oa:replying\";\r\n    AnnotationMotivation[\"TAGGING\"] = \"oa:tagging\";\r\n    AnnotationMotivation[\"TRANSCRIBING\"] = \"oad:transcribing\";\r\n})(AnnotationMotivation || (AnnotationMotivation = {}));\r\nexport var Behavior;\r\n(function (Behavior) {\r\n    Behavior[\"AUTO_ADVANCE\"] = \"auto-advance\";\r\n    Behavior[\"CONTINUOUS\"] = \"continuous\";\r\n    Behavior[\"FACING_PAGES\"] = \"facing-pages\";\r\n    Behavior[\"HIDDEN\"] = \"hidden\";\r\n    Behavior[\"INDIVIDUALS\"] = \"individuals\";\r\n    Behavior[\"MULTI_PART\"] = \"multi-part\";\r\n    Behavior[\"NO_NAV\"] = \"no-nav\";\r\n    Behavior[\"NON_PAGED\"] = \"non-paged\";\r\n    Behavior[\"PAGED\"] = \"paged\";\r\n    Behavior[\"REPEAT\"] = \"repeat\";\r\n    Behavior[\"SEQUENCE\"] = \"sequence\";\r\n    Behavior[\"THUMBNAIL_NAV\"] = \"thumbnail-nav\";\r\n    Behavior[\"TOGETHER\"] = \"together\";\r\n    Behavior[\"UNORDERED\"] = \"unordered\";\r\n})(Behavior || (Behavior = {}));\r\nexport var ExternalResourceType;\r\n(function (ExternalResourceType) {\r\n    ExternalResourceType[\"CANVAS\"] = \"canvas\";\r\n    ExternalResourceType[\"CHOICE\"] = \"choice\";\r\n    ExternalResourceType[\"CONTENT_AS_TEXT\"] = \"contentastext\";\r\n    ExternalResourceType[\"DATASET\"] = \"dataset\";\r\n    ExternalResourceType[\"DOCUMENT\"] = \"document\";\r\n    ExternalResourceType[\"IMAGE\"] = \"image\";\r\n    ExternalResourceType[\"MODEL\"] = \"model\";\r\n    ExternalResourceType[\"MOVING_IMAGE\"] = \"movingimage\";\r\n    ExternalResourceType[\"PDF\"] = \"pdf\";\r\n    ExternalResourceType[\"PHYSICAL_OBJECT\"] = \"physicalobject\";\r\n    ExternalResourceType[\"SOUND\"] = \"sound\";\r\n    ExternalResourceType[\"TEXT\"] = \"text\";\r\n    ExternalResourceType[\"TEXTUALBODY\"] = \"textualbody\";\r\n    ExternalResourceType[\"VIDEO\"] = \"video\";\r\n})(ExternalResourceType || (ExternalResourceType = {}));\r\nexport var IIIFResourceType;\r\n(function (IIIFResourceType) {\r\n    IIIFResourceType[\"ANNOTATION\"] = \"annotation\";\r\n    IIIFResourceType[\"CANVAS\"] = \"canvas\";\r\n    IIIFResourceType[\"COLLECTION\"] = \"collection\";\r\n    IIIFResourceType[\"MANIFEST\"] = \"manifest\";\r\n    IIIFResourceType[\"RANGE\"] = \"range\";\r\n    IIIFResourceType[\"SEQUENCE\"] = \"sequence\";\r\n})(IIIFResourceType || (IIIFResourceType = {}));\r\nexport var MediaType;\r\n(function (MediaType) {\r\n    MediaType[\"AUDIO_MP4\"] = \"audio/mp4\";\r\n    MediaType[\"CORTO\"] = \"application/corto\";\r\n    MediaType[\"DRACO\"] = \"application/draco\";\r\n    MediaType[\"EPUB\"] = \"application/epub+zip\";\r\n    MediaType[\"GLB\"] = \"model/gltf-binary\";\r\n    MediaType[\"GLTF\"] = \"model/gltf+json\";\r\n    MediaType[\"JPG\"] = \"image/jpeg\";\r\n    MediaType[\"M3U8\"] = \"application/vnd.apple.mpegurl\";\r\n    MediaType[\"MP3\"] = \"audio/mp3\";\r\n    MediaType[\"MPEG_DASH\"] = \"application/dash+xml\";\r\n    MediaType[\"OBJ\"] = \"text/plain\";\r\n    MediaType[\"OPF\"] = \"application/oebps-package+xml\";\r\n    MediaType[\"PDF\"] = \"application/pdf\";\r\n    MediaType[\"PLY\"] = \"application/ply\";\r\n    MediaType[\"THREEJS\"] = \"application/vnd.threejs+json\";\r\n    MediaType[\"USDZ\"] = \"model/vnd.usd+zip\";\r\n    MediaType[\"VIDEO_MP4\"] = \"video/mp4\";\r\n    MediaType[\"WEBM\"] = \"video/webm\";\r\n})(MediaType || (MediaType = {}));\r\nexport var RenderingFormat;\r\n(function (RenderingFormat) {\r\n    RenderingFormat[\"DOC\"] = \"application/msword\";\r\n    RenderingFormat[\"DOCX\"] = \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\";\r\n    RenderingFormat[\"PDF\"] = \"application/pdf\";\r\n})(RenderingFormat || (RenderingFormat = {}));\r\nexport var ServiceProfile;\r\n(function (ServiceProfile) {\r\n    // image api\r\n    ServiceProfile[\"IMAGE_0_COMPLIANCE_LEVEL_0\"] = \"http://library.stanford.edu/iiif/image-api/compliance.html#level0\";\r\n    ServiceProfile[\"IMAGE_0_COMPLIANCE_LEVEL_1\"] = \"http://library.stanford.edu/iiif/image-api/compliance.html#level1\";\r\n    ServiceProfile[\"IMAGE_0_COMPLIANCE_LEVEL_2\"] = \"http://library.stanford.edu/iiif/image-api/compliance.html#level2\";\r\n    ServiceProfile[\"IMAGE_0_CONFORMANCE_LEVEL_0\"] = \"http://library.stanford.edu/iiif/image-api/conformance.html#level0\";\r\n    ServiceProfile[\"IMAGE_0_CONFORMANCE_LEVEL_1\"] = \"http://library.stanford.edu/iiif/image-api/conformance.html#level1\";\r\n    ServiceProfile[\"IMAGE_0_CONFORMANCE_LEVEL_2\"] = \"http://library.stanford.edu/iiif/image-api/conformance.html#level2\";\r\n    ServiceProfile[\"IMAGE_1_COMPLIANCE_LEVEL_0\"] = \"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0\";\r\n    ServiceProfile[\"IMAGE_1_COMPLIANCE_LEVEL_1\"] = \"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1\";\r\n    ServiceProfile[\"IMAGE_1_COMPLIANCE_LEVEL_2\"] = \"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2\";\r\n    ServiceProfile[\"IMAGE_1_CONFORMANCE_LEVEL_0\"] = \"http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level0\";\r\n    ServiceProfile[\"IMAGE_1_CONFORMANCE_LEVEL_1\"] = \"http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1\";\r\n    ServiceProfile[\"IMAGE_1_CONFORMANCE_LEVEL_2\"] = \"http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2\";\r\n    ServiceProfile[\"IMAGE_1_LEVEL_0\"] = \"http://iiif.io/api/image/1/level0.json\";\r\n    ServiceProfile[\"IMAGE_1_PROFILE_LEVEL_0\"] = \"http://iiif.io/api/image/1/profiles/level0.json\";\r\n    ServiceProfile[\"IMAGE_1_LEVEL_1\"] = \"http://iiif.io/api/image/1/level1.json\";\r\n    ServiceProfile[\"IMAGE_1_PROFILE_LEVEL_1\"] = \"http://iiif.io/api/image/1/profiles/level1.json\";\r\n    ServiceProfile[\"IMAGE_1_LEVEL_2\"] = \"http://iiif.io/api/image/1/level2.json\";\r\n    ServiceProfile[\"IMAGE_1_PROFILE_LEVEL_2\"] = \"http://iiif.io/api/image/1/profiles/level2.json\";\r\n    ServiceProfile[\"IMAGE_2_LEVEL_0\"] = \"http://iiif.io/api/image/2/level0.json\";\r\n    ServiceProfile[\"IMAGE_2_PROFILE_LEVEL_0\"] = \"http://iiif.io/api/image/2/profiles/level0.json\";\r\n    ServiceProfile[\"IMAGE_2_LEVEL_1\"] = \"http://iiif.io/api/image/2/level1.json\";\r\n    ServiceProfile[\"IMAGE_2_PROFILE_LEVEL_1\"] = \"http://iiif.io/api/image/2/profiles/level1.json\";\r\n    ServiceProfile[\"IMAGE_2_LEVEL_2\"] = \"http://iiif.io/api/image/2/level2.json\";\r\n    ServiceProfile[\"IMAGE_2_PROFILE_LEVEL_2\"] = \"http://iiif.io/api/image/2/profiles/level2.json\";\r\n    // auth api\r\n    ServiceProfile[\"AUTH_0_CLICK_THROUGH\"] = \"http://iiif.io/api/auth/0/login/clickthrough\";\r\n    ServiceProfile[\"AUTH_0_LOGIN\"] = \"http://iiif.io/api/auth/0/login\";\r\n    ServiceProfile[\"AUTH_0_LOGOUT\"] = \"http://iiif.io/api/auth/0/logout\";\r\n    ServiceProfile[\"AUTH_0_RESTRICTED\"] = \"http://iiif.io/api/auth/0/login/restricted\";\r\n    ServiceProfile[\"AUTH_0_TOKEN\"] = \"http://iiif.io/api/auth/0/token\";\r\n    ServiceProfile[\"AUTH_1_CLICK_THROUGH\"] = \"http://iiif.io/api/auth/1/clickthrough\";\r\n    ServiceProfile[\"AUTH_1_EXTERNAL\"] = \"http://iiif.io/api/auth/1/external\";\r\n    ServiceProfile[\"AUTH_1_KIOSK\"] = \"http://iiif.io/api/auth/1/kiosk\";\r\n    ServiceProfile[\"AUTH_1_LOGIN\"] = \"http://iiif.io/api/auth/1/login\";\r\n    ServiceProfile[\"AUTH_1_LOGOUT\"] = \"http://iiif.io/api/auth/1/logout\";\r\n    ServiceProfile[\"AUTH_1_PROBE\"] = \"http://iiif.io/api/auth/1/probe\";\r\n    ServiceProfile[\"AUTH_1_TOKEN\"] = \"http://iiif.io/api/auth/1/token\";\r\n    // search api\r\n    ServiceProfile[\"SEARCH_0\"] = \"http://iiif.io/api/search/0/search\";\r\n    ServiceProfile[\"SEARCH_0_AUTO_COMPLETE\"] = \"http://iiif.io/api/search/0/autocomplete\";\r\n    ServiceProfile[\"SEARCH_1\"] = \"http://iiif.io/api/search/1/search\";\r\n    ServiceProfile[\"SEARCH_1_AUTO_COMPLETE\"] = \"http://iiif.io/api/search/1/autocomplete\";\r\n    // extensions\r\n    ServiceProfile[\"TRACKING_EXTENSIONS\"] = \"http://universalviewer.io/tracking-extensions-profile\";\r\n    ServiceProfile[\"UI_EXTENSIONS\"] = \"http://universalviewer.io/ui-extensions-profile\";\r\n    ServiceProfile[\"PRINT_EXTENSIONS\"] = \"http://universalviewer.io/print-extensions-profile\";\r\n    ServiceProfile[\"SHARE_EXTENSIONS\"] = \"http://universalviewer.io/share-extensions-profile\";\r\n    // other\r\n    ServiceProfile[\"OTHER_MANIFESTATIONS\"] = \"http://iiif.io/api/otherManifestations.json\";\r\n    ServiceProfile[\"IXIF\"] = \"http://wellcomelibrary.org/ld/ixif/0/alpha.json\";\r\n})(ServiceProfile || (ServiceProfile = {}));\r\nexport var ViewingDirection;\r\n(function (ViewingDirection) {\r\n    ViewingDirection[\"BOTTOM_TO_TOP\"] = \"bottom-to-top\";\r\n    ViewingDirection[\"LEFT_TO_RIGHT\"] = \"left-to-right\";\r\n    ViewingDirection[\"RIGHT_TO_LEFT\"] = \"right-to-left\";\r\n    ViewingDirection[\"TOP_TO_BOTTOM\"] = \"top-to-bottom\";\r\n})(ViewingDirection || (ViewingDirection = {}));\r\nexport var ViewingHint;\r\n(function (ViewingHint) {\r\n    ViewingHint[\"CONTINUOUS\"] = \"continuous\";\r\n    ViewingHint[\"INDIVIDUALS\"] = \"individuals\";\r\n    ViewingHint[\"NON_PAGED\"] = \"non-paged\";\r\n    ViewingHint[\"PAGED\"] = \"paged\";\r\n    ViewingHint[\"TOP\"] = \"top\";\r\n})(ViewingHint || (ViewingHint = {}));\r\n//# sourceMappingURL=index.js.map","/**\n * cssfilter\n *\n * @author 老雷<leizongmin@gmail.com>\n */\n\nvar DEFAULT = require('./default');\nvar parseStyle = require('./parser');\nvar _ = require('./util');\n\n\n/**\n * 返回值是否为空\n *\n * @param {Object} obj\n * @return {Boolean}\n */\nfunction isNull (obj) {\n  return (obj === undefined || obj === null);\n}\n\n/**\n * 浅拷贝对象\n *\n * @param {Object} obj\n * @return {Object}\n */\nfunction shallowCopyObject (obj) {\n  var ret = {};\n  for (var i in obj) {\n    ret[i] = obj[i];\n  }\n  return ret;\n}\n\n/**\n * 创建CSS过滤器\n *\n * @param {Object} options\n *   - {Object} whiteList\n *   - {Function} onAttr\n *   - {Function} onIgnoreAttr\n *   - {Function} safeAttrValue\n */\nfunction FilterCSS (options) {\n  options = shallowCopyObject(options || {});\n  options.whiteList = options.whiteList || DEFAULT.whiteList;\n  options.onAttr = options.onAttr || DEFAULT.onAttr;\n  options.onIgnoreAttr = options.onIgnoreAttr || DEFAULT.onIgnoreAttr;\n  options.safeAttrValue = options.safeAttrValue || DEFAULT.safeAttrValue;\n  this.options = options;\n}\n\nFilterCSS.prototype.process = function (css) {\n  // 兼容各种奇葩输入\n  css = css || '';\n  css = css.toString();\n  if (!css) return '';\n\n  var me = this;\n  var options = me.options;\n  var whiteList = options.whiteList;\n  var onAttr = options.onAttr;\n  var onIgnoreAttr = options.onIgnoreAttr;\n  var safeAttrValue = options.safeAttrValue;\n\n  var retCSS = parseStyle(css, function (sourcePosition, position, name, value, source) {\n\n    var check = whiteList[name];\n    var isWhite = false;\n    if (check === true) isWhite = check;\n    else if (typeof check === 'function') isWhite = check(value);\n    else if (check instanceof RegExp) isWhite = check.test(value);\n    if (isWhite !== true) isWhite = false;\n\n    // 如果过滤后 value 为空则直接忽略\n    value = safeAttrValue(name, value);\n    if (!value) return;\n\n    var opts = {\n      position: position,\n      sourcePosition: sourcePosition,\n      source: source,\n      isWhite: isWhite\n    };\n\n    if (isWhite) {\n\n      var ret = onAttr(name, value, opts);\n      if (isNull(ret)) {\n        return name + ':' + value;\n      } else {\n        return ret;\n      }\n\n    } else {\n\n      var ret = onIgnoreAttr(name, value, opts);\n      if (!isNull(ret)) {\n        return ret;\n      }\n\n    }\n  });\n\n  return retCSS;\n};\n\n\nmodule.exports = FilterCSS;\n","/**\n * cssfilter\n *\n * @author 老雷<leizongmin@gmail.com>\n */\n\nfunction getDefaultWhiteList () {\n  // 白名单值说明：\n  // true: 允许该属性\n  // Function: function (val) { } 返回true表示允许该属性，其他值均表示不允许\n  // RegExp: regexp.test(val) 返回true表示允许该属性，其他值均表示不允许\n  // 除上面列出的值外均表示不允许\n  var whiteList = {};\n\n  whiteList['align-content'] = false; // default: auto\n  whiteList['align-items'] = false; // default: auto\n  whiteList['align-self'] = false; // default: auto\n  whiteList['alignment-adjust'] = false; // default: auto\n  whiteList['alignment-baseline'] = false; // default: baseline\n  whiteList['all'] = false; // default: depending on individual properties\n  whiteList['anchor-point'] = false; // default: none\n  whiteList['animation'] = false; // default: depending on individual properties\n  whiteList['animation-delay'] = false; // default: 0\n  whiteList['animation-direction'] = false; // default: normal\n  whiteList['animation-duration'] = false; // default: 0\n  whiteList['animation-fill-mode'] = false; // default: none\n  whiteList['animation-iteration-count'] = false; // default: 1\n  whiteList['animation-name'] = false; // default: none\n  whiteList['animation-play-state'] = false; // default: running\n  whiteList['animation-timing-function'] = false; // default: ease\n  whiteList['azimuth'] = false; // default: center\n  whiteList['backface-visibility'] = false; // default: visible\n  whiteList['background'] = true; // default: depending on individual properties\n  whiteList['background-attachment'] = true; // default: scroll\n  whiteList['background-clip'] = true; // default: border-box\n  whiteList['background-color'] = true; // default: transparent\n  whiteList['background-image'] = true; // default: none\n  whiteList['background-origin'] = true; // default: padding-box\n  whiteList['background-position'] = true; // default: 0% 0%\n  whiteList['background-repeat'] = true; // default: repeat\n  whiteList['background-size'] = true; // default: auto\n  whiteList['baseline-shift'] = false; // default: baseline\n  whiteList['binding'] = false; // default: none\n  whiteList['bleed'] = false; // default: 6pt\n  whiteList['bookmark-label'] = false; // default: content()\n  whiteList['bookmark-level'] = false; // default: none\n  whiteList['bookmark-state'] = false; // default: open\n  whiteList['border'] = true; // default: depending on individual properties\n  whiteList['border-bottom'] = true; // default: depending on individual properties\n  whiteList['border-bottom-color'] = true; // default: current color\n  whiteList['border-bottom-left-radius'] = true; // default: 0\n  whiteList['border-bottom-right-radius'] = true; // default: 0\n  whiteList['border-bottom-style'] = true; // default: none\n  whiteList['border-bottom-width'] = true; // default: medium\n  whiteList['border-collapse'] = true; // default: separate\n  whiteList['border-color'] = true; // default: depending on individual properties\n  whiteList['border-image'] = true; // default: none\n  whiteList['border-image-outset'] = true; // default: 0\n  whiteList['border-image-repeat'] = true; // default: stretch\n  whiteList['border-image-slice'] = true; // default: 100%\n  whiteList['border-image-source'] = true; // default: none\n  whiteList['border-image-width'] = true; // default: 1\n  whiteList['border-left'] = true; // default: depending on individual properties\n  whiteList['border-left-color'] = true; // default: current color\n  whiteList['border-left-style'] = true; // default: none\n  whiteList['border-left-width'] = true; // default: medium\n  whiteList['border-radius'] = true; // default: 0\n  whiteList['border-right'] = true; // default: depending on individual properties\n  whiteList['border-right-color'] = true; // default: current color\n  whiteList['border-right-style'] = true; // default: none\n  whiteList['border-right-width'] = true; // default: medium\n  whiteList['border-spacing'] = true; // default: 0\n  whiteList['border-style'] = true; // default: depending on individual properties\n  whiteList['border-top'] = true; // default: depending on individual properties\n  whiteList['border-top-color'] = true; // default: current color\n  whiteList['border-top-left-radius'] = true; // default: 0\n  whiteList['border-top-right-radius'] = true; // default: 0\n  whiteList['border-top-style'] = true; // default: none\n  whiteList['border-top-width'] = true; // default: medium\n  whiteList['border-width'] = true; // default: depending on individual properties\n  whiteList['bottom'] = false; // default: auto\n  whiteList['box-decoration-break'] = true; // default: slice\n  whiteList['box-shadow'] = true; // default: none\n  whiteList['box-sizing'] = true; // default: content-box\n  whiteList['box-snap'] = true; // default: none\n  whiteList['box-suppress'] = true; // default: show\n  whiteList['break-after'] = true; // default: auto\n  whiteList['break-before'] = true; // default: auto\n  whiteList['break-inside'] = true; // default: auto\n  whiteList['caption-side'] = false; // default: top\n  whiteList['chains'] = false; // default: none\n  whiteList['clear'] = true; // default: none\n  whiteList['clip'] = false; // default: auto\n  whiteList['clip-path'] = false; // default: none\n  whiteList['clip-rule'] = false; // default: nonzero\n  whiteList['color'] = true; // default: implementation dependent\n  whiteList['color-interpolation-filters'] = true; // default: auto\n  whiteList['column-count'] = false; // default: auto\n  whiteList['column-fill'] = false; // default: balance\n  whiteList['column-gap'] = false; // default: normal\n  whiteList['column-rule'] = false; // default: depending on individual properties\n  whiteList['column-rule-color'] = false; // default: current color\n  whiteList['column-rule-style'] = false; // default: medium\n  whiteList['column-rule-width'] = false; // default: medium\n  whiteList['column-span'] = false; // default: none\n  whiteList['column-width'] = false; // default: auto\n  whiteList['columns'] = false; // default: depending on individual properties\n  whiteList['contain'] = false; // default: none\n  whiteList['content'] = false; // default: normal\n  whiteList['counter-increment'] = false; // default: none\n  whiteList['counter-reset'] = false; // default: none\n  whiteList['counter-set'] = false; // default: none\n  whiteList['crop'] = false; // default: auto\n  whiteList['cue'] = false; // default: depending on individual properties\n  whiteList['cue-after'] = false; // default: none\n  whiteList['cue-before'] = false; // default: none\n  whiteList['cursor'] = false; // default: auto\n  whiteList['direction'] = false; // default: ltr\n  whiteList['display'] = true; // default: depending on individual properties\n  whiteList['display-inside'] = true; // default: auto\n  whiteList['display-list'] = true; // default: none\n  whiteList['display-outside'] = true; // default: inline-level\n  whiteList['dominant-baseline'] = false; // default: auto\n  whiteList['elevation'] = false; // default: level\n  whiteList['empty-cells'] = false; // default: show\n  whiteList['filter'] = false; // default: none\n  whiteList['flex'] = false; // default: depending on individual properties\n  whiteList['flex-basis'] = false; // default: auto\n  whiteList['flex-direction'] = false; // default: row\n  whiteList['flex-flow'] = false; // default: depending on individual properties\n  whiteList['flex-grow'] = false; // default: 0\n  whiteList['flex-shrink'] = false; // default: 1\n  whiteList['flex-wrap'] = false; // default: nowrap\n  whiteList['float'] = false; // default: none\n  whiteList['float-offset'] = false; // default: 0 0\n  whiteList['flood-color'] = false; // default: black\n  whiteList['flood-opacity'] = false; // default: 1\n  whiteList['flow-from'] = false; // default: none\n  whiteList['flow-into'] = false; // default: none\n  whiteList['font'] = true; // default: depending on individual properties\n  whiteList['font-family'] = true; // default: implementation dependent\n  whiteList['font-feature-settings'] = true; // default: normal\n  whiteList['font-kerning'] = true; // default: auto\n  whiteList['font-language-override'] = true; // default: normal\n  whiteList['font-size'] = true; // default: medium\n  whiteList['font-size-adjust'] = true; // default: none\n  whiteList['font-stretch'] = true; // default: normal\n  whiteList['font-style'] = true; // default: normal\n  whiteList['font-synthesis'] = true; // default: weight style\n  whiteList['font-variant'] = true; // default: normal\n  whiteList['font-variant-alternates'] = true; // default: normal\n  whiteList['font-variant-caps'] = true; // default: normal\n  whiteList['font-variant-east-asian'] = true; // default: normal\n  whiteList['font-variant-ligatures'] = true; // default: normal\n  whiteList['font-variant-numeric'] = true; // default: normal\n  whiteList['font-variant-position'] = true; // default: normal\n  whiteList['font-weight'] = true; // default: normal\n  whiteList['grid'] = false; // default: depending on individual properties\n  whiteList['grid-area'] = false; // default: depending on individual properties\n  whiteList['grid-auto-columns'] = false; // default: auto\n  whiteList['grid-auto-flow'] = false; // default: none\n  whiteList['grid-auto-rows'] = false; // default: auto\n  whiteList['grid-column'] = false; // default: depending on individual properties\n  whiteList['grid-column-end'] = false; // default: auto\n  whiteList['grid-column-start'] = false; // default: auto\n  whiteList['grid-row'] = false; // default: depending on individual properties\n  whiteList['grid-row-end'] = false; // default: auto\n  whiteList['grid-row-start'] = false; // default: auto\n  whiteList['grid-template'] = false; // default: depending on individual properties\n  whiteList['grid-template-areas'] = false; // default: none\n  whiteList['grid-template-columns'] = false; // default: none\n  whiteList['grid-template-rows'] = false; // default: none\n  whiteList['hanging-punctuation'] = false; // default: none\n  whiteList['height'] = true; // default: auto\n  whiteList['hyphens'] = false; // default: manual\n  whiteList['icon'] = false; // default: auto\n  whiteList['image-orientation'] = false; // default: auto\n  whiteList['image-resolution'] = false; // default: normal\n  whiteList['ime-mode'] = false; // default: auto\n  whiteList['initial-letters'] = false; // default: normal\n  whiteList['inline-box-align'] = false; // default: last\n  whiteList['justify-content'] = false; // default: auto\n  whiteList['justify-items'] = false; // default: auto\n  whiteList['justify-self'] = false; // default: auto\n  whiteList['left'] = false; // default: auto\n  whiteList['letter-spacing'] = true; // default: normal\n  whiteList['lighting-color'] = true; // default: white\n  whiteList['line-box-contain'] = false; // default: block inline replaced\n  whiteList['line-break'] = false; // default: auto\n  whiteList['line-grid'] = false; // default: match-parent\n  whiteList['line-height'] = false; // default: normal\n  whiteList['line-snap'] = false; // default: none\n  whiteList['line-stacking'] = false; // default: depending on individual properties\n  whiteList['line-stacking-ruby'] = false; // default: exclude-ruby\n  whiteList['line-stacking-shift'] = false; // default: consider-shifts\n  whiteList['line-stacking-strategy'] = false; // default: inline-line-height\n  whiteList['list-style'] = true; // default: depending on individual properties\n  whiteList['list-style-image'] = true; // default: none\n  whiteList['list-style-position'] = true; // default: outside\n  whiteList['list-style-type'] = true; // default: disc\n  whiteList['margin'] = true; // default: depending on individual properties\n  whiteList['margin-bottom'] = true; // default: 0\n  whiteList['margin-left'] = true; // default: 0\n  whiteList['margin-right'] = true; // default: 0\n  whiteList['margin-top'] = true; // default: 0\n  whiteList['marker-offset'] = false; // default: auto\n  whiteList['marker-side'] = false; // default: list-item\n  whiteList['marks'] = false; // default: none\n  whiteList['mask'] = false; // default: border-box\n  whiteList['mask-box'] = false; // default: see individual properties\n  whiteList['mask-box-outset'] = false; // default: 0\n  whiteList['mask-box-repeat'] = false; // default: stretch\n  whiteList['mask-box-slice'] = false; // default: 0 fill\n  whiteList['mask-box-source'] = false; // default: none\n  whiteList['mask-box-width'] = false; // default: auto\n  whiteList['mask-clip'] = false; // default: border-box\n  whiteList['mask-image'] = false; // default: none\n  whiteList['mask-origin'] = false; // default: border-box\n  whiteList['mask-position'] = false; // default: center\n  whiteList['mask-repeat'] = false; // default: no-repeat\n  whiteList['mask-size'] = false; // default: border-box\n  whiteList['mask-source-type'] = false; // default: auto\n  whiteList['mask-type'] = false; // default: luminance\n  whiteList['max-height'] = true; // default: none\n  whiteList['max-lines'] = false; // default: none\n  whiteList['max-width'] = true; // default: none\n  whiteList['min-height'] = true; // default: 0\n  whiteList['min-width'] = true; // default: 0\n  whiteList['move-to'] = false; // default: normal\n  whiteList['nav-down'] = false; // default: auto\n  whiteList['nav-index'] = false; // default: auto\n  whiteList['nav-left'] = false; // default: auto\n  whiteList['nav-right'] = false; // default: auto\n  whiteList['nav-up'] = false; // default: auto\n  whiteList['object-fit'] = false; // default: fill\n  whiteList['object-position'] = false; // default: 50% 50%\n  whiteList['opacity'] = false; // default: 1\n  whiteList['order'] = false; // default: 0\n  whiteList['orphans'] = false; // default: 2\n  whiteList['outline'] = false; // default: depending on individual properties\n  whiteList['outline-color'] = false; // default: invert\n  whiteList['outline-offset'] = false; // default: 0\n  whiteList['outline-style'] = false; // default: none\n  whiteList['outline-width'] = false; // default: medium\n  whiteList['overflow'] = false; // default: depending on individual properties\n  whiteList['overflow-wrap'] = false; // default: normal\n  whiteList['overflow-x'] = false; // default: visible\n  whiteList['overflow-y'] = false; // default: visible\n  whiteList['padding'] = true; // default: depending on individual properties\n  whiteList['padding-bottom'] = true; // default: 0\n  whiteList['padding-left'] = true; // default: 0\n  whiteList['padding-right'] = true; // default: 0\n  whiteList['padding-top'] = true; // default: 0\n  whiteList['page'] = false; // default: auto\n  whiteList['page-break-after'] = false; // default: auto\n  whiteList['page-break-before'] = false; // default: auto\n  whiteList['page-break-inside'] = false; // default: auto\n  whiteList['page-policy'] = false; // default: start\n  whiteList['pause'] = false; // default: implementation dependent\n  whiteList['pause-after'] = false; // default: implementation dependent\n  whiteList['pause-before'] = false; // default: implementation dependent\n  whiteList['perspective'] = false; // default: none\n  whiteList['perspective-origin'] = false; // default: 50% 50%\n  whiteList['pitch'] = false; // default: medium\n  whiteList['pitch-range'] = false; // default: 50\n  whiteList['play-during'] = false; // default: auto\n  whiteList['position'] = false; // default: static\n  whiteList['presentation-level'] = false; // default: 0\n  whiteList['quotes'] = false; // default: text\n  whiteList['region-fragment'] = false; // default: auto\n  whiteList['resize'] = false; // default: none\n  whiteList['rest'] = false; // default: depending on individual properties\n  whiteList['rest-after'] = false; // default: none\n  whiteList['rest-before'] = false; // default: none\n  whiteList['richness'] = false; // default: 50\n  whiteList['right'] = false; // default: auto\n  whiteList['rotation'] = false; // default: 0\n  whiteList['rotation-point'] = false; // default: 50% 50%\n  whiteList['ruby-align'] = false; // default: auto\n  whiteList['ruby-merge'] = false; // default: separate\n  whiteList['ruby-position'] = false; // default: before\n  whiteList['shape-image-threshold'] = false; // default: 0.0\n  whiteList['shape-outside'] = false; // default: none\n  whiteList['shape-margin'] = false; // default: 0\n  whiteList['size'] = false; // default: auto\n  whiteList['speak'] = false; // default: auto\n  whiteList['speak-as'] = false; // default: normal\n  whiteList['speak-header'] = false; // default: once\n  whiteList['speak-numeral'] = false; // default: continuous\n  whiteList['speak-punctuation'] = false; // default: none\n  whiteList['speech-rate'] = false; // default: medium\n  whiteList['stress'] = false; // default: 50\n  whiteList['string-set'] = false; // default: none\n  whiteList['tab-size'] = false; // default: 8\n  whiteList['table-layout'] = false; // default: auto\n  whiteList['text-align'] = true; // default: start\n  whiteList['text-align-last'] = true; // default: auto\n  whiteList['text-combine-upright'] = true; // default: none\n  whiteList['text-decoration'] = true; // default: none\n  whiteList['text-decoration-color'] = true; // default: currentColor\n  whiteList['text-decoration-line'] = true; // default: none\n  whiteList['text-decoration-skip'] = true; // default: objects\n  whiteList['text-decoration-style'] = true; // default: solid\n  whiteList['text-emphasis'] = true; // default: depending on individual properties\n  whiteList['text-emphasis-color'] = true; // default: currentColor\n  whiteList['text-emphasis-position'] = true; // default: over right\n  whiteList['text-emphasis-style'] = true; // default: none\n  whiteList['text-height'] = true; // default: auto\n  whiteList['text-indent'] = true; // default: 0\n  whiteList['text-justify'] = true; // default: auto\n  whiteList['text-orientation'] = true; // default: mixed\n  whiteList['text-overflow'] = true; // default: clip\n  whiteList['text-shadow'] = true; // default: none\n  whiteList['text-space-collapse'] = true; // default: collapse\n  whiteList['text-transform'] = true; // default: none\n  whiteList['text-underline-position'] = true; // default: auto\n  whiteList['text-wrap'] = true; // default: normal\n  whiteList['top'] = false; // default: auto\n  whiteList['transform'] = false; // default: none\n  whiteList['transform-origin'] = false; // default: 50% 50% 0\n  whiteList['transform-style'] = false; // default: flat\n  whiteList['transition'] = false; // default: depending on individual properties\n  whiteList['transition-delay'] = false; // default: 0s\n  whiteList['transition-duration'] = false; // default: 0s\n  whiteList['transition-property'] = false; // default: all\n  whiteList['transition-timing-function'] = false; // default: ease\n  whiteList['unicode-bidi'] = false; // default: normal\n  whiteList['vertical-align'] = false; // default: baseline\n  whiteList['visibility'] = false; // default: visible\n  whiteList['voice-balance'] = false; // default: center\n  whiteList['voice-duration'] = false; // default: auto\n  whiteList['voice-family'] = false; // default: implementation dependent\n  whiteList['voice-pitch'] = false; // default: medium\n  whiteList['voice-range'] = false; // default: medium\n  whiteList['voice-rate'] = false; // default: normal\n  whiteList['voice-stress'] = false; // default: normal\n  whiteList['voice-volume'] = false; // default: medium\n  whiteList['volume'] = false; // default: medium\n  whiteList['white-space'] = false; // default: normal\n  whiteList['widows'] = false; // default: 2\n  whiteList['width'] = true; // default: auto\n  whiteList['will-change'] = false; // default: auto\n  whiteList['word-break'] = true; // default: normal\n  whiteList['word-spacing'] = true; // default: normal\n  whiteList['word-wrap'] = true; // default: normal\n  whiteList['wrap-flow'] = false; // default: auto\n  whiteList['wrap-through'] = false; // default: wrap\n  whiteList['writing-mode'] = false; // default: horizontal-tb\n  whiteList['z-index'] = false; // default: auto\n\n  return whiteList;\n}\n\n\n/**\n * 匹配到白名单上的一个属性时\n *\n * @param {String} name\n * @param {String} value\n * @param {Object} options\n * @return {String}\n */\nfunction onAttr (name, value, options) {\n  // do nothing\n}\n\n/**\n * 匹配到不在白名单上的一个属性时\n *\n * @param {String} name\n * @param {String} value\n * @param {Object} options\n * @return {String}\n */\nfunction onIgnoreAttr (name, value, options) {\n  // do nothing\n}\n\nvar REGEXP_URL_JAVASCRIPT = /javascript\\s*\\:/img;\n\n/**\n * 过滤属性值\n *\n * @param {String} name\n * @param {String} value\n * @return {String}\n */\nfunction safeAttrValue(name, value) {\n  if (REGEXP_URL_JAVASCRIPT.test(value)) return '';\n  return value;\n}\n\n\nexports.whiteList = getDefaultWhiteList();\nexports.getDefaultWhiteList = getDefaultWhiteList;\nexports.onAttr = onAttr;\nexports.onIgnoreAttr = onIgnoreAttr;\nexports.safeAttrValue = safeAttrValue;\n","/**\n * cssfilter\n *\n * @author 老雷<leizongmin@gmail.com>\n */\n\nvar DEFAULT = require('./default');\nvar FilterCSS = require('./css');\n\n\n/**\n * XSS过滤\n *\n * @param {String} css 要过滤的CSS代码\n * @param {Object} options 选项：whiteList, onAttr, onIgnoreAttr\n * @return {String}\n */\nfunction filterCSS (html, options) {\n  var xss = new FilterCSS(options);\n  return xss.process(html);\n}\n\n\n// 输出\nexports = module.exports = filterCSS;\nexports.FilterCSS = FilterCSS;\nfor (var i in DEFAULT) exports[i] = DEFAULT[i];\n\n// 在浏览器端使用\nif (typeof window !== 'undefined') {\n  window.filterCSS = module.exports;\n}\n","/**\n * cssfilter\n *\n * @author 老雷<leizongmin@gmail.com>\n */\n\nvar _ = require('./util');\n\n\n/**\n * 解析style\n *\n * @param {String} css\n * @param {Function} onAttr 处理属性的函数\n *   参数格式： function (sourcePosition, position, name, value, source)\n * @return {String}\n */\nfunction parseStyle (css, onAttr) {\n  css = _.trimRight(css);\n  if (css[css.length - 1] !== ';') css += ';';\n  var cssLength = css.length;\n  var isParenthesisOpen = false;\n  var lastPos = 0;\n  var i = 0;\n  var retCSS = '';\n\n  function addNewAttr () {\n    // 如果没有正常的闭合圆括号，则直接忽略当前属性\n    if (!isParenthesisOpen) {\n      var source = _.trim(css.slice(lastPos, i));\n      var j = source.indexOf(':');\n      if (j !== -1) {\n        var name = _.trim(source.slice(0, j));\n        var value = _.trim(source.slice(j + 1));\n        // 必须有属性名称\n        if (name) {\n          var ret = onAttr(lastPos, retCSS.length, name, value, source);\n          if (ret) retCSS += ret + '; ';\n        }\n      }\n    }\n    lastPos = i + 1;\n  }\n\n  for (; i < cssLength; i++) {\n    var c = css[i];\n    if (c === '/' && css[i + 1] === '*') {\n      // 备注开始\n      var j = css.indexOf('*/', i + 2);\n      // 如果没有正常的备注结束，则后面的部分全部跳过\n      if (j === -1) break;\n      // 直接将当前位置调到备注结尾，并且初始化状态\n      i = j + 1;\n      lastPos = i + 1;\n      isParenthesisOpen = false;\n    } else if (c === '(') {\n      isParenthesisOpen = true;\n    } else if (c === ')') {\n      isParenthesisOpen = false;\n    } else if (c === ';') {\n      if (isParenthesisOpen) {\n        // 在圆括号里面，忽略\n      } else {\n        addNewAttr();\n      }\n    } else if (c === '\\n') {\n      addNewAttr();\n    }\n  }\n\n  return _.trim(retCSS);\n}\n\nmodule.exports = parseStyle;\n","module.exports = {\n  indexOf: function (arr, item) {\n    var i, j;\n    if (Array.prototype.indexOf) {\n      return arr.indexOf(item);\n    }\n    for (i = 0, j = arr.length; i < j; i++) {\n      if (arr[i] === item) {\n        return i;\n      }\n    }\n    return -1;\n  },\n  forEach: function (arr, fn, scope) {\n    var i, j;\n    if (Array.prototype.forEach) {\n      return arr.forEach(fn, scope);\n    }\n    for (i = 0, j = arr.length; i < j; i++) {\n      fn.call(scope, arr[i], i, arr);\n    }\n  },\n  trim: function (str) {\n    if (String.prototype.trim) {\n      return str.trim();\n    }\n    return str.replace(/(^\\s*)|(\\s*$)/g, '');\n  },\n  trimRight: function (str) {\n    if (String.prototype.trimRight) {\n      return str.trimRight();\n    }\n    return str.replace(/(\\s*$)/g, '');\n  }\n};\n","!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(\"manifesto\",[],t):\"object\"==typeof exports?exports.manifesto=t():e.manifesto=t()}(\"undefined\"!=typeof self?self:this,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=4)}([function(e,t,n){\"use strict\";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,\"__esModule\",{value:!0}),r(n(6)),r(n(7)),r(n(8)),r(n(9)),r(n(10)),r(n(11)),r(n(12)),r(n(13)),r(n(14)),r(n(15)),r(n(16)),r(n(17)),r(n(18)),r(n(19)),r(n(20)),r(n(21)),r(n(22)),r(n(23)),r(n(24)),r(n(25)),r(n(26)),r(n(27)),r(n(28)),r(n(29)),r(n(30)),r(n(31)),r(n(32)),r(n(2))},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){e.BOOKMARKING=\"oa:bookmarking\",e.CLASSIFYING=\"oa:classifying\",e.COMMENTING=\"oa:commenting\",e.DESCRIBING=\"oa:describing\",e.EDITING=\"oa:editing\",e.HIGHLIGHTING=\"oa:highlighting\",e.IDENTIFYING=\"oa:identifying\",e.LINKING=\"oa:linking\",e.MODERATING=\"oa:moderating\",e.PAINTING=\"sc:painting\",e.QUESTIONING=\"oa:questioning\",e.REPLYING=\"oa:replying\",e.TAGGING=\"oa:tagging\",e.TRANSCRIBING=\"oad:transcribing\"}(t.AnnotationMotivation||(t.AnnotationMotivation={})),function(e){e.AUTO_ADVANCE=\"auto-advance\",e.CONTINUOUS=\"continuous\",e.FACING_PAGES=\"facing-pages\",e.HIDDEN=\"hidden\",e.INDIVIDUALS=\"individuals\",e.MULTI_PART=\"multi-part\",e.NO_NAV=\"no-nav\",e.NON_PAGED=\"non-paged\",e.PAGED=\"paged\",e.REPEAT=\"repeat\",e.SEQUENCE=\"sequence\",e.THUMBNAIL_NAV=\"thumbnail-nav\",e.TOGETHER=\"together\",e.UNORDERED=\"unordered\"}(t.Behavior||(t.Behavior={})),function(e){e.CANVAS=\"canvas\",e.CHOICE=\"choice\",e.CONTENT_AS_TEXT=\"contentastext\",e.DOCUMENT=\"document\",e.IMAGE=\"image\",e.MOVING_IMAGE=\"movingimage\",e.PDF=\"pdf\",e.PHYSICAL_OBJECT=\"physicalobject\",e.SOUND=\"sound\",e.TEXTUALBODY=\"textualbody\",e.VIDEO=\"video\"}(t.ExternalResourceType||(t.ExternalResourceType={})),function(e){e.ANNOTATION=\"annotation\",e.CANVAS=\"canvas\",e.COLLECTION=\"collection\",e.MANIFEST=\"manifest\",e.RANGE=\"range\",e.SEQUENCE=\"sequence\"}(t.IIIFResourceType||(t.IIIFResourceType={})),function(e){e.AUDIO_MP4=\"audio/mp4\",e.CORTO=\"application/corto\",e.DRACO=\"application/draco\",e.GLTF=\"model/gltf+json\",e.JPG=\"image/jpeg\",e.M3U8=\"application/vnd.apple.mpegurl\",e.MP3=\"audio/mp3\",e.MPEG_DASH=\"application/dash+xml\",e.OBJ=\"text/plain\",e.PDF=\"application/pdf\",e.PLY=\"application/ply\",e.THREEJS=\"application/vnd.threejs+json\",e.VIDEO_MP4=\"video/mp4\",e.WEBM=\"video/webm\"}(t.MediaType||(t.MediaType={})),function(e){e.DOC=\"application/msword\",e.DOCX=\"application/vnd.openxmlformats-officedocument.wordprocessingml.document\",e.PDF=\"application/pdf\"}(t.RenderingFormat||(t.RenderingFormat={})),function(e){e.IMAGE_0_COMPLIANCE_LEVEL_0=\"http://library.stanford.edu/iiif/image-api/compliance.html#level0\",e.IMAGE_0_COMPLIANCE_LEVEL_1=\"http://library.stanford.edu/iiif/image-api/compliance.html#level1\",e.IMAGE_0_COMPLIANCE_LEVEL_2=\"http://library.stanford.edu/iiif/image-api/compliance.html#level2\",e.IMAGE_0_CONFORMANCE_LEVEL_0=\"http://library.stanford.edu/iiif/image-api/conformance.html#level0\",e.IMAGE_0_CONFORMANCE_LEVEL_1=\"http://library.stanford.edu/iiif/image-api/conformance.html#level1\",e.IMAGE_0_CONFORMANCE_LEVEL_2=\"http://library.stanford.edu/iiif/image-api/conformance.html#level2\",e.IMAGE_1_COMPLIANCE_LEVEL_0=\"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0\",e.IMAGE_1_COMPLIANCE_LEVEL_1=\"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1\",e.IMAGE_1_COMPLIANCE_LEVEL_2=\"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2\",e.IMAGE_1_CONFORMANCE_LEVEL_0=\"http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level0\",e.IMAGE_1_CONFORMANCE_LEVEL_1=\"http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1\",e.IMAGE_1_CONFORMANCE_LEVEL_2=\"http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2\",e.IMAGE_1_LEVEL_0=\"http://iiif.io/api/image/1/level0.json\",e.IMAGE_1_PROFILE_LEVEL_0=\"http://iiif.io/api/image/1/profiles/level0.json\",e.IMAGE_1_LEVEL_1=\"http://iiif.io/api/image/1/level1.json\",e.IMAGE_1_PROFILE_LEVEL_1=\"http://iiif.io/api/image/1/profiles/level1.json\",e.IMAGE_1_LEVEL_2=\"http://iiif.io/api/image/1/level2.json\",e.IMAGE_1_PROFILE_LEVEL_2=\"http://iiif.io/api/image/1/profiles/level2.json\",e.IMAGE_2_LEVEL_0=\"http://iiif.io/api/image/2/level0.json\",e.IMAGE_2_PROFILE_LEVEL_0=\"http://iiif.io/api/image/2/profiles/level0.json\",e.IMAGE_2_LEVEL_1=\"http://iiif.io/api/image/2/level1.json\",e.IMAGE_2_PROFILE_LEVEL_1=\"http://iiif.io/api/image/2/profiles/level1.json\",e.IMAGE_2_LEVEL_2=\"http://iiif.io/api/image/2/level2.json\",e.IMAGE_2_PROFILE_LEVEL_2=\"http://iiif.io/api/image/2/profiles/level2.json\",e.AUTH_0_CLICK_THROUGH=\"http://iiif.io/api/auth/0/login/clickthrough\",e.AUTH_0_LOGIN=\"http://iiif.io/api/auth/0/login\",e.AUTH_0_LOGOUT=\"http://iiif.io/api/auth/0/logout\",e.AUTH_0_RESTRICTED=\"http://iiif.io/api/auth/0/login/restricted\",e.AUTH_0_TOKEN=\"http://iiif.io/api/auth/0/token\",e.AUTH_1_CLICK_THROUGH=\"http://iiif.io/api/auth/1/clickthrough\",e.AUTH_1_EXTERNAL=\"http://iiif.io/api/auth/1/external\",e.AUTH_1_KIOSK=\"http://iiif.io/api/auth/1/kiosk\",e.AUTH_1_LOGIN=\"http://iiif.io/api/auth/1/login\",e.AUTH_1_LOGOUT=\"http://iiif.io/api/auth/1/logout\",e.AUTH_1_PROBE=\"http://iiif.io/api/auth/1/probe\",e.AUTH_1_TOKEN=\"http://iiif.io/api/auth/1/token\",e.SEARCH_0=\"http://iiif.io/api/search/0/search\",e.SEARCH_0_AUTO_COMPLETE=\"http://iiif.io/api/search/0/autocomplete\",e.SEARCH_1=\"http://iiif.io/api/search/1/search\",e.SEARCH_1_AUTO_COMPLETE=\"http://iiif.io/api/search/1/autocomplete\",e.TRACKING_EXTENSIONS=\"http://universalviewer.io/tracking-extensions-profile\",e.UI_EXTENSIONS=\"http://universalviewer.io/ui-extensions-profile\",e.PRINT_EXTENSIONS=\"http://universalviewer.io/print-extensions-profile\",e.SHARE_EXTENSIONS=\"http://universalviewer.io/share-extensions-profile\",e.OTHER_MANIFESTATIONS=\"http://iiif.io/api/otherManifestations.json\",e.IXIF=\"http://wellcomelibrary.org/ld/ixif/0/alpha.json\"}(t.ServiceProfile||(t.ServiceProfile={})),function(e){e.BOTTOM_TO_TOP=\"bottom-to-top\",e.LEFT_TO_RIGHT=\"left-to-right\",e.RIGHT_TO_LEFT=\"right-to-left\",e.TOP_TO_BOTTOM=\"top-to-bottom\"}(t.ViewingDirection||(t.ViewingDirection={})),function(e){e.CONTINUOUS=\"continuous\",e.INDIVIDUALS=\"individuals\",e.NON_PAGED=\"non-paged\",e.PAGED=\"paged\",e.TOP=\"top\"}(t.ViewingHint||(t.ViewingHint={}))},function(e,t,n){\"use strict\";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},\"function\"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError(\"Generator is already executing.\");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,\"__esModule\",{value:!0});var o=n(0),s=n(1),a=n(33);n(34);var u=function(){function e(){}return e.getMediaType=function(e){return(e=(e=e.toLowerCase()).split(\";\")[0]).trim()},e.getImageQuality=function(e){return e===s.ServiceProfile.IMAGE_0_COMPLIANCE_LEVEL_1||e===s.ServiceProfile.IMAGE_0_COMPLIANCE_LEVEL_2||e===s.ServiceProfile.IMAGE_1_COMPLIANCE_LEVEL_1||e===s.ServiceProfile.IMAGE_1_COMPLIANCE_LEVEL_2||e===s.ServiceProfile.IMAGE_0_CONFORMANCE_LEVEL_1||e===s.ServiceProfile.IMAGE_0_CONFORMANCE_LEVEL_2||e===s.ServiceProfile.IMAGE_1_CONFORMANCE_LEVEL_1||e===s.ServiceProfile.IMAGE_1_CONFORMANCE_LEVEL_2||e===s.ServiceProfile.IMAGE_1_LEVEL_1||e===s.ServiceProfile.IMAGE_1_PROFILE_LEVEL_1||e===s.ServiceProfile.IMAGE_1_LEVEL_2||e===s.ServiceProfile.IMAGE_1_PROFILE_LEVEL_2?\"native\":\"default\"},e.getInexactLocale=function(e){return-1!==e.indexOf(\"-\")?e.substr(0,e.indexOf(\"-\")):e},e.getLocalisedValue=function(e,t){if(!Array.isArray(e))return e;for(var n=0;n<e.length;n++){var r=e[n];if(t===r[\"@language\"])return r[\"@value\"]}var i=t.substr(0,t.indexOf(\"-\"));for(n=0;n<e.length;n++){var o=e[n];if(o[\"@language\"]===i)return o[\"@value\"]}return null},e.generateTreeNodeIds=function(t,n){var r;void 0===n&&(n=0),r=t.parentNode?t.parentNode.id+\"-\"+n:\"0\",t.id=r;for(var i=0;i<t.nodes.length;i++){var o=t.nodes[i];e.generateTreeNodeIds(o,i)}},e.normaliseType=function(e){return-1!==(e=e.toLowerCase()).indexOf(\":\")?e.split(\":\")[1]:e},e.normaliseUrl=function(e){return-1!==(e=e.substr(e.indexOf(\"://\"))).indexOf(\"#\")&&(e=e.split(\"#\")[0]),e},e.normalisedUrlsMatch=function(t,n){return e.normaliseUrl(t)===e.normaliseUrl(n)},e.isImageProfile=function(t){return!!(e.normalisedUrlsMatch(t,s.ServiceProfile.IMAGE_0_COMPLIANCE_LEVEL_0)||e.normalisedUrlsMatch(t,s.ServiceProfile.IMAGE_0_COMPLIANCE_LEVEL_1)||e.normalisedUrlsMatch(t,s.ServiceProfile.IMAGE_0_COMPLIANCE_LEVEL_2)||e.normalisedUrlsMatch(t,s.ServiceProfile.IMAGE_1_COMPLIANCE_LEVEL_0)||e.normalisedUrlsMatch(t,s.ServiceProfile.IMAGE_1_COMPLIANCE_LEVEL_2)||e.normalisedUrlsMatch(t,s.ServiceProfile.IMAGE_0_CONFORMANCE_LEVEL_0)||e.normalisedUrlsMatch(t,s.ServiceProfile.IMAGE_0_CONFORMANCE_LEVEL_1)||e.normalisedUrlsMatch(t,s.ServiceProfile.IMAGE_0_CONFORMANCE_LEVEL_2)||e.normalisedUrlsMatch(t,s.ServiceProfile.IMAGE_1_CONFORMANCE_LEVEL_1)||e.normalisedUrlsMatch(t,s.ServiceProfile.IMAGE_1_CONFORMANCE_LEVEL_2)||e.normalisedUrlsMatch(t,s.ServiceProfile.IMAGE_1_LEVEL_0)||e.normalisedUrlsMatch(t,s.ServiceProfile.IMAGE_1_PROFILE_LEVEL_0)||e.normalisedUrlsMatch(t,s.ServiceProfile.IMAGE_1_LEVEL_1)||e.normalisedUrlsMatch(t,s.ServiceProfile.IMAGE_1_PROFILE_LEVEL_1)||e.normalisedUrlsMatch(t,s.ServiceProfile.IMAGE_1_LEVEL_2)||e.normalisedUrlsMatch(t,s.ServiceProfile.IMAGE_1_PROFILE_LEVEL_2)||e.normalisedUrlsMatch(t,s.ServiceProfile.IMAGE_2_LEVEL_0)||e.normalisedUrlsMatch(t,s.ServiceProfile.IMAGE_2_PROFILE_LEVEL_0)||e.normalisedUrlsMatch(t,s.ServiceProfile.IMAGE_2_LEVEL_1)||e.normalisedUrlsMatch(t,s.ServiceProfile.IMAGE_2_PROFILE_LEVEL_1)||e.normalisedUrlsMatch(t,s.ServiceProfile.IMAGE_2_LEVEL_2)||e.normalisedUrlsMatch(t,s.ServiceProfile.IMAGE_2_PROFILE_LEVEL_2))},e.isLevel0ImageProfile=function(t){return!!(e.normalisedUrlsMatch(t,s.ServiceProfile.IMAGE_0_COMPLIANCE_LEVEL_0)||e.normalisedUrlsMatch(t,s.ServiceProfile.IMAGE_1_COMPLIANCE_LEVEL_0)||e.normalisedUrlsMatch(t,s.ServiceProfile.IMAGE_0_CONFORMANCE_LEVEL_0)||e.normalisedUrlsMatch(t,s.ServiceProfile.IMAGE_1_CONFORMANCE_LEVEL_0)||e.normalisedUrlsMatch(t,s.ServiceProfile.IMAGE_1_LEVEL_0)||e.normalisedUrlsMatch(t,s.ServiceProfile.IMAGE_1_PROFILE_LEVEL_0)||e.normalisedUrlsMatch(t,s.ServiceProfile.IMAGE_2_LEVEL_0)||e.normalisedUrlsMatch(t,s.ServiceProfile.IMAGE_2_PROFILE_LEVEL_0))},e.isLevel1ImageProfile=function(t){return!!(e.normalisedUrlsMatch(t,s.ServiceProfile.IMAGE_0_COMPLIANCE_LEVEL_1)||e.normalisedUrlsMatch(t,s.ServiceProfile.IMAGE_1_COMPLIANCE_LEVEL_1)||e.normalisedUrlsMatch(t,s.ServiceProfile.IMAGE_0_CONFORMANCE_LEVEL_1)||e.normalisedUrlsMatch(t,s.ServiceProfile.IMAGE_1_CONFORMANCE_LEVEL_1)||e.normalisedUrlsMatch(t,s.ServiceProfile.IMAGE_1_LEVEL_1)||e.normalisedUrlsMatch(t,s.ServiceProfile.IMAGE_1_PROFILE_LEVEL_1)||e.normalisedUrlsMatch(t,s.ServiceProfile.IMAGE_2_LEVEL_1)||e.normalisedUrlsMatch(t,s.ServiceProfile.IMAGE_2_PROFILE_LEVEL_1))},e.isLevel2ImageProfile=function(t){return!!(e.normalisedUrlsMatch(t,s.ServiceProfile.IMAGE_0_COMPLIANCE_LEVEL_2)||e.normalisedUrlsMatch(t,s.ServiceProfile.IMAGE_1_COMPLIANCE_LEVEL_2)||e.normalisedUrlsMatch(t,s.ServiceProfile.IMAGE_0_CONFORMANCE_LEVEL_2)||e.normalisedUrlsMatch(t,s.ServiceProfile.IMAGE_1_CONFORMANCE_LEVEL_2)||e.normalisedUrlsMatch(t,s.ServiceProfile.IMAGE_1_LEVEL_2)||e.normalisedUrlsMatch(t,s.ServiceProfile.IMAGE_1_PROFILE_LEVEL_2)||e.normalisedUrlsMatch(t,s.ServiceProfile.IMAGE_2_LEVEL_2)||e.normalisedUrlsMatch(t,s.ServiceProfile.IMAGE_2_PROFILE_LEVEL_2))},e.parseManifest=function(e,t){return o.Deserialiser.parse(e,t)},e.checkStatus=function(e){if(e.ok)return e;var t=new Error(e.statusText);return t.response=e,Promise.reject(t)},e.loadManifest=function(t){return new Promise((function(n){fetch(t).then(e.checkStatus).then((function(e){return e.json()})).then((function(e){n(e)}))}))},e.loadExternalResourcesAuth1=function(t,n,r,i,o,s,a,u){return new Promise((function(c,l){var p=t.map((function(t){return e.loadExternalResourceAuth1(t,n,r,i,o,s,a,u)}));Promise.all(p).then((function(){c(t)})).catch((function(e){l(e)}))}))},e.loadExternalResourceAuth1=function(t,n,o,s,u,c,l,p){return r(this,void 0,void 0,(function(){var r;return i(this,(function(i){switch(i.label){case 0:return[4,s(t)];case 1:return(r=i.sent())?[4,t.getData(r)]:[3,6];case 2:return i.sent(),t.status!==a.OK?[3,3]:[2,t];case 3:return[4,e.doAuthChain(t,n,o,u,c,l,p)];case 4:i.sent(),i.label=5;case 5:if(t.status===a.OK||t.status===a.MOVED_TEMPORARILY)return[2,t];throw e.createAuthorizationFailedError();case 6:return[4,t.getData()];case 7:return i.sent(),t.status!==a.MOVED_TEMPORARILY&&t.status!==a.UNAUTHORIZED?[3,9]:[4,e.doAuthChain(t,n,o,u,c,l,p)];case 8:i.sent(),i.label=9;case 9:if(t.status===a.OK||t.status===a.MOVED_TEMPORARILY)return[2,t];throw e.createAuthorizationFailedError()}}))}))},e.doAuthChain=function(t,n,o,s,u,c,l){return r(this,void 0,void 0,(function(){var r,p,f,h,_,g,d,E;return i(this,(function(i){switch(i.label){case 0:return t.isAccessControlled()?((r=t.externalService)&&(r.options=t.options),(p=t.kioskService)&&(p.options=t.options),(f=t.clickThroughService)&&(f.options=t.options),(h=t.loginService)&&(h.options=t.options),t.isResponseHandled||t.status!==a.MOVED_TEMPORARILY?[3,2]:[4,c(t)]):[2,t];case 1:return i.sent(),[2,t];case 2:return _=null,g=null,(_=r)?(g=_,[4,e.attemptResourceWithToken(t,o,_)]):[3,4];case 3:return i.sent(),[2,t];case 4:return(_=p)?(g=_,(d=n(_))?[4,s(d)]:[3,7]):[3,7];case 5:return i.sent(),[4,e.attemptResourceWithToken(t,o,_)];case 6:return i.sent(),[2,t];case 7:return(_=f)?(g=_,[4,u(t,_)]):[3,11];case 8:return(E=i.sent())?[4,s(E)]:[3,11];case 9:return i.sent(),[4,e.attemptResourceWithToken(t,o,_)];case 10:return i.sent(),[2,t];case 11:return(_=h)?(g=_,[4,u(t,_)]):[3,15];case 12:return(E=i.sent())?[4,s(E)]:[3,15];case 13:return i.sent(),[4,e.attemptResourceWithToken(t,o,_)];case 14:return i.sent(),[2,t];case 15:return g&&l(t,g),[2]}}))}))},e.attemptResourceWithToken=function(e,t,n){return r(this,void 0,void 0,(function(){var r,o;return i(this,(function(i){switch(i.label){case 0:return(r=n.getService(s.ServiceProfile.AUTH_1_TOKEN))?[4,t(e,r)]:[3,3];case 1:return(o=i.sent())&&o.accessToken?[4,e.getData(o)]:[3,3];case 2:return i.sent(),[2,e];case 3:return[2]}}))}))},e.loadExternalResourcesAuth09=function(t,n,r,i,o,s,a,u,c,l){return new Promise((function(p,f){var h=t.map((function(t){return e.loadExternalResourceAuth09(t,n,r,i,o,s,a,u,c,l)}));Promise.all(h).then((function(){p(t)})).catch((function(e){f(e)}))}))},e.loadExternalResourceAuth09=function(t,n,r,i,o,s,u,c,l,p){return new Promise((function(f,h){p&&p.pessimisticAccessControl?t.getData().then((function(){t.isAccessControlled()?t.clickThroughService?(f(r(t)),f(i(t))):o(t).then((function(){s(t,!0).then((function(n){t.getData(n).then((function(){f(l(t))})).catch((function(t){h(e.createInternalServerError(t))}))})).catch((function(t){h(e.createInternalServerError(t))}))})).catch((function(t){h(e.createInternalServerError(t))})):f(t)})).catch((function(t){h(e.createInternalServerError(t))})):c(t,n).then((function(p){p?t.getData(p).then((function(){t.status===a.OK?f(l(t)):e.authorize(t,n,r,i,o,s,u,c).then((function(){f(l(t))})).catch((function(t){h(e.createAuthorizationFailedError())}))})).catch((function(t){h(e.createAuthorizationFailedError())})):e.authorize(t,n,r,i,o,s,u,c).then((function(){f(l(t))})).catch((function(t){h(e.createAuthorizationFailedError())}))})).catch((function(t){h(e.createAuthorizationFailedError())}))}))},e.createError=function(e,t){var n=new Error;return n.message=t,n.name=String(e),n},e.createAuthorizationFailedError=function(){return e.createError(o.StatusCode.AUTHORIZATION_FAILED,\"Authorization failed\")},e.createRestrictedError=function(){return e.createError(o.StatusCode.RESTRICTED,\"Restricted\")},e.createInternalServerError=function(t){return e.createError(o.StatusCode.INTERNAL_SERVER_ERROR,t)},e.authorize=function(t,n,r,i,o,s,u,c){return new Promise((function(l,p){t.getData().then((function(){t.isAccessControlled()?c(t,n).then((function(c){c?t.getData(c).then((function(){t.status===a.OK?l(t):e.showAuthInteraction(t,n,r,i,o,s,u,l,p)})).catch((function(t){p(e.createInternalServerError(t))})):s(t,!1).then((function(c){c?u(t,c,n).then((function(){t.getData(c).then((function(){t.status===a.OK?l(t):e.showAuthInteraction(t,n,r,i,o,s,u,l,p)})).catch((function(t){p(e.createInternalServerError(t))}))})).catch((function(t){p(e.createInternalServerError(t))})):e.showAuthInteraction(t,n,r,i,o,s,u,l,p)}))})).catch((function(t){p(e.createInternalServerError(t))})):l(t)}))}))},e.showAuthInteraction=function(t,n,r,i,o,s,u,c,l){t.status!==a.MOVED_TEMPORARILY||t.isResponseHandled?t.clickThroughService&&!t.isResponseHandled?r(t).then((function(){s(t,!0).then((function(r){u(t,r,n).then((function(){t.getData(r).then((function(){c(t)})).catch((function(t){l(e.createInternalServerError(t))}))})).catch((function(t){l(e.createInternalServerError(t))}))})).catch((function(t){l(e.createInternalServerError(t))}))})):o(t).then((function(){s(t,!0).then((function(r){u(t,r,n).then((function(){t.getData(r).then((function(){c(t)})).catch((function(t){l(e.createInternalServerError(t))}))})).catch((function(t){l(e.createInternalServerError(t))}))})).catch((function(t){l(e.createInternalServerError(t))}))})):c(t)},e.getService=function(e,t){for(var n=this.getServices(e),r=0;r<n.length;r++){var i=n[r];if(i.getProfile()===t)return i}return null},e.getResourceById=function(t,n){return e.traverseAndFind(t.__jsonld,\"@id\",n)},e.traverseAndFind=function(t,n,r){if(t.hasOwnProperty(n)&&t[n]===r)return t;for(var i=0;i<Object.keys(t).length;i++)if(\"object\"==typeof t[Object.keys(t)[i]]){var o=e.traverseAndFind(t[Object.keys(t)[i]],n,r);if(null!=o)return o}},e.getServices=function(e){var t,n=[];if(!(t=e.__jsonld?e.__jsonld.service:e.service))return n;Array.isArray(t)||(t=[t]);for(var r=0;r<t.length;r++){var i=t[r];if(\"string\"==typeof i){var s=this.getResourceById(e.options.resource,i);s&&n.push(new o.Service(s.__jsonld||s,e.options))}else n.push(new o.Service(i,e.options))}return n},e.getTemporalComponent=function(e){var t=/t=([^&]+)/g.exec(e),n=null;return t&&t[1]&&(n=t[1].split(\",\")),n},e}();t.Utils=u},function(e,t,n){\"use strict\";n.r(t),t.default=function(e,t){return t=t||{},new Promise((function(n,r){var i=new XMLHttpRequest,o=[],s=[],a={},u=function(){return{ok:2==(i.status/100|0),statusText:i.statusText,status:i.status,url:i.responseURL,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(JSON.parse(i.responseText))},blob:function(){return Promise.resolve(new Blob([i.response]))},clone:u,headers:{keys:function(){return o},entries:function(){return s},get:function(e){return a[e.toLowerCase()]},has:function(e){return e.toLowerCase()in a}}}};for(var c in i.open(t.method||\"get\",e,!0),i.onload=function(){i.getAllResponseHeaders().replace(/^(.*?):[^\\S\\n]*([\\s\\S]*?)$/gm,(function(e,t,n){o.push(t=t.toLowerCase()),s.push([t,n]),a[t]=a[t]?a[t]+\",\"+n:n})),n(u())},i.onerror=r,i.withCredentials=\"include\"==t.credentials,t.headers)i.setRequestHeader(c,t.headers[c]);i.send(t.body||null)}))}},function(e,t,n){e.exports=n(5)},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(0));var r=n(2);t.loadManifest=function(e){return r.Utils.loadManifest(e)},t.parseManifest=function(e,t){return r.Utils.parseManifest(e,t)}},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=function(){function e(e){this.__jsonld=e,this.context=this.getProperty(\"context\"),this.id=this.getProperty(\"id\")}return e.prototype.getProperty=function(e){var t=null;return this.__jsonld&&((t=this.__jsonld[e])||(t=this.__jsonld[\"@\"+e])),t},e}();t.JSONLDResource=r},function(e,t,n){\"use strict\";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,\"__esModule\",{value:!0});var o=n(0),s=n(1),a=function(e){function t(t,n){var r=e.call(this,t)||this;return r.options=n,r}return i(t,e),t.prototype.getIIIFResourceType=function(){return o.Utils.normaliseType(this.getProperty(\"type\"))},t.prototype.getLabel=function(){var e=this.getProperty(\"label\");return e?o.LanguageMap.parse(e,this.options.locale):[]},t.prototype.getDefaultLabel=function(){return o.LanguageMap.getValue(this.getLabel())},t.prototype.getMetadata=function(){var e=this.getProperty(\"metadata\"),t=[];if(!e)return t;for(var n=0;n<e.length;n++){var r=e[n],i=new o.LabelValuePair(this.options.locale);i.parse(r),t.push(i)}return t},t.prototype.getRendering=function(e){for(var t=this.getRenderings(),n=0;n<t.length;n++){var r=t[n];if(r.getFormat()===e)return r}return null},t.prototype.getRenderings=function(){var e,t=[];if(!(e=this.__jsonld?this.__jsonld.rendering:this.rendering))return t;Array.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++){var r=e[n];t.push(new o.Rendering(r,this.options))}return t},t.prototype.getService=function(e){return o.Utils.getService(this,e)},t.prototype.getServices=function(){return o.Utils.getServices(this)},t.prototype.getThumbnail=function(){var e=this.getProperty(\"thumbnail\");return Array.isArray(e)&&(e=e[0]),e?new o.Thumbnail(e,this.options):null},t.prototype.isAnnotation=function(){return this.getIIIFResourceType()===s.IIIFResourceType.ANNOTATION},t.prototype.isCanvas=function(){return this.getIIIFResourceType()===s.IIIFResourceType.CANVAS},t.prototype.isCollection=function(){return this.getIIIFResourceType()===s.IIIFResourceType.COLLECTION},t.prototype.isManifest=function(){return this.getIIIFResourceType()===s.IIIFResourceType.MANIFEST},t.prototype.isRange=function(){return this.getIIIFResourceType()===s.IIIFResourceType.RANGE},t.prototype.isSequence=function(){return this.getIIIFResourceType()===s.IIIFResourceType.SEQUENCE},t}(o.JSONLDResource);t.ManifestResource=a},function(e,t,n){\"use strict\";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,\"__esModule\",{value:!0});var o=n(0),s=function(e){function t(t,n){return e.call(this,t,n)||this}return i(t,e),t.prototype.getFormat=function(){var e=this.getProperty(\"format\");return e?e.toLowerCase():null},t.prototype.getResources=function(){var e=[];if(!this.__jsonld.resources)return e;for(var t=0;t<this.__jsonld.resources.length;t++){var n=this.__jsonld.resources[t],r=new o.Annotation(n,this.options);e.push(r)}return e},t.prototype.getType=function(){var e=this.getProperty(\"type\");return e?o.Utils.normaliseType(e):null},t.prototype.getWidth=function(){return this.getProperty(\"width\")},t.prototype.getHeight=function(){return this.getProperty(\"height\")},t.prototype.getMaxWidth=function(){return this.getProperty(\"maxWidth\")},t.prototype.getMaxHeight=function(){return this.getProperty(\"maxHeight\")?null:this.getMaxWidth()},t}(o.ManifestResource);t.Resource=s},function(e,t,n){\"use strict\";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,\"__esModule\",{value:!0});var o=n(0),s=n(1),a=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.index=-1,r.isLoaded=!1;var i={defaultLabel:\"-\",locale:\"en-GB\",resource:r,pessimisticAccessControl:!1};return r.options=Object.assign(i,n),r}return i(t,e),t.prototype.getAttribution=function(){var e=this.getProperty(\"attribution\");return e?o.LanguageMap.parse(e,this.options.locale):[]},t.prototype.getDescription=function(){var e=this.getProperty(\"description\");return e?o.LanguageMap.parse(e,this.options.locale):[]},t.prototype.getIIIFResourceType=function(){return o.Utils.normaliseType(this.getProperty(\"type\"))},t.prototype.getLogo=function(){var e=this.getProperty(\"logo\");return e?\"string\"==typeof e?e:(Array.isArray(e)&&e.length&&(e=e[0]),e[\"@id\"]||e.id):null},t.prototype.getLicense=function(){return o.Utils.getLocalisedValue(this.getProperty(\"license\"),this.options.locale)},t.prototype.getNavDate=function(){return new Date(this.getProperty(\"navDate\"))},t.prototype.getRelated=function(){return this.getProperty(\"related\")},t.prototype.getSeeAlso=function(){return this.getProperty(\"seeAlso\")},t.prototype.getTrackingLabel=function(){var e=this.getService(s.ServiceProfile.TRACKING_EXTENSIONS);return e?e.getProperty(\"trackingLabel\"):\"\"},t.prototype.getDefaultTree=function(){return this.defaultTree=new o.TreeNode(\"root\"),this.defaultTree.data=this,this.defaultTree},t.prototype.getRequiredStatement=function(){var e=null,t=this.getProperty(\"requiredStatement\");if(t)(e=new o.LabelValuePair(this.options.locale)).parse(t);else{var n=this.getAttribution();n&&((e=new o.LabelValuePair(this.options.locale)).value=n)}return e},t.prototype.isCollection=function(){return this.getIIIFResourceType()===s.IIIFResourceType.COLLECTION},t.prototype.isManifest=function(){return this.getIIIFResourceType()===s.IIIFResourceType.MANIFEST},t.prototype.load=function(){var e=this;return new Promise((function(t){if(e.isLoaded)t(e);else{var n=e.options;n.navDate=e.getNavDate();var r=e.__jsonld.id;r||(r=e.__jsonld[\"@id\"]),o.Utils.loadManifest(r).then((function(r){e.parentLabel=o.LanguageMap.getValue(e.getLabel(),n.locale);var i=o.Deserialiser.parse(r,n);(e=Object.assign(e,i)).index=n.index,t(e)}))}}))},t}(o.ManifestResource);t.IIIFResource=a},function(e,t,n){\"use strict\";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,\"__esModule\",{value:!0});var o=n(0),s=function(e){function t(t,n){return e.call(this,t,n)||this}return i(t,e),t.prototype.getBody=function(){var e=[],t=this.getProperty(\"body\");if(t)if(Array.isArray(t))for(var n=0;n<t.length;n++){if((s=t[n]).items)for(var r=0;r<s.items.length;r++){var i=s.items[r];e.push(new o.AnnotationBody(i,this.options))}else e.push(new o.AnnotationBody(s,this.options))}else if(t.items)for(n=0;n<t.items.length;n++){var s=t.items[n];e.push(new o.AnnotationBody(s,this.options))}else e.push(new o.AnnotationBody(t,this.options));return e},t.prototype.getMotivation=function(){var e=this.getProperty(\"motivation\");return e||null},t.prototype.getOn=function(){return this.getProperty(\"on\")},t.prototype.getTarget=function(){return this.getProperty(\"target\")},t.prototype.getResource=function(){return new o.Resource(this.getProperty(\"resource\"),this.options)},t}(o.ManifestResource);t.Annotation=s},function(e,t,n){\"use strict\";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,\"__esModule\",{value:!0});var o=n(0),s=function(e){function t(t,n){return e.call(this,t,n)||this}return i(t,e),t.prototype.getFormat=function(){var e=this.getProperty(\"format\");return e?o.Utils.getMediaType(e):null},t.prototype.getType=function(){return this.getProperty(\"type\")?o.Utils.normaliseType(this.getProperty(\"type\")):null},t.prototype.getWidth=function(){return this.getProperty(\"width\")},t.prototype.getHeight=function(){return this.getProperty(\"height\")},t}(o.ManifestResource);t.AnnotationBody=s},function(e,t,n){\"use strict\";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,\"__esModule\",{value:!0});var o=n(0),s=function(e){function t(t,n,r){var i=e.call(this,n)||this;return i.label=t,i.options=r,i}return i(t,e),t.prototype.getIIIFResourceType=function(){return o.Utils.normaliseType(this.getProperty(\"type\"))},t.prototype.getLabel=function(){return this.label},t.prototype.getResources=function(){var e=this;return this.getProperty(\"resources\").map((function(t){return new o.Annotation(t,e.options)}))},t.prototype.load=function(){var e=this;return new Promise((function(t,n){if(e.isLoaded)t(e);else{var r=e.__jsonld.id;r||(r=e.__jsonld[\"@id\"]),o.Utils.loadManifest(r).then((function(n){e.__jsonld=n,e.context=e.getProperty(\"context\"),e.id=e.getProperty(\"id\"),e.isLoaded=!0,t(e)})).catch(n)}}))},t}(o.JSONLDResource);t.AnnotationList=s},function(e,t,n){\"use strict\";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,\"__esModule\",{value:!0});var o=function(e){function t(t,n){return e.call(this,t,n)||this}return i(t,e),t.prototype.getItems=function(){return this.getProperty(\"items\")},t}(n(0).ManifestResource);t.AnnotationPage=o},function(e,t,n){\"use strict\";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,\"__esModule\",{value:!0});var o=n(0),s=function(e){function t(t,n){return e.call(this,t,n)||this}return i(t,e),t.prototype.getCanonicalImageUri=function(e){var t,n=null,r=\"default\",i=e;if(this.externalResource&&this.externalResource.data&&this.externalResource.data[\"@id\"])n=this.externalResource.data[\"@id\"],i||(i=this.externalResource.data.width),this.externalResource.data[\"@context\"]&&(this.externalResource.data[\"@context\"].indexOf(\"/1.0/context.json\")>-1||this.externalResource.data[\"@context\"].indexOf(\"/1.1/context.json\")>-1||this.externalResource.data[\"@context\"].indexOf(\"/1/context.json\")>-1)&&(r=\"native\");else{var s=this.getImages();if(s&&s.length){var a=s[0].getResource(),u=a.getServices();if(i||(i=a.getWidth()),u.length){var c=u[0];n=c.id,r=o.Utils.getImageQuality(c.getProfile())}else if(i===a.getWidth())return a.id}if(!n){var l=this.getProperty(\"thumbnail\");if(l){if(\"string\"==typeof l)return l;if(l[\"@id\"])return l[\"@id\"];if(l.length)return l[0].id}}}return t=i+\",\",n&&n.endsWith(\"/\")&&(n=n.substr(0,n.length-1)),[n,\"full\",t,0,r+\".jpg\"].join(\"/\")},t.prototype.getMaxDimensions=function(){var e,t=null;return this.externalResource&&this.externalResource.data&&this.externalResource.data.profile&&(e=this.externalResource.data.profile,Array.isArray(e)&&(e=e.filter((function(e){return e.maxWidth}))[0])&&(t=new o.Size(e.maxWidth,e.maxHeight?e.maxHeight:e.maxWidth))),t},t.prototype.getContent=function(){var e=[],t=this.__jsonld.items||this.__jsonld.content;if(!t)return e;var n=null;if(t.length&&(n=new o.AnnotationPage(t[0],this.options)),!n)return e;for(var r=n.getItems(),i=0;i<r.length;i++){var s=r[i],a=new o.Annotation(s,this.options);e.push(a)}return e},t.prototype.getDuration=function(){return this.getProperty(\"duration\")},t.prototype.getImages=function(){var e=[];if(!this.__jsonld.images)return e;for(var t=0;t<this.__jsonld.images.length;t++){var n=this.__jsonld.images[t],r=new o.Annotation(n,this.options);e.push(r)}return e},t.prototype.getIndex=function(){return this.getProperty(\"index\")},t.prototype.getOtherContent=function(){var e=this,t=Array.isArray(this.getProperty(\"otherContent\"))?this.getProperty(\"otherContent\"):[this.getProperty(\"otherContent\")],n=t.filter((function(e){return e&&(t=e[\"@type\"],n=\"sc:AnnotationList\",\"string\"==typeof t&&\"string\"==typeof n&&t.toLowerCase()==t.toLowerCase());var t,n})).map((function(t,n){return new o.AnnotationList(t.label||\"Annotation list \"+n,t,e.options)})).map((function(e){return e.load()}));return Promise.all(n)},t.prototype.getWidth=function(){return this.getProperty(\"width\")},t.prototype.getHeight=function(){return this.getProperty(\"height\")},t}(o.Resource);t.Canvas=s},function(e,t,n){\"use strict\";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,\"__esModule\",{value:!0});var o=n(1),s=n(0),a=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.items=[],r._collections=null,r._manifests=null,t.__collection=r,r}return i(t,e),t.prototype.getCollections=function(){return this._collections?this._collections:this._collections=this.items.filter((function(e){return e.isCollection()}))},t.prototype.getManifests=function(){return this._manifests?this._manifests:this._manifests=this.items.filter((function(e){return e.isManifest()}))},t.prototype.getCollectionByIndex=function(e){for(var t,n=this.getCollections(),r=0;r<n.length;r++){var i=n[r];i.index===e&&(t=i)}if(t)return t.options.index=e,t.load();throw new Error(\"Collection index not found\")},t.prototype.getManifestByIndex=function(e){for(var t,n=this.getManifests(),r=0;r<n.length;r++){var i=n[r];i.index===e&&(t=i)}if(t)return t.options.index=e,t.load();throw new Error(\"Manifest index not found\")},t.prototype.getTotalCollections=function(){return this.getCollections().length},t.prototype.getTotalManifests=function(){return this.getManifests().length},t.prototype.getTotalItems=function(){return this.items.length},t.prototype.getViewingDirection=function(){return this.getProperty(\"viewingDirection\")?this.getProperty(\"viewingDirection\"):o.ViewingDirection.LEFT_TO_RIGHT},t.prototype.getDefaultTree=function(){return e.prototype.getDefaultTree.call(this),this.defaultTree.data.type=s.Utils.normaliseType(s.TreeNodeType.COLLECTION),this._parseManifests(this),this._parseCollections(this),s.Utils.generateTreeNodeIds(this.defaultTree),this.defaultTree},t.prototype._parseManifests=function(e){if(e.getManifests()&&e.getManifests().length)for(var t=0;t<e.getManifests().length;t++){var n=e.getManifests()[t],r=n.getDefaultTree();r.label=n.parentLabel||s.LanguageMap.getValue(n.getLabel(),this.options.locale)||\"manifest \"+(t+1),r.navDate=n.getNavDate(),r.data.id=n.id,r.data.type=s.Utils.normaliseType(s.TreeNodeType.MANIFEST),e.defaultTree.addNode(r)}},t.prototype._parseCollections=function(e){if(e.getCollections()&&e.getCollections().length)for(var t=0;t<e.getCollections().length;t++){var n=e.getCollections()[t],r=n.getDefaultTree();r.label=n.parentLabel||s.LanguageMap.getValue(n.getLabel(),this.options.locale)||\"collection \"+(t+1),r.navDate=n.getNavDate(),r.data.id=n.id,r.data.type=s.Utils.normaliseType(s.TreeNodeType.COLLECTION),e.defaultTree.addNode(r)}},t}(s.IIIFResource);t.Collection=a},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=function(){function e(e,t){this.start=e,this.end=t}return e.prototype.getLength=function(){return this.end-this.start},e}();t.Duration=r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(0),i=function(){function e(e){this.defaultLocale=e}return e.prototype.parse=function(e){this.resource=e,this.label=r.LanguageMap.parse(this.resource.label,this.defaultLocale),this.value=r.LanguageMap.parse(this.resource.value,this.defaultLocale)},e.prototype.getLabel=function(){return this.label?r.LanguageMap.getValue(this.label,this.defaultLocale):null},e.prototype.setLabel=function(e){var t=this;if(this.label&&this.label.length){var n=this.label.filter((function(e){return e.locale===t.defaultLocale||e.locale===r.Utils.getInexactLocale(t.defaultLocale)}))[0];n&&(n.value=e)}},e.prototype.getValue=function(){if(this.value){var e=this.defaultLocale;return this.label&&this.label.length&&this.label[0].locale&&(e=this.label[0].locale),r.LanguageMap.getValue(this.value,e)}return null},e.prototype.setValue=function(e){var t=this;if(this.value&&this.value.length){var n=this.value.filter((function(e){return e.locale===t.defaultLocale||e.locale===r.Utils.getInexactLocale(t.defaultLocale)}))[0];n&&(n.value=e)}},e}();t.LabelValuePair=i},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=function(e,t){Array.isArray(e)?1===e.length?this.value=e[0]:this.value=e.join(\"<br/>\"):this.value=e,this.locale=t};t.Language=r},function(e,t,n){\"use strict\";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,\"__esModule\",{value:!0});var o=n(0),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.parse=function(e,t){var n,r=[];if(!e)return r;if(Array.isArray(e))for(var i=0;i<e.length;i++){var s=e[i];n=\"string\"==typeof s?new o.Language(s,t):new o.Language(s[\"@value\"],s[\"@language\"]||t),r.push(n)}else{if(\"string\"==typeof e)return n=new o.Language(e,t),r.push(n),r;e[\"@value\"]?(n=new o.Language(e[\"@value\"],e[\"@language\"]||t),r.push(n)):Object.keys(e).forEach((function(t){if(!e[t].length)throw new Error(\"language must have a value\");n=new o.Language(e[t],t),r.push(n)}))}return r},t.getValue=function(e,t){if(e.length){if(t){var n=e.filter((function(e){return e.locale===t||o.Utils.getInexactLocale(e.locale)===o.Utils.getInexactLocale(t)}))[0];if(n)return n.value}return e[0].value}return null},t}(Array);t.LanguageMap=s},function(e,t,n){\"use strict\";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,\"__esModule\",{value:!0});var o=n(1),s=n(0),a=function(e){function t(t,n){var r=e.call(this,t,n)||this;if(r.index=0,r._allRanges=null,r.items=[],r._topRanges=[],r.__jsonld.structures&&r.__jsonld.structures.length)for(var i=r._getTopRanges(),o=0;o<i.length;o++){var s=i[o];r._parseRanges(s,String(o))}return r}return i(t,e),t.prototype.getPosterCanvas=function(){var e=this.getProperty(\"posterCanvas\");return e&&(e=new s.Canvas(e,this.options)),e},t.prototype.getBehavior=function(){var e=this.getProperty(\"behavior\");return Array.isArray(e)&&(e=e[0]),e||null},t.prototype.getDefaultTree=function(){if(e.prototype.getDefaultTree.call(this),this.defaultTree.data.type=s.Utils.normaliseType(s.TreeNodeType.MANIFEST),!this.isLoaded)return this.defaultTree;var t=this.getTopRanges();return t.length&&t[0].getTree(this.defaultTree),s.Utils.generateTreeNodeIds(this.defaultTree),this.defaultTree},t.prototype._getTopRanges=function(){var e=[];if(this.__jsonld.structures&&this.__jsonld.structures.length){for(var t=0;t<this.__jsonld.structures.length;t++){var n=this.__jsonld.structures[t];n.viewingHint===o.ViewingHint.TOP&&e.push(n)}if(!e.length){var r={};r.ranges=this.__jsonld.structures,e.push(r)}}return e},t.prototype.getTopRanges=function(){return this._topRanges},t.prototype._getRangeById=function(e){if(this.__jsonld.structures&&this.__jsonld.structures.length)for(var t=0;t<this.__jsonld.structures.length;t++){var n=this.__jsonld.structures[t];if(n[\"@id\"]===e||n.id===e)return n}return null},t.prototype._parseRanges=function(e,t,n){var r,i=null;if(\"string\"==typeof e&&(i=e,e=this._getRangeById(i)),e){(r=new s.Range(e,this.options)).parentRange=n,r.path=t,n?n.items.push(r):this._topRanges.push(r);var o=e.items||e.members;if(o)for(var a=0;a<o.length;a++){var u=o[a];if(u[\"@type\"]&&\"sc:range\"===u[\"@type\"].toLowerCase()||u.type&&\"range\"===u.type.toLowerCase())this._parseRanges(u,t+\"/\"+a,r);else if(u[\"@type\"]&&\"sc:canvas\"===u[\"@type\"].toLowerCase()||u.type&&\"canvas\"===u.type.toLowerCase()){r.canvases||(r.canvases=[]);var c=u.id||u[\"@id\"];r.canvases.push(c)}}else if(e.ranges)for(a=0;a<e.ranges.length;a++)this._parseRanges(e.ranges[a],t+\"/\"+a,r)}else console.warn(\"Range:\",i,\"does not exist\")},t.prototype.getAllRanges=function(){if(null!=this._allRanges)return this._allRanges;this._allRanges=[];for(var e=this.getTopRanges(),t=function(t){var r=e[t];r.id&&n._allRanges.push(r);var i=function(e,t){e.add(t);var n=t.getRanges();return n.length?n.reduce(i,e):e},o=Array.from(r.getRanges().reduce(i,new Set));n._allRanges=n._allRanges.concat(o)},n=this,r=0;r<e.length;r++)t(r);return this._allRanges},t.prototype.getRangeById=function(e){for(var t=this.getAllRanges(),n=0;n<t.length;n++){var r=t[n];if(r.id===e)return r}return null},t.prototype.getRangeByPath=function(e){for(var t=this.getAllRanges(),n=0;n<t.length;n++){var r=t[n];if(r.path===e)return r}return null},t.prototype.getSequences=function(){if(this.items.length)return this.items;var e=this.__jsonld.mediaSequences||this.__jsonld.sequences;if(e)for(var t=0;t<e.length;t++){var n=e[t],r=new s.Sequence(n,this.options);this.items.push(r)}else if(this.__jsonld.items){r=new s.Sequence(this.__jsonld.items,this.options);this.items.push(r)}return this.items},t.prototype.getSequenceByIndex=function(e){return this.getSequences()[e]},t.prototype.getTotalSequences=function(){return this.getSequences().length},t.prototype.getManifestType=function(){var e=this.getService(o.ServiceProfile.UI_EXTENSIONS);return e?e.getProperty(\"manifestType\"):s.ManifestType.EMPTY},t.prototype.isMultiSequence=function(){return this.getTotalSequences()>1},t.prototype.isPagingEnabled=function(){var e=this.getViewingHint();if(e)return e===o.ViewingHint.PAGED;var t=this.getBehavior();return!!t&&t===o.Behavior.PAGED},t.prototype.getViewingDirection=function(){return this.getProperty(\"viewingDirection\")},t.prototype.getViewingHint=function(){return this.getProperty(\"viewingHint\")},t}(s.IIIFResource);t.Manifest=a},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){e.EMPTY=\"\",e.MANUSCRIPT=\"manuscript\",e.MONOGRAPH=\"monograph\"}(t.ManifestType||(t.ManifestType={}))},function(e,t,n){\"use strict\";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,\"__esModule\",{value:!0});var o=n(0),s=n(1),a=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r._ranges=null,r.canvases=null,r.items=[],r}return i(t,e),t.prototype.getCanvasIds=function(){return this.__jsonld.canvases?this.__jsonld.canvases:this.canvases?this.canvases:[]},t.prototype.getDuration=function(){var e,t;if(this.canvases&&this.canvases.length)for(var n=0;n<this.canvases.length;n++){var r=this.canvases[n],i=o.Utils.getTemporalComponent(r);i&&i.length>1&&(0===n&&(e=Number(i[0])),n===this.canvases.length-1&&(t=Number(i[1])))}else{var s=this.getRanges();for(n=0;n<s.length;n++){var a=s[n].getDuration();a&&(0===n&&(e=a.start),n===s.length-1&&(t=a.end))}}if(void 0!==e&&void 0!==t)return new o.Duration(e,t)},t.prototype.getRanges=function(){return this._ranges?this._ranges:this._ranges=this.items.filter((function(e){return e.isRange()}))},t.prototype.getBehavior=function(){var e=this.getProperty(\"behavior\");return Array.isArray(e)&&(e=e[0]),e||null},t.prototype.getViewingDirection=function(){return this.getProperty(\"viewingDirection\")},t.prototype.getViewingHint=function(){return this.getProperty(\"viewingHint\")},t.prototype.getTree=function(e){e.data=this,this.treeNode=e;var t=this.getRanges();if(t&&t.length)for(var n=0;n<t.length;n++){var r=t[n],i=new o.TreeNode;e.addNode(i),this._parseTreeNode(i,r)}return o.Utils.generateTreeNodeIds(e),e},t.prototype.spansTime=function(e){var t=this.getDuration();return!!(t&&e>=t.start&&e<=t.end)},t.prototype._parseTreeNode=function(e,t){e.label=o.LanguageMap.getValue(t.getLabel(),this.options.locale),e.data=t,e.data.type=o.Utils.normaliseType(o.TreeNodeType.RANGE),t.treeNode=e;var n=t.getRanges();if(n&&n.length)for(var r=0;r<n.length;r++){var i=n[r];if(i.getBehavior()!==s.Behavior.NO_NAV){var a=new o.TreeNode;e.addNode(a),this._parseTreeNode(a,i)}}},t}(o.ManifestResource);t.Range=a},function(e,t,n){\"use strict\";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,\"__esModule\",{value:!0});var o=function(e){function t(t,n){return e.call(this,t,n)||this}return i(t,e),t.prototype.getFormat=function(){return this.getProperty(\"format\")},t}(n(0).ManifestResource);t.Rendering=o},function(e,t,n){\"use strict\";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,\"__esModule\",{value:!0});var o=n(1),s=n(0),a=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.items=[],r._thumbnails=null,r}return i(t,e),t.prototype.getCanvases=function(){if(this.items.length)return this.items;var e=this.__jsonld.canvases||this.__jsonld.elements;if(e)for(var t=0;t<e.length;t++){var n=e[t];(r=new s.Canvas(n,this.options)).index=t,this.items.push(r)}else if(this.__jsonld)for(t=0;t<this.__jsonld.length;t++){var r;n=this.__jsonld[t];(r=new s.Canvas(n,this.options)).index=t,this.items.push(r)}return this.items},t.prototype.getCanvasById=function(e){for(var t=0;t<this.getTotalCanvases();t++){var n=this.getCanvasByIndex(t),r=s.Utils.normaliseUrl(n.id);if(s.Utils.normaliseUrl(e)===r)return n}return null},t.prototype.getCanvasByIndex=function(e){return this.getCanvases()[e]},t.prototype.getCanvasIndexById=function(e){for(var t=0;t<this.getTotalCanvases();t++){if(this.getCanvasByIndex(t).id===e)return t}return null},t.prototype.getCanvasIndexByLabel=function(e,t){e=e.trim(),isNaN(e)||(e=parseInt(e,10).toString(),t&&(e+=\"r\"));for(var n,r,i,o=/(\\d*)\\D+(\\d*)/,a=0;a<this.getTotalCanvases();a++){var u=this.getCanvasByIndex(a);if(s.LanguageMap.getValue(u.getLabel(),this.options.locale)===e)return a;if((n=o.exec(e))&&(r=n[1],(i=n[2])&&new RegExp(\"^\"+r+\"\\\\D+\"+i+\"$\").test(u.getLabel().toString())))return a}return-1},t.prototype.getLastCanvasLabel=function(e){for(var t=this.getTotalCanvases()-1;t>=0;t--){var n=this.getCanvasByIndex(t),r=s.LanguageMap.getValue(n.getLabel(),this.options.locale);if(e){if(/^[a-zA-Z0-9]*$/.test(r))return r}else if(r)return r}return this.options.defaultLabel},t.prototype.getLastPageIndex=function(){return this.getTotalCanvases()-1},t.prototype.getNextPageIndex=function(e,t){var n;if(t){var r=this.getPagedIndices(e),i=this.getViewingDirection();n=i&&i===o.ViewingDirection.RIGHT_TO_LEFT?r[0]+1:r[r.length-1]+1}else n=e+1;return n>this.getLastPageIndex()?-1:n},t.prototype.getPagedIndices=function(e,t){var n=[];if(t){n=this.isFirstCanvas(e)||this.isLastCanvas(e)?[e]:e%2?[e,e+1]:[e-1,e];var r=this.getViewingDirection();r&&r===o.ViewingDirection.RIGHT_TO_LEFT&&(n=n.reverse())}else n.push(e);return n},t.prototype.getPrevPageIndex=function(e,t){var n;if(t){var r=this.getPagedIndices(e),i=this.getViewingDirection();n=i&&i===o.ViewingDirection.RIGHT_TO_LEFT?r[r.length-1]-1:r[0]-1}else n=e-1;return n},t.prototype.getStartCanvasIndex=function(){var e=this.getStartCanvas();if(e)for(var t=0;t<this.getTotalCanvases();t++){if(this.getCanvasByIndex(t).id===e)return t}return 0},t.prototype.getThumbs=function(e,t){for(var n=[],r=this.getTotalCanvases(),i=0;i<r;i++){var o=this.getCanvasByIndex(i),a=new s.Thumb(e,o);n.push(a)}return n},t.prototype.getThumbnails=function(){if(null!=this._thumbnails)return this._thumbnails;this._thumbnails=[];for(var e=this.getCanvases(),t=0;t<e.length;t++){var n=e[t].getThumbnail();n&&this._thumbnails.push(n)}return this._thumbnails},t.prototype.getStartCanvas=function(){return this.getProperty(\"startCanvas\")},t.prototype.getTotalCanvases=function(){return this.getCanvases().length},t.prototype.getViewingDirection=function(){return this.getProperty(\"viewingDirection\")?this.getProperty(\"viewingDirection\"):this.options.resource.getViewingDirection?this.options.resource.getViewingDirection():null},t.prototype.getViewingHint=function(){return this.getProperty(\"viewingHint\")},t.prototype.isCanvasIndexOutOfRange=function(e){return e>this.getTotalCanvases()-1},t.prototype.isFirstCanvas=function(e){return 0===e},t.prototype.isLastCanvas=function(e){return e===this.getTotalCanvases()-1},t.prototype.isMultiCanvas=function(){return this.getTotalCanvases()>1},t.prototype.isPagingEnabled=function(){var e=this.getViewingHint();return!!e&&e===o.ViewingHint.PAGED},t.prototype.isTotalCanvasesEven=function(){return this.getTotalCanvases()%2==0},t}(s.ManifestResource);t.Sequence=a},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(0),i=function(){function e(){}return e.parse=function(e,t){return\"string\"==typeof e&&(e=JSON.parse(e)),this.parseJson(e,t)},e.parseJson=function(e,t){var n;if(t&&t.navDate&&!isNaN(t.navDate.getTime())&&(e.navDate=t.navDate.toString()),e[\"@type\"])switch(e[\"@type\"]){case\"sc:Collection\":n=this.parseCollection(e,t);break;case\"sc:Manifest\":n=this.parseManifest(e,t);break;default:return null}else switch(e.type){case\"Collection\":n=this.parseCollection(e,t);break;case\"Manifest\":n=this.parseManifest(e,t);break;default:return null}return n.isLoaded=!0,n},e.parseCollection=function(e,t){var n=new r.Collection(e,t);return t?(n.index=t.index||0,t.resource&&(n.parentCollection=t.resource.parentCollection)):n.index=0,this.parseCollections(n,t),this.parseManifests(n,t),this.parseItems(n,t),n},e.parseCollections=function(e,t){var n;if(e.__jsonld.collections?n=e.__jsonld.collections:e.__jsonld.items&&(n=e.__jsonld.items.filter((function(e){return\"collection\"===e.type.toLowerCase()}))),n)for(var r=0;r<n.length;r++){t&&(t.index=r);var i=this.parseCollection(n[r],t);i.index=r,i.parentCollection=e,e.items.push(i)}},e.parseManifest=function(e,t){return new r.Manifest(e,t)},e.parseManifests=function(e,t){var n;if(e.__jsonld.manifests?n=e.__jsonld.manifests:e.__jsonld.items&&(n=e.__jsonld.items.filter((function(e){return\"manifest\"===e.type.toLowerCase()}))),n)for(var r=0;r<n.length;r++){var i=this.parseManifest(n[r],t);i.index=r,i.parentCollection=e,e.items.push(i)}},e.parseItem=function(e,t){if(e[\"@type\"]){if(\"sc:manifest\"===e[\"@type\"].toLowerCase())return this.parseManifest(e,t);if(\"sc:collection\"===e[\"@type\"].toLowerCase())return this.parseCollection(e,t)}else if(e.type){if(\"manifest\"===e.type.toLowerCase())return this.parseManifest(e,t);if(\"collection\"===e.type.toLowerCase())return this.parseCollection(e,t)}return null},e.parseItems=function(e,t){var n=e.__jsonld.members||e.__jsonld.items;if(n)for(var r=function(r){t&&(t.index=r);var o=i.parseItem(n[r],t);return o?e.items.filter((function(e){return e.id===o.id}))[0]?\"continue\":(o.index=r,o.parentCollection=e,void e.items.push(o)):{value:void 0}},i=this,o=0;o<n.length;o++){var s=r(o);if(\"object\"==typeof s)return s.value}},e}();t.Deserialiser=i},function(e,t,n){\"use strict\";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,\"__esModule\",{value:!0});var o=n(0),s=function(e){function t(t,n){return e.call(this,t,n)||this}return i(t,e),t.prototype.getProfile=function(){var e=this.getProperty(\"profile\");return e||(e=this.getProperty(\"dcterms:conformsTo\")),Array.isArray(e)?e[0]:e},t.prototype.getConfirmLabel=function(){return o.Utils.getLocalisedValue(this.getProperty(\"confirmLabel\"),this.options.locale)},t.prototype.getDescription=function(){return o.Utils.getLocalisedValue(this.getProperty(\"description\"),this.options.locale)},t.prototype.getFailureDescription=function(){return o.Utils.getLocalisedValue(this.getProperty(\"failureDescription\"),this.options.locale)},t.prototype.getFailureHeader=function(){return o.Utils.getLocalisedValue(this.getProperty(\"failureHeader\"),this.options.locale)},t.prototype.getHeader=function(){return o.Utils.getLocalisedValue(this.getProperty(\"header\"),this.options.locale)},t.prototype.getServiceLabel=function(){return o.Utils.getLocalisedValue(this.getProperty(\"label\"),this.options.locale)},t.prototype.getInfoUri=function(){var e=this.id;return e.endsWith(\"/\")||(e+=\"/\"),e+=\"info.json\"},t}(o.ManifestResource);t.Service=s},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=function(e,t){this.width=e,this.height=t};t.Size=r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){e[e.AUTHORIZATION_FAILED=1]=\"AUTHORIZATION_FAILED\",e[e.FORBIDDEN=2]=\"FORBIDDEN\",e[e.INTERNAL_SERVER_ERROR=3]=\"INTERNAL_SERVER_ERROR\",e[e.RESTRICTED=4]=\"RESTRICTED\"}(t.StatusCode||(t.StatusCode={}))},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(0),i=function(e,t){this.data=t,this.index=t.index,this.width=e;var n=t.getHeight()/t.getWidth();this.height=n?Math.floor(this.width*n):e,this.uri=t.getCanonicalImageUri(e),this.label=r.LanguageMap.getValue(t.getLabel())};t.Thumb=i},function(e,t,n){\"use strict\";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,\"__esModule\",{value:!0});var o=function(e){function t(t,n){return e.call(this,t,n)||this}return i(t,e),t}(n(0).Resource);t.Thumbnail=o},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(0),i=function(){function e(e,t){this.label=e,this.data=t||{},this.nodes=[]}return e.prototype.addNode=function(e){this.nodes.push(e),e.parentNode=this},e.prototype.isCollection=function(){return this.data.type===r.Utils.normaliseType(r.TreeNodeType.COLLECTION)},e.prototype.isManifest=function(){return this.data.type===r.Utils.normaliseType(r.TreeNodeType.MANIFEST)},e.prototype.isRange=function(){return this.data.type===r.Utils.normaliseType(r.TreeNodeType.RANGE)},e}();t.TreeNode=i},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),function(e){e.COLLECTION=\"collection\",e.MANIFEST=\"manifest\",e.RANGE=\"range\"}(t.TreeNodeType||(t.TreeNodeType={}))},function(e,t,n){window,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.CONTINUE=100,t.SWITCHING_PROTOCOLS=101,t.PROCESSING=102,t.OK=200,t.CREATED=201,t.ACCEPTED=202,t.NON_AUTHORITATIVE_INFORMATION=203,t.NO_CONTENT=204,t.RESET_CONTENT=205,t.PARTIAL_CONTENT=206,t.MULTI_STATUS=207,t.MULTIPLE_CHOICES=300,t.MOVED_PERMANENTLY=301,t.MOVED_TEMPORARILY=302,t.SEE_OTHER=303,t.NOT_MODIFIED=304,t.USE_PROXY=305,t.TEMPORARY_REDIRECT=307,t.BAD_REQUEST=400,t.UNAUTHORIZED=401,t.PAYMENT_REQUIRED=402,t.FORBIDDEN=403,t.NOT_FOUND=404,t.METHOD_NOT_ALLOWED=405,t.NOT_ACCEPTABLE=406,t.PROXY_AUTHENTICATION_REQUIRED=407,t.REQUEST_TIME_OUT=408,t.CONFLICT=409,t.GONE=410,t.LENGTH_REQUIRED=411,t.PRECONDITION_FAILED=412,t.REQUEST_ENTITY_TOO_LARGE=413,t.REQUEST_URI_TOO_LARGE=414,t.UNSUPPORTED_MEDIA_TYPE=415,t.REQUESTED_RANGE_NOT_SATISFIABLE=416,t.EXPECTATION_FAILED=417,t.IM_A_TEAPOT=418,t.UNPROCESSABLE_ENTITY=422,t.LOCKED=423,t.FAILED_DEPENDENCY=424,t.UNORDERED_COLLECTION=425,t.UPGRADE_REQUIRED=426,t.PRECONDITION_REQUIRED=428,t.TOO_MANY_REQUESTS=429,t.REQUEST_HEADER_FIELDS_TOO_LARGE=431,t.INTERNAL_SERVER_ERROR=500,t.NOT_IMPLEMENTED=501,t.BAD_GATEWAY=502,t.SERVICE_UNAVAILABLE=503,t.GATEWAY_TIME_OUT=504,t.HTTP_VERSION_NOT_SUPPORTED=505,t.VARIANT_ALSO_NEGOTIATES=506,t.INSUFFICIENT_STORAGE=507,t.BANDWIDTH_LIMIT_EXCEEDED=509,t.NOT_EXTENDED=510,t.NETWORK_AUTHENTICATION_REQUIRED=511}])},function(e,t,n){e.exports=window.fetch||(window.fetch=n(3).default||n(3))}])}));","/**\n * default settings\n *\n * @author Zongmin Lei<leizongmin@gmail.com>\n */\n\nvar FilterCSS = require(\"cssfilter\").FilterCSS;\nvar getDefaultCSSWhiteList = require(\"cssfilter\").getDefaultWhiteList;\nvar _ = require(\"./util\");\n\nfunction getDefaultWhiteList() {\n  return {\n    a: [\"target\", \"href\", \"title\"],\n    abbr: [\"title\"],\n    address: [],\n    area: [\"shape\", \"coords\", \"href\", \"alt\"],\n    article: [],\n    aside: [],\n    audio: [\"autoplay\", \"controls\", \"loop\", \"preload\", \"src\"],\n    b: [],\n    bdi: [\"dir\"],\n    bdo: [\"dir\"],\n    big: [],\n    blockquote: [\"cite\"],\n    br: [],\n    caption: [],\n    center: [],\n    cite: [],\n    code: [],\n    col: [\"align\", \"valign\", \"span\", \"width\"],\n    colgroup: [\"align\", \"valign\", \"span\", \"width\"],\n    dd: [],\n    del: [\"datetime\"],\n    details: [\"open\"],\n    div: [],\n    dl: [],\n    dt: [],\n    em: [],\n    font: [\"color\", \"size\", \"face\"],\n    footer: [],\n    h1: [],\n    h2: [],\n    h3: [],\n    h4: [],\n    h5: [],\n    h6: [],\n    header: [],\n    hr: [],\n    i: [],\n    img: [\"src\", \"alt\", \"title\", \"width\", \"height\"],\n    ins: [\"datetime\"],\n    li: [],\n    mark: [],\n    nav: [],\n    ol: [],\n    p: [],\n    pre: [],\n    s: [],\n    section: [],\n    small: [],\n    span: [],\n    sub: [],\n    sup: [],\n    strong: [],\n    table: [\"width\", \"border\", \"align\", \"valign\"],\n    tbody: [\"align\", \"valign\"],\n    td: [\"width\", \"rowspan\", \"colspan\", \"align\", \"valign\"],\n    tfoot: [\"align\", \"valign\"],\n    th: [\"width\", \"rowspan\", \"colspan\", \"align\", \"valign\"],\n    thead: [\"align\", \"valign\"],\n    tr: [\"rowspan\", \"align\", \"valign\"],\n    tt: [],\n    u: [],\n    ul: [],\n    video: [\"autoplay\", \"controls\", \"loop\", \"preload\", \"src\", \"height\", \"width\"]\n  };\n}\n\nvar defaultCSSFilter = new FilterCSS();\n\n/**\n * default onTag function\n *\n * @param {String} tag\n * @param {String} html\n * @param {Object} options\n * @return {String}\n */\nfunction onTag(tag, html, options) {\n  // do nothing\n}\n\n/**\n * default onIgnoreTag function\n *\n * @param {String} tag\n * @param {String} html\n * @param {Object} options\n * @return {String}\n */\nfunction onIgnoreTag(tag, html, options) {\n  // do nothing\n}\n\n/**\n * default onTagAttr function\n *\n * @param {String} tag\n * @param {String} name\n * @param {String} value\n * @return {String}\n */\nfunction onTagAttr(tag, name, value) {\n  // do nothing\n}\n\n/**\n * default onIgnoreTagAttr function\n *\n * @param {String} tag\n * @param {String} name\n * @param {String} value\n * @return {String}\n */\nfunction onIgnoreTagAttr(tag, name, value) {\n  // do nothing\n}\n\n/**\n * default escapeHtml function\n *\n * @param {String} html\n */\nfunction escapeHtml(html) {\n  return html.replace(REGEXP_LT, \"&lt;\").replace(REGEXP_GT, \"&gt;\");\n}\n\n/**\n * default safeAttrValue function\n *\n * @param {String} tag\n * @param {String} name\n * @param {String} value\n * @param {Object} cssFilter\n * @return {String}\n */\nfunction safeAttrValue(tag, name, value, cssFilter) {\n  // unescape attribute value firstly\n  value = friendlyAttrValue(value);\n\n  if (name === \"href\" || name === \"src\") {\n    // filter `href` and `src` attribute\n    // only allow the value that starts with `http://` | `https://` | `mailto:` | `/` | `#`\n    value = _.trim(value);\n    if (value === \"#\") return \"#\";\n    if (\n      !(\n        value.substr(0, 7) === \"http://\" ||\n        value.substr(0, 8) === \"https://\" ||\n        value.substr(0, 7) === \"mailto:\" ||\n        value.substr(0, 4) === \"tel:\" ||\n        value[0] === \"#\" ||\n        value[0] === \"/\"\n      )\n    ) {\n      return \"\";\n    }\n  } else if (name === \"background\") {\n    // filter `background` attribute (maybe no use)\n    // `javascript:`\n    REGEXP_DEFAULT_ON_TAG_ATTR_4.lastIndex = 0;\n    if (REGEXP_DEFAULT_ON_TAG_ATTR_4.test(value)) {\n      return \"\";\n    }\n  } else if (name === \"style\") {\n    // `expression()`\n    REGEXP_DEFAULT_ON_TAG_ATTR_7.lastIndex = 0;\n    if (REGEXP_DEFAULT_ON_TAG_ATTR_7.test(value)) {\n      return \"\";\n    }\n    // `url()`\n    REGEXP_DEFAULT_ON_TAG_ATTR_8.lastIndex = 0;\n    if (REGEXP_DEFAULT_ON_TAG_ATTR_8.test(value)) {\n      REGEXP_DEFAULT_ON_TAG_ATTR_4.lastIndex = 0;\n      if (REGEXP_DEFAULT_ON_TAG_ATTR_4.test(value)) {\n        return \"\";\n      }\n    }\n    if (cssFilter !== false) {\n      cssFilter = cssFilter || defaultCSSFilter;\n      value = cssFilter.process(value);\n    }\n  }\n\n  // escape `<>\"` before returns\n  value = escapeAttrValue(value);\n  return value;\n}\n\n// RegExp list\nvar REGEXP_LT = /</g;\nvar REGEXP_GT = />/g;\nvar REGEXP_QUOTE = /\"/g;\nvar REGEXP_QUOTE_2 = /&quot;/g;\nvar REGEXP_ATTR_VALUE_1 = /&#([a-zA-Z0-9]*);?/gim;\nvar REGEXP_ATTR_VALUE_COLON = /&colon;?/gim;\nvar REGEXP_ATTR_VALUE_NEWLINE = /&newline;?/gim;\nvar REGEXP_DEFAULT_ON_TAG_ATTR_3 = /\\/\\*|\\*\\//gm;\nvar REGEXP_DEFAULT_ON_TAG_ATTR_4 = /((j\\s*a\\s*v\\s*a|v\\s*b|l\\s*i\\s*v\\s*e)\\s*s\\s*c\\s*r\\s*i\\s*p\\s*t\\s*|m\\s*o\\s*c\\s*h\\s*a)\\:/gi;\nvar REGEXP_DEFAULT_ON_TAG_ATTR_5 = /^[\\s\"'`]*(d\\s*a\\s*t\\s*a\\s*)\\:/gi;\nvar REGEXP_DEFAULT_ON_TAG_ATTR_6 = /^[\\s\"'`]*(d\\s*a\\s*t\\s*a\\s*)\\:\\s*image\\//gi;\nvar REGEXP_DEFAULT_ON_TAG_ATTR_7 = /e\\s*x\\s*p\\s*r\\s*e\\s*s\\s*s\\s*i\\s*o\\s*n\\s*\\(.*/gi;\nvar REGEXP_DEFAULT_ON_TAG_ATTR_8 = /u\\s*r\\s*l\\s*\\(.*/gi;\n\n/**\n * escape doube quote\n *\n * @param {String} str\n * @return {String} str\n */\nfunction escapeQuote(str) {\n  return str.replace(REGEXP_QUOTE, \"&quot;\");\n}\n\n/**\n * unescape double quote\n *\n * @param {String} str\n * @return {String} str\n */\nfunction unescapeQuote(str) {\n  return str.replace(REGEXP_QUOTE_2, '\"');\n}\n\n/**\n * escape html entities\n *\n * @param {String} str\n * @return {String}\n */\nfunction escapeHtmlEntities(str) {\n  return str.replace(REGEXP_ATTR_VALUE_1, function replaceUnicode(str, code) {\n    return code[0] === \"x\" || code[0] === \"X\"\n      ? String.fromCharCode(parseInt(code.substr(1), 16))\n      : String.fromCharCode(parseInt(code, 10));\n  });\n}\n\n/**\n * escape html5 new danger entities\n *\n * @param {String} str\n * @return {String}\n */\nfunction escapeDangerHtml5Entities(str) {\n  return str\n    .replace(REGEXP_ATTR_VALUE_COLON, \":\")\n    .replace(REGEXP_ATTR_VALUE_NEWLINE, \" \");\n}\n\n/**\n * clear nonprintable characters\n *\n * @param {String} str\n * @return {String}\n */\nfunction clearNonPrintableCharacter(str) {\n  var str2 = \"\";\n  for (var i = 0, len = str.length; i < len; i++) {\n    str2 += str.charCodeAt(i) < 32 ? \" \" : str.charAt(i);\n  }\n  return _.trim(str2);\n}\n\n/**\n * get friendly attribute value\n *\n * @param {String} str\n * @return {String}\n */\nfunction friendlyAttrValue(str) {\n  str = unescapeQuote(str);\n  str = escapeHtmlEntities(str);\n  str = escapeDangerHtml5Entities(str);\n  str = clearNonPrintableCharacter(str);\n  return str;\n}\n\n/**\n * unescape attribute value\n *\n * @param {String} str\n * @return {String}\n */\nfunction escapeAttrValue(str) {\n  str = escapeQuote(str);\n  str = escapeHtml(str);\n  return str;\n}\n\n/**\n * `onIgnoreTag` function for removing all the tags that are not in whitelist\n */\nfunction onIgnoreTagStripAll() {\n  return \"\";\n}\n\n/**\n * remove tag body\n * specify a `tags` list, if the tag is not in the `tags` list then process by the specify function (optional)\n *\n * @param {array} tags\n * @param {function} next\n */\nfunction StripTagBody(tags, next) {\n  if (typeof next !== \"function\") {\n    next = function() {};\n  }\n\n  var isRemoveAllTag = !Array.isArray(tags);\n  function isRemoveTag(tag) {\n    if (isRemoveAllTag) return true;\n    return _.indexOf(tags, tag) !== -1;\n  }\n\n  var removeList = [];\n  var posStart = false;\n\n  return {\n    onIgnoreTag: function(tag, html, options) {\n      if (isRemoveTag(tag)) {\n        if (options.isClosing) {\n          var ret = \"[/removed]\";\n          var end = options.position + ret.length;\n          removeList.push([\n            posStart !== false ? posStart : options.position,\n            end\n          ]);\n          posStart = false;\n          return ret;\n        } else {\n          if (!posStart) {\n            posStart = options.position;\n          }\n          return \"[removed]\";\n        }\n      } else {\n        return next(tag, html, options);\n      }\n    },\n    remove: function(html) {\n      var rethtml = \"\";\n      var lastPos = 0;\n      _.forEach(removeList, function(pos) {\n        rethtml += html.slice(lastPos, pos[0]);\n        lastPos = pos[1];\n      });\n      rethtml += html.slice(lastPos);\n      return rethtml;\n    }\n  };\n}\n\n/**\n * remove html comments\n *\n * @param {String} html\n * @return {String}\n */\nfunction stripCommentTag(html) {\n  return html.replace(STRIP_COMMENT_TAG_REGEXP, \"\");\n}\nvar STRIP_COMMENT_TAG_REGEXP = /<!--[\\s\\S]*?-->/g;\n\n/**\n * remove invisible characters\n *\n * @param {String} html\n * @return {String}\n */\nfunction stripBlankChar(html) {\n  var chars = html.split(\"\");\n  chars = chars.filter(function(char) {\n    var c = char.charCodeAt(0);\n    if (c === 127) return false;\n    if (c <= 31) {\n      if (c === 10 || c === 13) return true;\n      return false;\n    }\n    return true;\n  });\n  return chars.join(\"\");\n}\n\nexports.whiteList = getDefaultWhiteList();\nexports.getDefaultWhiteList = getDefaultWhiteList;\nexports.onTag = onTag;\nexports.onIgnoreTag = onIgnoreTag;\nexports.onTagAttr = onTagAttr;\nexports.onIgnoreTagAttr = onIgnoreTagAttr;\nexports.safeAttrValue = safeAttrValue;\nexports.escapeHtml = escapeHtml;\nexports.escapeQuote = escapeQuote;\nexports.unescapeQuote = unescapeQuote;\nexports.escapeHtmlEntities = escapeHtmlEntities;\nexports.escapeDangerHtml5Entities = escapeDangerHtml5Entities;\nexports.clearNonPrintableCharacter = clearNonPrintableCharacter;\nexports.friendlyAttrValue = friendlyAttrValue;\nexports.escapeAttrValue = escapeAttrValue;\nexports.onIgnoreTagStripAll = onIgnoreTagStripAll;\nexports.StripTagBody = StripTagBody;\nexports.stripCommentTag = stripCommentTag;\nexports.stripBlankChar = stripBlankChar;\nexports.cssFilter = defaultCSSFilter;\nexports.getDefaultCSSWhiteList = getDefaultCSSWhiteList;\n","/**\n * xss\n *\n * @author Zongmin Lei<leizongmin@gmail.com>\n */\n\nvar DEFAULT = require(\"./default\");\nvar parser = require(\"./parser\");\nvar FilterXSS = require(\"./xss\");\n\n/**\n * filter xss function\n *\n * @param {String} html\n * @param {Object} options { whiteList, onTag, onTagAttr, onIgnoreTag, onIgnoreTagAttr, safeAttrValue, escapeHtml }\n * @return {String}\n */\nfunction filterXSS(html, options) {\n  var xss = new FilterXSS(options);\n  return xss.process(html);\n}\n\nexports = module.exports = filterXSS;\nexports.FilterXSS = FilterXSS;\nfor (var i in DEFAULT) exports[i] = DEFAULT[i];\nfor (var i in parser) exports[i] = parser[i];\n\n// using `xss` on the browser, output `filterXSS` to the globals\nif (typeof window !== \"undefined\") {\n  window.filterXSS = module.exports;\n}\n\n// using `xss` on the WebWorker, output `filterXSS` to the globals\nfunction isWorkerEnv() {\n  return typeof self !== 'undefined' && typeof DedicatedWorkerGlobalScope !== 'undefined' && self instanceof DedicatedWorkerGlobalScope;\n}\nif (isWorkerEnv()) {\n  self.filterXSS = module.exports;\n}\n","/**\n * Simple HTML Parser\n *\n * @author Zongmin Lei<leizongmin@gmail.com>\n */\n\nvar _ = require(\"./util\");\n\n/**\n * get tag name\n *\n * @param {String} html e.g. '<a hef=\"#\">'\n * @return {String}\n */\nfunction getTagName(html) {\n  var i = _.spaceIndex(html);\n  if (i === -1) {\n    var tagName = html.slice(1, -1);\n  } else {\n    var tagName = html.slice(1, i + 1);\n  }\n  tagName = _.trim(tagName).toLowerCase();\n  if (tagName.slice(0, 1) === \"/\") tagName = tagName.slice(1);\n  if (tagName.slice(-1) === \"/\") tagName = tagName.slice(0, -1);\n  return tagName;\n}\n\n/**\n * is close tag?\n *\n * @param {String} html 如：'<a hef=\"#\">'\n * @return {Boolean}\n */\nfunction isClosing(html) {\n  return html.slice(0, 2) === \"</\";\n}\n\n/**\n * parse input html and returns processed html\n *\n * @param {String} html\n * @param {Function} onTag e.g. function (sourcePosition, position, tag, html, isClosing)\n * @param {Function} escapeHtml\n * @return {String}\n */\nfunction parseTag(html, onTag, escapeHtml) {\n  \"user strict\";\n\n  var rethtml = \"\";\n  var lastPos = 0;\n  var tagStart = false;\n  var quoteStart = false;\n  var currentPos = 0;\n  var len = html.length;\n  var currentTagName = \"\";\n  var currentHtml = \"\";\n\n  for (currentPos = 0; currentPos < len; currentPos++) {\n    var c = html.charAt(currentPos);\n    if (tagStart === false) {\n      if (c === \"<\") {\n        tagStart = currentPos;\n        continue;\n      }\n    } else {\n      if (quoteStart === false) {\n        if (c === \"<\") {\n          rethtml += escapeHtml(html.slice(lastPos, currentPos));\n          tagStart = currentPos;\n          lastPos = currentPos;\n          continue;\n        }\n        if (c === \">\") {\n          rethtml += escapeHtml(html.slice(lastPos, tagStart));\n          currentHtml = html.slice(tagStart, currentPos + 1);\n          currentTagName = getTagName(currentHtml);\n          rethtml += onTag(\n            tagStart,\n            rethtml.length,\n            currentTagName,\n            currentHtml,\n            isClosing(currentHtml)\n          );\n          lastPos = currentPos + 1;\n          tagStart = false;\n          continue;\n        }\n        if ((c === '\"' || c === \"'\") && html.charAt(currentPos - 1) === \"=\") {\n          quoteStart = c;\n          continue;\n        }\n      } else {\n        if (c === quoteStart) {\n          quoteStart = false;\n          continue;\n        }\n      }\n    }\n  }\n  if (lastPos < html.length) {\n    rethtml += escapeHtml(html.substr(lastPos));\n  }\n\n  return rethtml;\n}\n\nvar REGEXP_ILLEGAL_ATTR_NAME = /[^a-zA-Z0-9_:\\.\\-]/gim;\n\n/**\n * parse input attributes and returns processed attributes\n *\n * @param {String} html e.g. `href=\"#\" target=\"_blank\"`\n * @param {Function} onAttr e.g. `function (name, value)`\n * @return {String}\n */\nfunction parseAttr(html, onAttr) {\n  \"user strict\";\n\n  var lastPos = 0;\n  var retAttrs = [];\n  var tmpName = false;\n  var len = html.length;\n\n  function addAttr(name, value) {\n    name = _.trim(name);\n    name = name.replace(REGEXP_ILLEGAL_ATTR_NAME, \"\").toLowerCase();\n    if (name.length < 1) return;\n    var ret = onAttr(name, value || \"\");\n    if (ret) retAttrs.push(ret);\n  }\n\n  // 逐个分析字符\n  for (var i = 0; i < len; i++) {\n    var c = html.charAt(i);\n    var v, j;\n    if (tmpName === false && c === \"=\") {\n      tmpName = html.slice(lastPos, i);\n      lastPos = i + 1;\n      continue;\n    }\n    if (tmpName !== false) {\n      if (\n        i === lastPos &&\n        (c === '\"' || c === \"'\") &&\n        html.charAt(i - 1) === \"=\"\n      ) {\n        j = html.indexOf(c, i + 1);\n        if (j === -1) {\n          break;\n        } else {\n          v = _.trim(html.slice(lastPos + 1, j));\n          addAttr(tmpName, v);\n          tmpName = false;\n          i = j;\n          lastPos = i + 1;\n          continue;\n        }\n      }\n    }\n    if (/\\s|\\n|\\t/.test(c)) {\n      html = html.replace(/\\s|\\n|\\t/g, \" \");\n      if (tmpName === false) {\n        j = findNextEqual(html, i);\n        if (j === -1) {\n          v = _.trim(html.slice(lastPos, i));\n          addAttr(v);\n          tmpName = false;\n          lastPos = i + 1;\n          continue;\n        } else {\n          i = j - 1;\n          continue;\n        }\n      } else {\n        j = findBeforeEqual(html, i - 1);\n        if (j === -1) {\n          v = _.trim(html.slice(lastPos, i));\n          v = stripQuoteWrap(v);\n          addAttr(tmpName, v);\n          tmpName = false;\n          lastPos = i + 1;\n          continue;\n        } else {\n          continue;\n        }\n      }\n    }\n  }\n\n  if (lastPos < html.length) {\n    if (tmpName === false) {\n      addAttr(html.slice(lastPos));\n    } else {\n      addAttr(tmpName, stripQuoteWrap(_.trim(html.slice(lastPos))));\n    }\n  }\n\n  return _.trim(retAttrs.join(\" \"));\n}\n\nfunction findNextEqual(str, i) {\n  for (; i < str.length; i++) {\n    var c = str[i];\n    if (c === \" \") continue;\n    if (c === \"=\") return i;\n    return -1;\n  }\n}\n\nfunction findBeforeEqual(str, i) {\n  for (; i > 0; i--) {\n    var c = str[i];\n    if (c === \" \") continue;\n    if (c === \"=\") return i;\n    return -1;\n  }\n}\n\nfunction isQuoteWrapString(text) {\n  if (\n    (text[0] === '\"' && text[text.length - 1] === '\"') ||\n    (text[0] === \"'\" && text[text.length - 1] === \"'\")\n  ) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\nfunction stripQuoteWrap(text) {\n  if (isQuoteWrapString(text)) {\n    return text.substr(1, text.length - 2);\n  } else {\n    return text;\n  }\n}\n\nexports.parseTag = parseTag;\nexports.parseAttr = parseAttr;\n","module.exports = {\n  indexOf: function(arr, item) {\n    var i, j;\n    if (Array.prototype.indexOf) {\n      return arr.indexOf(item);\n    }\n    for (i = 0, j = arr.length; i < j; i++) {\n      if (arr[i] === item) {\n        return i;\n      }\n    }\n    return -1;\n  },\n  forEach: function(arr, fn, scope) {\n    var i, j;\n    if (Array.prototype.forEach) {\n      return arr.forEach(fn, scope);\n    }\n    for (i = 0, j = arr.length; i < j; i++) {\n      fn.call(scope, arr[i], i, arr);\n    }\n  },\n  trim: function(str) {\n    if (String.prototype.trim) {\n      return str.trim();\n    }\n    return str.replace(/(^\\s*)|(\\s*$)/g, \"\");\n  },\n  spaceIndex: function(str) {\n    var reg = /\\s|\\n|\\t/;\n    var match = reg.exec(str);\n    return match ? match.index : -1;\n  }\n};\n","/**\n * filter xss\n *\n * @author Zongmin Lei<leizongmin@gmail.com>\n */\n\nvar FilterCSS = require(\"cssfilter\").FilterCSS;\nvar DEFAULT = require(\"./default\");\nvar parser = require(\"./parser\");\nvar parseTag = parser.parseTag;\nvar parseAttr = parser.parseAttr;\nvar _ = require(\"./util\");\n\n/**\n * returns `true` if the input value is `undefined` or `null`\n *\n * @param {Object} obj\n * @return {Boolean}\n */\nfunction isNull(obj) {\n  return obj === undefined || obj === null;\n}\n\n/**\n * get attributes for a tag\n *\n * @param {String} html\n * @return {Object}\n *   - {String} html\n *   - {Boolean} closing\n */\nfunction getAttrs(html) {\n  var i = _.spaceIndex(html);\n  if (i === -1) {\n    return {\n      html: \"\",\n      closing: html[html.length - 2] === \"/\"\n    };\n  }\n  html = _.trim(html.slice(i + 1, -1));\n  var isClosing = html[html.length - 1] === \"/\";\n  if (isClosing) html = _.trim(html.slice(0, -1));\n  return {\n    html: html,\n    closing: isClosing\n  };\n}\n\n/**\n * shallow copy\n *\n * @param {Object} obj\n * @return {Object}\n */\nfunction shallowCopyObject(obj) {\n  var ret = {};\n  for (var i in obj) {\n    ret[i] = obj[i];\n  }\n  return ret;\n}\n\n/**\n * FilterXSS class\n *\n * @param {Object} options\n *        whiteList, onTag, onTagAttr, onIgnoreTag,\n *        onIgnoreTagAttr, safeAttrValue, escapeHtml\n *        stripIgnoreTagBody, allowCommentTag, stripBlankChar\n *        css{whiteList, onAttr, onIgnoreAttr} `css=false` means don't use `cssfilter`\n */\nfunction FilterXSS(options) {\n  options = shallowCopyObject(options || {});\n\n  if (options.stripIgnoreTag) {\n    if (options.onIgnoreTag) {\n      console.error(\n        'Notes: cannot use these two options \"stripIgnoreTag\" and \"onIgnoreTag\" at the same time'\n      );\n    }\n    options.onIgnoreTag = DEFAULT.onIgnoreTagStripAll;\n  }\n\n  options.whiteList = options.whiteList || DEFAULT.whiteList;\n  options.onTag = options.onTag || DEFAULT.onTag;\n  options.onTagAttr = options.onTagAttr || DEFAULT.onTagAttr;\n  options.onIgnoreTag = options.onIgnoreTag || DEFAULT.onIgnoreTag;\n  options.onIgnoreTagAttr = options.onIgnoreTagAttr || DEFAULT.onIgnoreTagAttr;\n  options.safeAttrValue = options.safeAttrValue || DEFAULT.safeAttrValue;\n  options.escapeHtml = options.escapeHtml || DEFAULT.escapeHtml;\n  this.options = options;\n\n  if (options.css === false) {\n    this.cssFilter = false;\n  } else {\n    options.css = options.css || {};\n    this.cssFilter = new FilterCSS(options.css);\n  }\n}\n\n/**\n * start process and returns result\n *\n * @param {String} html\n * @return {String}\n */\nFilterXSS.prototype.process = function(html) {\n  // compatible with the input\n  html = html || \"\";\n  html = html.toString();\n  if (!html) return \"\";\n\n  var me = this;\n  var options = me.options;\n  var whiteList = options.whiteList;\n  var onTag = options.onTag;\n  var onIgnoreTag = options.onIgnoreTag;\n  var onTagAttr = options.onTagAttr;\n  var onIgnoreTagAttr = options.onIgnoreTagAttr;\n  var safeAttrValue = options.safeAttrValue;\n  var escapeHtml = options.escapeHtml;\n  var cssFilter = me.cssFilter;\n\n  // remove invisible characters\n  if (options.stripBlankChar) {\n    html = DEFAULT.stripBlankChar(html);\n  }\n\n  // remove html comments\n  if (!options.allowCommentTag) {\n    html = DEFAULT.stripCommentTag(html);\n  }\n\n  // if enable stripIgnoreTagBody\n  var stripIgnoreTagBody = false;\n  if (options.stripIgnoreTagBody) {\n    var stripIgnoreTagBody = DEFAULT.StripTagBody(\n      options.stripIgnoreTagBody,\n      onIgnoreTag\n    );\n    onIgnoreTag = stripIgnoreTagBody.onIgnoreTag;\n  }\n\n  var retHtml = parseTag(\n    html,\n    function(sourcePosition, position, tag, html, isClosing) {\n      var info = {\n        sourcePosition: sourcePosition,\n        position: position,\n        isClosing: isClosing,\n        isWhite: whiteList.hasOwnProperty(tag)\n      };\n\n      // call `onTag()`\n      var ret = onTag(tag, html, info);\n      if (!isNull(ret)) return ret;\n\n      if (info.isWhite) {\n        if (info.isClosing) {\n          return \"</\" + tag + \">\";\n        }\n\n        var attrs = getAttrs(html);\n        var whiteAttrList = whiteList[tag];\n        var attrsHtml = parseAttr(attrs.html, function(name, value) {\n          // call `onTagAttr()`\n          var isWhiteAttr = _.indexOf(whiteAttrList, name) !== -1;\n          var ret = onTagAttr(tag, name, value, isWhiteAttr);\n          if (!isNull(ret)) return ret;\n\n          if (isWhiteAttr) {\n            // call `safeAttrValue()`\n            value = safeAttrValue(tag, name, value, cssFilter);\n            if (value) {\n              return name + '=\"' + value + '\"';\n            } else {\n              return name;\n            }\n          } else {\n            // call `onIgnoreTagAttr()`\n            var ret = onIgnoreTagAttr(tag, name, value, isWhiteAttr);\n            if (!isNull(ret)) return ret;\n            return;\n          }\n        });\n\n        // build new tag html\n        var html = \"<\" + tag;\n        if (attrsHtml) html += \" \" + attrsHtml;\n        if (attrs.closing) html += \" /\";\n        html += \">\";\n        return html;\n      } else {\n        // call `onIgnoreTag()`\n        var ret = onIgnoreTag(tag, html, info);\n        if (!isNull(ret)) return ret;\n        return escapeHtml(html);\n      }\n    },\n    escapeHtml\n  );\n\n  // if enable stripIgnoreTagBody\n  if (stripIgnoreTagBody) {\n    retHtml = stripIgnoreTagBody.remove(retHtml);\n  }\n\n  return retHtml;\n};\n\nmodule.exports = FilterXSS;\n","var PubSub = /** @class */ (function () {\n    function PubSub() {\n        this.events = {};\n    }\n    PubSub.prototype.publish = function (name, args) {\n        var _this = this;\n        var handlers = this.events[name];\n        if (handlers === undefined)\n            return;\n        handlers.forEach(function (handler) {\n            handler.call(_this, args);\n        });\n    };\n    PubSub.prototype.subscribe = function (name, handler) {\n        var handlers = this.events[name];\n        if (handlers === undefined) {\n            handlers = this.events[name] = [];\n        }\n        handlers.push(handler);\n    };\n    PubSub.prototype.unsubscribe = function (name, handler) {\n        var handlers = this.events[name];\n        if (handlers === undefined)\n            return;\n        var handlerIdx = handlers.indexOf(handler);\n        handlers.splice(handlerIdx);\n    };\n    PubSub.prototype.dispose = function () {\n        this.events = {};\n    };\n    return PubSub;\n}());\nexport { PubSub };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { UVDataProvider } from \"./UVDataProvider\";\nimport { Urls } from \"@edsilv/utils\";\nvar URLDataProvider = /** @class */ (function (_super) {\n    __extends(URLDataProvider, _super);\n    function URLDataProvider(readonly) {\n        if (readonly === void 0) { readonly = false; }\n        return _super.call(this, readonly) || this;\n    }\n    URLDataProvider.prototype.get = function (key, defaultValue) {\n        return Urls.getHashParameter(key, document) || defaultValue;\n    };\n    URLDataProvider.prototype.set = function (key, value) {\n        if (!this.readonly) {\n            if (value) {\n                Urls.setHashParameter(key, value.toString(), document);\n            }\n            else {\n                Urls.setHashParameter(key, \"\", document);\n            }\n        }\n    };\n    return URLDataProvider;\n}(UVDataProvider));\nexport { URLDataProvider };\n","var UVDataProvider = /** @class */ (function () {\n    function UVDataProvider(readonly) {\n        this.readonly = false;\n        this.readonly = readonly;\n    }\n    UVDataProvider.prototype.get = function (_key, _defaultValue) {\n        return null;\n    };\n    UVDataProvider.prototype.set = function (_key, _value) { };\n    return UVDataProvider;\n}());\nexport { UVDataProvider };\n","var filterXSS = require(\"xss\");\nexport var sanitize = function (html) {\n    return filterXSS(html, {\n        whiteList: {\n            a: [\"href\", \"title\", \"target\", \"class\"],\n            b: [],\n            br: [],\n            i: [],\n            img: [\"src\", \"alt\"],\n            p: [],\n            small: [],\n            span: [],\n            strong: [],\n            sub: [],\n            sup: []\n        }\n    });\n};\nexport var isValidUrl = function (value) {\n    var a = document.createElement(\"a\");\n    a.href = value;\n    return !!a.host && a.host !== window.location.host;\n};\nexport var propertiesChanged = function (newData, currentData, properties) {\n    var propChanged = false;\n    for (var i = 0; i < properties.length; i++) {\n        propChanged = propertyChanged(newData, currentData, properties[i]);\n        if (propChanged) {\n            break;\n        }\n    }\n    return propChanged;\n};\nexport var propertyChanged = function (newData, currentData, propertyName) {\n    return currentData[propertyName] !== newData[propertyName];\n};\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { BaseEvents } from \"./modules/uv-shared-module/BaseEvents\";\nimport { PubSub } from \"./PubSub\";\nimport { propertiesChanged } from \"./Utils\";\nimport { RenderingFormat, MediaType, ExternalResourceType } from \"@iiif/vocabulary\";\nimport { loadManifest } from \"@iiif/manifold\";\nimport { BaseComponent } from \"@iiif/base-component\";\nimport { URLDataProvider } from \"./URLDataProvider\";\nimport \"./lib/\";\nvar Extension;\n(function (Extension) {\n    //AV = \"uv-av-extension\",\n    Extension[\"DEFAULT\"] = \"uv-default-extension\";\n    Extension[\"MEDIAELEMENT\"] = \"uv-mediaelement-extension\";\n    Extension[\"MODELVIEWER\"] = \"uv-model-viewer-extension\";\n    Extension[\"OSD\"] = \"uv-openseadragon-extension\";\n    Extension[\"PDF\"] = \"uv-pdf-extension\";\n})(Extension || (Extension = {}));\nvar Viewer = /** @class */ (function (_super) {\n    __extends(Viewer, _super);\n    function Viewer(options) {\n        var _this = _super.call(this, options) || this;\n        _this.isFullScreen = false;\n        _this.dataProvider = new URLDataProvider();\n        _this._pubsub = new PubSub();\n        _this._init();\n        _this._resize();\n        return _this;\n    }\n    Viewer.prototype._init = function () {\n        var _a;\n        var _this = this;\n        _super.prototype._init.call(this);\n        this._extensions = (_a = {},\n            // [Extension.AV]: async () => {\n            //     const m = await import(/* webpackChunkName: \"uv-av-extension\" *//* webpackMode: \"lazy\" */\"./extensions/uv-av-extension/Extension\") as any;\n            //     const extension = new m.default();\n            //     extension.name = Extension.AV;\n            //     return extension;\n            // },\n            _a[Extension.DEFAULT] = function () { return __awaiter(_this, void 0, void 0, function () {\n                var m, extension;\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0: return [4 /*yield*/, import(\n                            /* webpackChunkName: \"uv-default-extension\" */ /* webpackMode: \"lazy\" */ \"./extensions/uv-default-extension/Extension\")];\n                        case 1:\n                            m = (_a.sent());\n                            extension = new m.default();\n                            extension.name = Extension.DEFAULT;\n                            return [2 /*return*/, extension];\n                    }\n                });\n            }); },\n            _a[Extension.MEDIAELEMENT] = function () { return __awaiter(_this, void 0, void 0, function () {\n                var m, extension;\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0: return [4 /*yield*/, import(\n                            /* webpackChunkName: \"uv-mediaelement-extension\" */ /* webpackMode: \"lazy\" */ \"./extensions/uv-mediaelement-extension/Extension\")];\n                        case 1:\n                            m = (_a.sent());\n                            extension = new m.default();\n                            extension.name = Extension.MEDIAELEMENT;\n                            return [2 /*return*/, extension];\n                    }\n                });\n            }); },\n            _a[Extension.OSD] = function () { return __awaiter(_this, void 0, void 0, function () {\n                var m, extension;\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0: return [4 /*yield*/, import(\n                            /* webpackChunkName: \"uv-openseadragon-extension\" */ /* webpackMode: \"lazy\" */ \"./extensions/uv-openseadragon-extension/Extension\")];\n                        case 1:\n                            m = (_a.sent());\n                            extension = new m.default();\n                            extension.name = Extension.OSD;\n                            return [2 /*return*/, extension];\n                    }\n                });\n            }); },\n            _a[Extension.PDF] = function () { return __awaiter(_this, void 0, void 0, function () {\n                var m, extension;\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0: return [4 /*yield*/, import(\n                            /* webpackChunkName: \"uv-pdf-extension\" */ /* webpackMode: \"lazy\" */ \"./extensions/uv-pdf-extension/Extension\")];\n                        case 1:\n                            m = (_a.sent());\n                            extension = new m.default();\n                            extension.name = Extension.PDF;\n                            return [2 /*return*/, extension];\n                    }\n                });\n            }); },\n            _a[Extension.MODELVIEWER] = function () { return __awaiter(_this, void 0, void 0, function () {\n                var m, extension;\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0: return [4 /*yield*/, import(\n                            /* webpackChunkName: \"uv-model-viewer-extension\" */ /* webpackMode: \"lazy\" */ \"./extensions/uv-model-viewer-extension/Extension\")];\n                        case 1:\n                            m = (_a.sent());\n                            extension = new m.default();\n                            extension.name = Extension.MODELVIEWER;\n                            return [2 /*return*/, extension];\n                    }\n                });\n            }); },\n            _a);\n        this._extensionRegistry = {};\n        this._extensionRegistry[ExternalResourceType.CANVAS] = {\n            load: this._extensions[Extension.OSD]\n        };\n        this._extensionRegistry[ExternalResourceType.DOCUMENT] = {\n            load: this._extensions[Extension.PDF]\n        };\n        this._extensionRegistry[ExternalResourceType.IMAGE] = {\n            load: this._extensions[Extension.OSD]\n        };\n        this._extensionRegistry[ExternalResourceType.MOVING_IMAGE] = {\n            load: this._extensions[Extension.MEDIAELEMENT]\n        };\n        this._extensionRegistry[ExternalResourceType.PHYSICAL_OBJECT] = {\n            load: this._extensions[Extension.MODELVIEWER]\n        };\n        this._extensionRegistry[ExternalResourceType.SOUND] = {\n            load: this._extensions[Extension.MEDIAELEMENT]\n        };\n        this._extensionRegistry[RenderingFormat.PDF] = {\n            load: this._extensions[Extension.PDF]\n        };\n        // presentation 3\n        // this._extensionRegistry[\"av\"] = {\n        //     load: this._extensions[Extension.AV]\n        // };\n        this._extensionRegistry[MediaType.AUDIO_MP4] = {\n            //load: this._extensions[Extension.AV]\n            load: this._extensions[Extension.MEDIAELEMENT]\n        };\n        this._extensionRegistry[\"default\"] = {\n            load: this._extensions[Extension.DEFAULT]\n        };\n        this._extensionRegistry[MediaType.DRACO] = {\n            load: this._extensions[Extension.MODELVIEWER]\n        };\n        this._extensionRegistry[MediaType.GLB] = {\n            load: this._extensions[Extension.MODELVIEWER]\n        };\n        this._extensionRegistry[MediaType.GLTF] = {\n            load: this._extensions[Extension.MODELVIEWER]\n        };\n        this._extensionRegistry[MediaType.JPG] = {\n            load: this._extensions[Extension.OSD]\n        };\n        // this._extensionRegistry[MediaType.M3U8] = {\n        //     load: this._extensions[Extension.AV]\n        // };\n        this._extensionRegistry[MediaType.MP3] = {\n            //load: this._extensions[Extension.AV]\n            load: this._extensions[Extension.MEDIAELEMENT]\n        };\n        // this._extensionRegistry[MediaType.MPEG_DASH] = {\n        //     load: this._extensions[Extension.AV]\n        // };\n        this._extensionRegistry[MediaType.PDF] = {\n            load: this._extensions[Extension.PDF]\n        };\n        this._extensionRegistry[MediaType.USDZ] = {\n            load: this._extensions[Extension.MODELVIEWER]\n        };\n        this._extensionRegistry[MediaType.VIDEO_MP4] = {\n            //load: this._extensions[Extension.AV]\n            load: this._extensions[Extension.MEDIAELEMENT]\n        };\n        // this._extensionRegistry[MediaType.WEBM] = {\n        //     load: this._extensions[Extension.AV]\n        // };\n        this.set(this.options.data);\n        return true;\n    };\n    Viewer.prototype.data = function () {\n        return {\n            annotations: undefined,\n            assetsDir: \"./uv-assets/\",\n            canvasIndex: 0,\n            collectionIndex: undefined,\n            config: undefined,\n            configUri: undefined,\n            embedded: false,\n            isLightbox: false,\n            isReload: false,\n            limitLocales: false,\n            manifestUri: \"\",\n            locales: [\n                {\n                    name: \"en-GB\"\n                }\n            ],\n            manifestIndex: 0,\n            rangeId: undefined,\n            rotation: 0,\n            sequenceIndex: 0,\n            xywh: \"\"\n        };\n    };\n    Viewer.prototype.set = function (data) {\n        // if this is the first set\n        if (!this.extension) {\n            if (!data.manifestUri) {\n                this._error(\"manifestUri is required.\");\n                return;\n            }\n            // remove '/' from assetsDir\n            if (data.assetsDir && data.assetsDir.endsWith(\"/\")) {\n                data.assetsDir = data.assetsDir.substring(0, data.assetsDir.length - 1);\n            }\n            this._reload(data);\n        }\n        else {\n            // changing any of these data properties forces the UV to reload.\n            if (propertiesChanged(data, this.extension.data, [\n                \"collectionIndex\",\n                \"manifestIndex\",\n                \"config\",\n                \"configUri\",\n                \"domain\",\n                \"embedDomain\",\n                \"embedScriptUri\",\n                \"manifestUri\",\n                \"isHomeDomain\",\n                \"isLightbox\",\n                \"isOnlyInstance\",\n                \"isReload\",\n                \"locales\",\n                \"root\"\n            ])) {\n                this.extension.data = Object.assign({}, this.extension.data, data);\n                this._reload(this.extension.data);\n            }\n            else {\n                // no need to reload, just update.\n                this.extension.data = Object.assign({}, this.extension.data, data);\n                this.extension.render();\n            }\n        }\n    };\n    Viewer.prototype._getExtension = function (key) {\n        if (!this._extensionRegistry[key]) {\n            key = \"default\";\n        }\n        return this._extensionRegistry[key].load();\n    };\n    Viewer.prototype.get = function (key) {\n        if (this.extension) {\n            return this.extension.data[key];\n        }\n    };\n    Viewer.prototype.publish = function (event, args) {\n        this._pubsub.publish(event, args);\n    };\n    Viewer.prototype.subscribe = function (event, cb) {\n        this._pubsub.subscribe(event, cb);\n    };\n    Viewer.prototype._reload = function (data) {\n        return __awaiter(this, void 0, void 0, function () {\n            var $elem, that, helper, trackingLabel, sequence, canvas, extension, content, annotation, body, format, type, type, canvasType, format;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        this._pubsub.dispose(); // remove any existing event listeners\n                        this.subscribe(BaseEvents.RELOAD, function (data) {\n                            _this.fire(BaseEvents.RELOAD, data);\n                        });\n                        $elem = $(this.options.target);\n                        // empty the containing element\n                        $elem.empty();\n                        // add loading class\n                        $elem.addClass(\"loading\");\n                        that = this;\n                        return [4 /*yield*/, loadManifest({\n                                manifestUri: data.manifestUri,\n                                collectionIndex: data.collectionIndex,\n                                manifestIndex: data.manifestIndex || 0,\n                                sequenceIndex: data.sequenceIndex || 0,\n                                canvasIndex: data.canvasIndex || 0,\n                                rangeId: data.rangeId,\n                                locale: data.locales ? data.locales[0].name : undefined\n                            })];\n                    case 1:\n                        helper = _a.sent();\n                        trackingLabel = helper.getTrackingLabel();\n                        if (trackingLabel) {\n                            trackingLabel +=\n                                \", URI: \" + (window.location !== window.parent.location)\n                                    ? document.referrer\n                                    : document.location;\n                            window.trackingLabel = trackingLabel;\n                        }\n                        if (data.sequenceIndex !== undefined) {\n                            sequence = helper.getSequenceByIndex(data.sequenceIndex);\n                            if (!sequence) {\n                                that._error(\"Sequence \" + data.sequenceIndex + \" not found.\");\n                                return [2 /*return*/];\n                            }\n                        }\n                        if (data.canvasIndex !== undefined) {\n                            canvas = helper.getCanvasByIndex(data.canvasIndex);\n                        }\n                        if (!canvas) {\n                            that._error(\"Canvas \" + data.canvasIndex + \" not found.\");\n                            return [2 /*return*/];\n                        }\n                        extension = undefined;\n                        content = canvas.getContent();\n                        if (!content.length) return [3 /*break*/, 8];\n                        annotation = content[0];\n                        body = annotation.getBody();\n                        if (!(body && body.length)) return [3 /*break*/, 7];\n                        format = body[0].getFormat();\n                        if (!format) return [3 /*break*/, 5];\n                        return [4 /*yield*/, that._getExtension(format)];\n                    case 2:\n                        extension = _a.sent();\n                        if (!!extension) return [3 /*break*/, 4];\n                        type = body[0].getType();\n                        if (!type) return [3 /*break*/, 4];\n                        return [4 /*yield*/, that._getExtension(type)];\n                    case 3:\n                        extension = _a.sent();\n                        _a.label = 4;\n                    case 4: return [3 /*break*/, 7];\n                    case 5:\n                        type = body[0].getType();\n                        if (!type) return [3 /*break*/, 7];\n                        return [4 /*yield*/, that._getExtension(type)];\n                    case 6:\n                        extension = _a.sent();\n                        _a.label = 7;\n                    case 7: return [3 /*break*/, 12];\n                    case 8:\n                        canvasType = canvas.getType();\n                        if (!canvasType) return [3 /*break*/, 10];\n                        return [4 /*yield*/, that._getExtension(canvasType)];\n                    case 9:\n                        // try using canvasType\n                        extension = _a.sent();\n                        _a.label = 10;\n                    case 10:\n                        if (!!extension) return [3 /*break*/, 12];\n                        format = canvas.getProperty(\"format\");\n                        return [4 /*yield*/, that._getExtension(format)];\n                    case 11:\n                        extension = _a.sent();\n                        _a.label = 12;\n                    case 12:\n                        if (!!extension) return [3 /*break*/, 14];\n                        return [4 /*yield*/, that._getExtension(\"default\")];\n                    case 13:\n                        extension = _a.sent();\n                        _a.label = 14;\n                    case 14:\n                        that._configure(data, extension, function (config) {\n                            data.config = config;\n                            that._injectCss(data, extension, function () {\n                                that._createExtension(extension, data, helper);\n                            });\n                        });\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Viewer.prototype._error = function (message) {\n        this.fire(BaseEvents.ERROR, message);\n    };\n    Viewer.prototype._configure = function (data, extension, cb) {\n        var _this = this;\n        this._getConfigExtension(data, extension, function (configExtension) {\n            if (data.locales) {\n                var configPath = data.assetsDir +\n                    \"/config/\" +\n                    extension.name +\n                    \".\" +\n                    data.locales[0].name +\n                    \".config.json\";\n                $.getJSON(configPath, function (config) {\n                    _this._extendConfig(data, extension, config, configExtension, cb);\n                });\n            }\n        });\n    };\n    Viewer.prototype._extendConfig = function (data, extension, config, configExtension, cb) {\n        config.name = extension.name;\n        // if configUri has been set, extend the existing config object.\n        if (configExtension) {\n            // save a reference to the config extension uri.\n            config.uri = data.configUri;\n            $.extend(true, config, configExtension);\n            //$.extend(true, config, configExtension, data.config);\n        }\n        cb(config);\n    };\n    Viewer.prototype._getConfigExtension = function (data, extension, cb) {\n        if (!data.locales) {\n            return;\n        }\n        var sessionConfig = sessionStorage.getItem(extension.name + \".\" + data.locales[0].name);\n        var configUri = data.configUri;\n        if (sessionConfig) {\n            // if config is stored in sessionstorage\n            cb(JSON.parse(sessionConfig));\n        }\n        else if (configUri) {\n            // if data.configUri has been set\n            $.getJSON(configUri, function (configExtension) {\n                cb(configExtension);\n            });\n        }\n        else {\n            cb(null);\n        }\n    };\n    Viewer.prototype._injectCss = function (data, extension, cb) {\n        if (!data.locales) {\n            return;\n        }\n        var cssPath = data.assetsDir +\n            \"/themes/\" +\n            data.config.options.theme +\n            \"/css/\" +\n            extension.name +\n            \"/theme.css\";\n        var locale = data.locales[0].name;\n        var themeName = extension.name.toLowerCase() + \"-theme-\" + locale.toLowerCase();\n        var $existingCSS = $(\"#\" + themeName.toLowerCase());\n        if (!$existingCSS.length) {\n            $(\"head\").append('<link rel=\"stylesheet\" id=\"' +\n                themeName +\n                '\" href=\"' +\n                cssPath.toLowerCase() +\n                '\" />');\n            cb();\n        }\n        else {\n            cb();\n        }\n    };\n    Viewer.prototype._createExtension = function (extension, data, helper) {\n        this.extension = extension;\n        if (this.extension) {\n            this.extension.component = this;\n            this.extension.data = data;\n            this.extension.helper = helper;\n            this.extension.create();\n        }\n    };\n    Viewer.prototype.exitFullScreen = function () {\n        if (this.extension) {\n            this.extension.exitFullScreen();\n        }\n    };\n    Viewer.prototype.resize = function () {\n        if (this.extension) {\n            this.extension.resize();\n        }\n    };\n    return Viewer;\n}(BaseComponent));\nexport { Viewer };\n","export { URLDataProvider } from \"./URLDataProvider\";\nexport { Viewer } from \"./Viewer\";\n","import \"@edsilv/jquery-plugins\";\n\n// if (typeof jQuery === \"function\") {\n//   define('jquery', [], function() {\n//       return jQuery;\n//   });\n// }\n\n(function() {\n  // IE CustomEvent Polyfill\n  // https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/CustomEvent\n  if (typeof window.CustomEvent === \"function\") return false;\n\n  function CustomEvent(event, params) {\n    params = params || { bubbles: false, cancelable: false, detail: undefined };\n    var evt = document.createEvent(\"CustomEvent\");\n    evt.initCustomEvent(\n      event,\n      params.bubbles,\n      params.cancelable,\n      params.detail\n    );\n    return evt;\n  }\n\n  CustomEvent.prototype = window.Event.prototype;\n  window.CustomEvent = CustomEvent;\n\n  // scrollIntoViewIfNeeded\n  if (!Element.prototype.scrollIntoViewIfNeeded) {\n    Element.prototype.scrollIntoViewIfNeeded = function(centerIfNeeded) {\n      centerIfNeeded = arguments.length === 0 ? true : !!centerIfNeeded;\n\n      var parent = this.parentNode,\n        parentComputedStyle = window.getComputedStyle(parent, undefined),\n        parentBorderTopWidth = parseInt(\n          parentComputedStyle.getPropertyValue(\"border-top-width\")\n        ),\n        parentBorderLeftWidth = parseInt(\n          parentComputedStyle.getPropertyValue(\"border-left-width\")\n        ),\n        overTop = this.offsetTop - parent.offsetTop < parent.scrollTop,\n        overBottom =\n          this.offsetTop -\n            parent.offsetTop +\n            this.clientHeight -\n            parentBorderTopWidth >\n          parent.scrollTop + parent.clientHeight,\n        overLeft = this.offsetLeft - parent.offsetLeft < parent.scrollLeft,\n        overRight =\n          this.offsetLeft -\n            parent.offsetLeft +\n            this.clientWidth -\n            parentBorderLeftWidth >\n          parent.scrollLeft + parent.clientWidth,\n        alignWithTop = overTop && !overBottom;\n\n      if ((overTop || overBottom) && centerIfNeeded) {\n        parent.scrollTop =\n          this.offsetTop -\n          parent.offsetTop -\n          parent.clientHeight / 2 -\n          parentBorderTopWidth +\n          this.clientHeight / 2;\n      }\n\n      if ((overLeft || overRight) && centerIfNeeded) {\n        parent.scrollLeft =\n          this.offsetLeft -\n          parent.offsetLeft -\n          parent.clientWidth / 2 -\n          parentBorderLeftWidth +\n          this.clientWidth / 2;\n      }\n\n      if ((overTop || overBottom || overLeft || overRight) && !centerIfNeeded) {\n        this.scrollIntoView(alignWithTop);\n      }\n    };\n  }\n\n  return;\n})();\n\n// detect mobile browser\n(function(a) {\n  (jQuery.browser = jQuery.browser || {}).mobile =\n    /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|android|ipad|playbook|silk|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(\n      a\n    ) ||\n    /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(\n      a.substr(0, 4)\n    );\n})(navigator.userAgent || navigator.vendor || window.opera);\n\n// browserDetect\nwindow.browserDetect = {\n  init: function() {\n    this.browser = this.searchString(this.dataBrowser) || \"Other\";\n    this.version =\n      this.searchVersion(navigator.userAgent) ||\n      this.searchVersion(navigator.appVersion) ||\n      \"Unknown\";\n    // detect IE 11\n    if (\n      this.browser == \"Explorer\" &&\n      this.version == \"7\" &&\n      navigator.userAgent.match(/Trident/i)\n    ) {\n      this.version = this.searchVersionIE();\n    }\n  },\n\n  searchString: function(data) {\n    for (var i = 0; i < data.length; i++) {\n      var dataString = data[i].string;\n      this.versionSearchString = data[i].subString;\n\n      if (dataString.indexOf(data[i].subString) != -1) {\n        return data[i].identity;\n      }\n    }\n  },\n\n  searchVersion: function(dataString) {\n    var index = dataString.indexOf(this.versionSearchString);\n    if (index == -1) return;\n    return parseFloat(\n      dataString.substring(index + this.versionSearchString.length + 1)\n    );\n  },\n\n  searchVersionIE: function() {\n    var ua = navigator.userAgent.toString().toLowerCase(),\n      match = /(trident)(?:.*rv:([\\w.]+))?/.exec(ua) ||\n        /(msie) ([\\w.]+)/.exec(ua) || [\"\", null, -1],\n      ver;\n    try {\n      ver = match[2].split(\".\")[0]; // version\n    } catch (err) {\n      ver = \"unknown\"; //\n    }\n    return ver;\n  },\n\n  dataBrowser: [\n    { string: navigator.userAgent, subString: \"Chrome\", identity: \"Chrome\" },\n    { string: navigator.userAgent, subString: \"MSIE\", identity: \"Explorer\" },\n    { string: navigator.userAgent, subString: \"Trident\", identity: \"Explorer\" },\n    { string: navigator.userAgent, subString: \"Firefox\", identity: \"Firefox\" },\n    { string: navigator.userAgent, subString: \"Safari\", identity: \"Safari\" },\n    { string: navigator.userAgent, subString: \"Opera\", identity: \"Opera\" }\n  ]\n};\n\nwindow.browserDetect.init();\n","var BaseEvents = /** @class */ (function () {\n    function BaseEvents() {\n    }\n    BaseEvents.ACCEPT_TERMS = \"acceptTerms\";\n    BaseEvents.ANNOTATION_CANVAS_CHANGED = \"annotationCanvasChanged\";\n    BaseEvents.ANNOTATION_CHANGED = \"annotationChanged\";\n    BaseEvents.ANNOTATIONS_CLEARED = \"annotationsCleared\";\n    BaseEvents.ANNOTATIONS_EMPTY = \"annotationsEmpty\";\n    BaseEvents.ANNOTATIONS = \"annotations\";\n    BaseEvents.BOOKMARK = \"bookmark\";\n    BaseEvents.CANVAS_INDEX_CHANGE_FAILED = \"canvasIndexChangeFailed\";\n    BaseEvents.CANVAS_INDEX_CHANGED = \"canvasIndexChanged\";\n    BaseEvents.CLEAR_ANNOTATIONS = \"clearAnnotations\";\n    BaseEvents.CLICKTHROUGH = \"clickthrough\";\n    BaseEvents.CLOSE_ACTIVE_DIALOGUE = \"closeActiveDialogue\";\n    BaseEvents.CLOSE_LEFT_PANEL = \"closeLeftPanel\";\n    BaseEvents.CLOSE_RIGHT_PANEL = \"closeRightPanel\";\n    BaseEvents.COLLECTION_INDEX_CHANGED = \"collectionIndexChanged\";\n    BaseEvents.CREATE = \"create\";\n    BaseEvents.CREATED = \"created\";\n    BaseEvents.DOWN_ARROW = \"downArrow\";\n    BaseEvents.DOWNLOAD = \"download\";\n    BaseEvents.DROP = \"drop\";\n    BaseEvents.END = \"end\";\n    BaseEvents.ERROR = \"error\";\n    BaseEvents.ESCAPE = \"escape\";\n    BaseEvents.EXIT_FULLSCREEN = \"exitFullScreen\";\n    BaseEvents.EXTERNAL_LINK_CLICKED = \"externalLinkClicked\";\n    BaseEvents.FEEDBACK = \"feedback\";\n    BaseEvents.FIRST = \"first\";\n    BaseEvents.FORBIDDEN = \"forbidden\";\n    BaseEvents.GALLERY_DECREASE_SIZE = \"galleryDecreaseSize\";\n    BaseEvents.GALLERY_INCREASE_SIZE = \"galleryIncreaseSize\";\n    BaseEvents.GALLERY_THUMB_SELECTED = \"galleryThumbSelected\";\n    BaseEvents.HIDE_AUTH_DIALOGUE = \"hideAuthDialogue\";\n    BaseEvents.HIDE_CLICKTHROUGH_DIALOGUE = \"hideClickthroughDialogue\";\n    BaseEvents.HIDE_DOWNLOAD_DIALOGUE = \"hideDownloadDialogue\";\n    BaseEvents.HIDE_EMBED_DIALOGUE = \"hideEmbedDialogue\";\n    BaseEvents.HIDE_EXTERNALCONTENT_DIALOGUE = \"hideExternalContentDialogue\";\n    BaseEvents.HIDE_GENERIC_DIALOGUE = \"hideGenericDialogue\";\n    BaseEvents.HIDE_HELP_DIALOGUE = \"hideHelpDialogue\";\n    BaseEvents.HIDE_INFORMATION = \"hideInformation\";\n    BaseEvents.HIDE_LOGIN_DIALOGUE = \"hideLoginDialogue\";\n    BaseEvents.HIDE_MOREINFO_DIALOGUE = \"hideMoreInfoDialogue\";\n    BaseEvents.HIDE_MULTISELECT_DIALOGUE = \"hideMultiSelectDialogue\";\n    BaseEvents.HIDE_OVERLAY = \"hideOverlay\";\n    BaseEvents.HIDE_RESTRICTED_DIALOGUE = \"hideRestrictedDialogue\";\n    BaseEvents.HIDE_SETTINGS_DIALOGUE = \"hideSettingsDialogue\";\n    BaseEvents.HIDE_SHARE_DIALOGUE = \"hideShareDialogue\";\n    BaseEvents.HOME = \"home\";\n    BaseEvents.LAST = \"last\";\n    BaseEvents.LEFT_ARROW = \"leftArrow\";\n    BaseEvents.LEFTPANEL_COLLAPSE_FULL_FINISH = \"leftPanelCollapseFullFinish\";\n    BaseEvents.LEFTPANEL_COLLAPSE_FULL_START = \"leftPanelCollapseFullStart\";\n    BaseEvents.LEFTPANEL_EXPAND_FULL_FINISH = \"leftPanelExpandFullFinish\";\n    BaseEvents.LEFTPANEL_EXPAND_FULL_START = \"leftPanelExpandFullStart\";\n    BaseEvents.LOAD_FAILED = \"loadFailed\";\n    BaseEvents.LOGIN_FAILED = \"loginFailed\";\n    BaseEvents.LOGIN = \"login\";\n    BaseEvents.LOGOUT = \"logout\";\n    BaseEvents.MANIFEST_INDEX_CHANGED = \"manifestIndexChanged\";\n    BaseEvents.METRIC_CHANGED = \"metricChanged\";\n    BaseEvents.MINUS = \"minus\";\n    BaseEvents.MULTISELECT_CHANGE = \"multiSelectChange\";\n    BaseEvents.MULTISELECTION_MADE = \"multiSelectionMade\";\n    BaseEvents.NEXT = \"next\";\n    BaseEvents.NOT_FOUND = \"notFound\";\n    BaseEvents.OPEN_EXTERNAL_RESOURCE = \"openExternalResource\";\n    BaseEvents.OPEN_LEFT_PANEL = \"openLeftPanel\";\n    BaseEvents.OPEN_RIGHT_PANEL = \"openRightPanel\";\n    BaseEvents.OPEN_THUMBS_VIEW = \"openThumbsView\";\n    BaseEvents.OPEN_TREE_VIEW = \"openTreeView\";\n    BaseEvents.OPEN = \"open\";\n    BaseEvents.OPENED_MEDIA = \"openedMedia\";\n    BaseEvents.PAGE_DOWN = \"pageDown\";\n    BaseEvents.PAGE_UP = \"pageUp\";\n    BaseEvents.PLUS = \"plus\";\n    BaseEvents.PREV = \"prev\";\n    BaseEvents.RANGE_CHANGED = \"rangeChanged\";\n    BaseEvents.REDIRECT = \"redirect\";\n    BaseEvents.REFRESH = \"refresh\";\n    BaseEvents.RELOAD = \"reload\";\n    BaseEvents.RESIZE = \"resize\";\n    BaseEvents.RESOURCE_DEGRADED = \"resourceDegraded\";\n    BaseEvents.RETRY = \"retry\";\n    BaseEvents.RETURN = \"return\";\n    BaseEvents.RIGHT_ARROW = \"rightArrow\";\n    BaseEvents.RIGHTPANEL_COLLAPSE_FULL_FINISH = \"rightPanelCollapseFullFinish\";\n    BaseEvents.RIGHTPANEL_COLLAPSE_FULL_START = \"rightPanelCollapseFullStart\";\n    BaseEvents.RIGHTPANEL_EXPAND_FULL_FINISH = \"rightPanelExpandFullFinish\";\n    BaseEvents.RIGHTPANEL_EXPAND_FULL_START = \"rightPanelExpandFullStart\";\n    BaseEvents.SEQUENCE_INDEX_CHANGED = \"sequenceIndexChanged\";\n    BaseEvents.SETTINGS_CHANGED = \"settingsChanged\";\n    BaseEvents.SHOW_AUTH_DIALOGUE = \"showAuthDialogue\";\n    BaseEvents.SHOW_CLICKTHROUGH_DIALOGUE = \"showClickThroughDialogue\";\n    BaseEvents.SHOW_DOWNLOAD_DIALOGUE = \"showDownloadDialogue\";\n    BaseEvents.SHOW_EMBED_DIALOGUE = \"showEmbedDialogue\";\n    BaseEvents.SHOW_EXTERNALCONTENT_DIALOGUE = \"showExternalContentDialogue\";\n    BaseEvents.SHOW_GENERIC_DIALOGUE = \"showGenericDialogue\";\n    BaseEvents.SHOW_HELP_DIALOGUE = \"showHelpDialogue\";\n    BaseEvents.SHOW_INFORMATION = \"showInformation\";\n    BaseEvents.SHOW_LOGIN_DIALOGUE = \"showLoginDialogue\";\n    BaseEvents.SHOW_MESSAGE = \"showMessage\";\n    BaseEvents.SHOW_MOREINFO_DIALOGUE = \"showMoreInfoDialogue\";\n    BaseEvents.SHOW_MULTISELECT_DIALOGUE = \"showMultiSelectDialogue\";\n    BaseEvents.SHOW_OVERLAY = \"showOverlay\";\n    BaseEvents.SHOW_RESTRICTED_DIALOGUE = \"showRestrictedDialogue\";\n    BaseEvents.SHOW_SETTINGS_DIALOGUE = \"showSettingsDialogue\";\n    BaseEvents.SHOW_SHARE_DIALOGUE = \"showShareDialogue\";\n    BaseEvents.SHOW_TERMS_OF_USE = \"showTermsOfUse\";\n    BaseEvents.THUMB_MULTISELECTED = \"thumbMultiSelected\";\n    BaseEvents.THUMB_SELECTED = \"thumbSelected\";\n    BaseEvents.TOGGLE_EXPAND_LEFT_PANEL = \"toggleExpandLeftPanel\";\n    BaseEvents.TOGGLE_EXPAND_RIGHT_PANEL = \"toggleExpandRightPanel\";\n    BaseEvents.TOGGLE_FULLSCREEN = \"toggleFullScreen\";\n    BaseEvents.TREE_NODE_MULTISELECTED = \"treeNodeMultiSelected\";\n    BaseEvents.TREE_NODE_SELECTED = \"treeNodeSelected\";\n    BaseEvents.UP_ARROW = \"upArrow\";\n    BaseEvents.UPDATE_SETTINGS = \"updateSettings\";\n    BaseEvents.VIEW_FULL_TERMS = \"viewFullTerms\";\n    BaseEvents.WINDOW_UNLOAD = \"windowUnload\";\n    return BaseEvents;\n}());\nexport { BaseEvents };\n"],"sourceRoot":""}