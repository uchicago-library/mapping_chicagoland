{"version":3,"sources":["webpack://UV/./src/modules/uv-dialogues-module/AuthDialogue.ts","webpack://UV/./src/modules/uv-dialogues-module/ClickThroughDialogue.ts","webpack://UV/./src/modules/uv-dialogues-module/LoginDialogue.ts","webpack://UV/./src/modules/uv-dialogues-module/RestrictedDialogue.ts","webpack://UV/./src/modules/uv-dialogues-module/SettingsDialogue.ts","webpack://UV/./src/modules/uv-dialogues-module/ShareDialogue.ts","webpack://UV/./src/modules/uv-moreinforightpanel-module/MoreInfoRightPanel.ts","webpack://UV/./src/modules/uv-shared-module/Auth09.ts","webpack://UV/./src/modules/uv-shared-module/Auth1.ts","webpack://UV/./src/modules/uv-shared-module/BaseExpandPanel.ts","webpack://UV/./src/modules/uv-shared-module/BaseExtension.ts","webpack://UV/./src/modules/uv-shared-module/BaseView.ts","webpack://UV/./src/modules/uv-shared-module/CenterPanel.ts","webpack://UV/./src/modules/uv-shared-module/Dialogue.ts","webpack://UV/./src/modules/uv-shared-module/FooterPanel.ts","webpack://UV/./src/modules/uv-shared-module/GenericDialogue.ts","webpack://UV/./src/modules/uv-shared-module/HeaderPanel.ts","webpack://UV/./src/modules/uv-shared-module/Information.ts","webpack://UV/./src/modules/uv-shared-module/InformationAction.ts","webpack://UV/./src/modules/uv-shared-module/InformationArgs.ts","webpack://UV/./src/modules/uv-shared-module/InformationFactory.ts","webpack://UV/./src/modules/uv-shared-module/InformationType.ts","webpack://UV/./src/modules/uv-shared-module/LeftPanel.ts","webpack://UV/./src/modules/uv-shared-module/LoginWarningMessages.ts","webpack://UV/./src/modules/uv-shared-module/MetricType.ts","webpack://UV/./src/modules/uv-shared-module/Panel.ts","webpack://UV/./src/modules/uv-shared-module/Position.ts","webpack://UV/./src/modules/uv-shared-module/RightPanel.ts","webpack://UV/./src/modules/uv-shared-module/Shell.ts","webpack://UV/./src/modules/uv-shared-module/StringValue.ts","webpack://UV/./src/modules/uv-shared-module/ThumbsView.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AAC2D;AACJ;AACjB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,uEAAU;AACrC,4BAA4B,uEAAU;AACtC;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,uDAAQ;AACrC;AACA;AACA,+BAA+B,uDAAQ;AACvC;AACA;AACA;AACA,uCAAuC,uEAAU;AACjD,aAAa;AACb;AACA;AACA,qCAAqC,uDAAQ;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,mEAAQ;AACc;;;;;;;;;;;;;ACnGxB;AAAA;AAAA;AAAA;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AAC2D;AACJ;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,uEAAU;AACrC,4BAA4B,uEAAU;AACtC;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wFAAwF;AACxF;AACA;AACA;AACA;AACA;AACA,oCAAoC,uEAAU;AAC9C;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,uEAAU;AAC7C,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,mEAAQ;AACsB;;;;;;;;;;;;;AC1EhC;AAAA;AAAA;AAAA;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AAC2D;AACJ;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,uEAAU;AACrC,4BAA4B,uEAAU;AACtC;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,uEAAU;AAC7C,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,mEAAQ;AACe;;;;;;;;;;;;;ACpHzB;AAAA;AAAA;AAAA;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AAC2D;AACJ;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,uEAAU;AACrC,4BAA4B,uEAAU;AACtC;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,uEAAU;AAC7C,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,mEAAQ;AACoB;;;;;;;;;;;;;ACrF9B;AAAA;AAAA;AAAA;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AAC2D;AACJ;AACxD,eAAe,mBAAO,CAAC,6CAAuB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,uEAAU;AACrC,4BAA4B,uEAAU;AACtC;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,uEAAU;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,oBAAoB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,mEAAQ;AACkB;;;;;;;;;;;;;ACvF5B;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AAC2D;AACJ;AACT;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,uEAAU;AACrC,4BAA4B,uEAAU;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT,iCAAiC,uEAAU;AAC3C;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,qDAAO;AAC1B,SAAS;AACT;AACA,mBAAmB,qDAAO;AAC1B,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA,oCAAoC,uEAAU;AAC9C,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,mDAAK;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,mDAAK;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,mDAAK;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,mEAAQ;AACe;;;;;;;;;;;;;ACzTzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AAC2D;AACA;AACrB;AACK;AACC;AACgC;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,uEAAU;AAC3C;AACA,SAAS;AACT,iCAAiC,uEAAU;AAC3C;AACA,SAAS;AACT;AACA;AACA;AACA,qCAAqC,+EAAiB;AACtD;AACA;AACA,SAAS;AACT;AACA;AACA,0BAA0B,kDAAI;AAC9B;AACA;AACA;AACA,4CAA4C,uEAAU;AACtD;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,mDAAK;AACzC;AACA,kCAAkC,0DAAW,+CAA+C;AAC5F;AACA,uBAAuB,uEAAS;AAChC,0BAA0B,mDAAK;AAC/B;AACA;AACA;AACA;AACA;AACA,uBAAuB,uDAAQ;AAC/B,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,uEAAU;AACkB;;;;;;;;;;;;;AC7F9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0C;AACU;AACA;AACU;AACb;AACH;AACc;AAC5D;AACA;AACA;AACA;AACA;AACA,YAAY,kDAAK;AACjB;AACA;AACA,aAAa;AACb;AACA,yBAAyB,uDAAU;AACnC,uCAAuC,sDAAU;AACjD;AACA,yBAAyB,uDAAU;AACnC,uCAAuC,sDAAU;AACjD;AACA,yBAAyB,uDAAU;AACnC;AACA;AACA;AACA,uCAAuC,sDAAU;AACjD;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA,2BAA2B,sDAAU;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,sDAAU;AAC7D;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,2BAA2B,sDAAU;AACrC;AACA;AACA;AACA,uCAAuC,sDAAU;AACjD;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,oCAAoC,mEAAwB;AAC5D,yCAAyC,0EAAoB;AAC7D;AACA;AACA,2BAA2B,sDAAU;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,sDAAU;AAC7D;AACA;AACA,6BAA6B;AAC7B;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,sDAAU;AAC7D;AACA;AACA,6BAA6B;AAC7B;AACA,qBAAqB;AACrB;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,gBAAgB,qDAAO;AACvB;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,qDAAO;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,kDAAI;AACjC;AACA,4BAA4B,qDAAO;AACnC,+BAA+B,kBAAkB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,oCAAoC,4DAAiB;AACrD;AACA;AACA,yCAAyC,2EAAgC;AACzE;AACA,+BAA+B,sDAAU;AACzC;AACA;AACA,8CAA8C,sEAA2B;AACzE,8CAA8C,+EAAoC;AAClF;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA,mDAAmD,mEAAwB;AAC3E;AACA;AACA,iCAAiC,uDAAU;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,kCAAkC,gEAAe,CAAC,gEAAe;AACjE,uBAAuB,sDAAU;AACjC;AACA;AACA,CAAC;AACiB;;;;;;;;;;;;;AC7NlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0C;AACH;AACa;AACA;AACH;AACH;AACc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,YAAY,kDAAK;AACjB;AACA;AACA,aAAa;AACb;AACA,yBAAyB,uDAAU;AACnC,sCAAsC,sDAAU;AAChD;AACA,yBAAyB,uDAAU;AACnC,sCAAsC,sDAAU;AAChD;AACA,yBAAyB,uDAAU;AACnC;AACA;AACA;AACA,sCAAsC,sDAAU;AAChD;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,kCAAkC,gEAAe,CAAC,gEAAe;AACjE,sBAAsB,sDAAU;AAChC;AACA;AACA;AACA;AACA,gBAAgB,qDAAO;AACvB;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,qDAAO;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,kDAAI;AACjC;AACA,4BAA4B,qDAAO;AACnC,+BAA+B,kBAAkB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,sDAAU;AACxC;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD;AAClD;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,+BAA+B,2EAAgC;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,sDAAU,gBAAgB,uDAAQ;AACxD;AACA;AACA;AACA,CAAC;AACgB;;;;;;;;;;;;;AC9NjB;AAAA;AAAA;AAAA;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACqC;AACA;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,mDAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D;AAC7D;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,kDAAQ;AACiB;;;;;;;;;;;;;AChN3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAU,aAAa;AACW;AACF;AAC8C;AACpC;AACoD;AACd;AACT;AACmB;AAC1D;AACkB;AACH;AACD;AACwD;AACtG;AACA;AACA;AACA;AACA,sBAAsB,+EAAU;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,8CAAM;AACd,QAAQ,4CAAK;AACb;AACA;AACA,kBAAkB,sDAAU;AAC5B;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,wDAAS;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,iCAAiC,wDAAS;AAC1C;AACA;AACA;AACA;AACA,yBAAyB,wDAAS;AAClC;AACA;AACA,iBAAiB;AACjB;AACA,gBAAgB,oDAAK;AACrB;AACA;AACA;AACA,4BAA4B,mDAAI;AAChC,sCAAsC,mDAAI;AAC1C;AACA;AACA,sCAAsC,mDAAI;AAC1C;AACA;AACA;AACA,mCAAmC,sDAAU;AAC7C;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,8CAA8C,0DAAgB;AAC9D,aAAa;AACb;AACA;AACA;AACA;AACA,sCAAsC,0DAAgB;AACtD,gCAAgC,sDAAU;AAC1C;AACA;AACA,sCAAsC,0DAAgB;AACtD,gCAAgC,sDAAU;AAC1C,sCAAsC,0DAAgB;AACtD,gCAAgC,sDAAU;AAC1C,sCAAsC,0DAAgB;AACtD,gCAAgC,sDAAU;AAC1C,sCAAsC,0DAAgB;AACtD,gCAAgC,sDAAU;AAC1C,sCAAsC,0DAAgB;AACtD,gCAAgC,sDAAU;AAC1C,sCAAsC,0DAAgB;AACtD;AACA,sCAAsC,0DAAgB;AACtD,gCAAgC,sDAAU;AAC1C;AACA;AACA,sCAAsC,0DAAgB;AACtD;AACA,sCAAsC,0DAAgB;AACtD,gCAAgC,sDAAU;AAC1C;AACA;AACA;AACA,0CAA0C,0DAAgB;AAC1D,oCAAoC,sDAAU;AAC9C,0CAA0C,0DAAgB;AAC1D,oCAAoC,sDAAU;AAC9C,0CAA0C,0DAAgB;AAC1D,oCAAoC,sDAAU;AAC9C,0CAA0C,0DAAgB;AAC1D,oCAAoC,sDAAU;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,iCAAiC,sDAAU;AAC3C;AACA,wCAAwC,sDAAU;AAClD;AACA,oCAAoC,sDAAU;AAC9C,oCAAoC,sDAAU;AAC9C,SAAS;AACT;AACA;AACA;AACA,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC;AACA,SAAS;AACT,iCAAiC,sDAAU;AAC3C;AACA,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C;AACA,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C;AACA,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C;AACA;AACA;AACA,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC;AACA,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC;AACA,SAAS;AACT,iCAAiC,sDAAU;AAC3C;AACA,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C;AACA,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC;AACA,wCAAwC,sDAAU;AAClD;AACA,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C;AACA,wCAAwC,sDAAU;AAClD,2BAA2B,sDAAU;AACrC;AACA,aAAa,OAAO;AACpB,SAAS;AACT,iCAAiC,sDAAU;AAC3C;AACA,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,oCAAoC,sDAAU;AAC9C,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC;AACA;AACA,wCAAwC,sDAAU;AAClD;AACA,SAAS;AACT,iCAAiC,sDAAU;AAC3C;AACA,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,0BAA0B,sDAAO;AACjC;AACA,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC;AACA;AACA;AACA;AACA,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC;AACA;AACA;AACA;AACA,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C;AACA;AACA;AACA,2BAA2B,sDAAU;AACrC;AACA;AACA;AACA;AACA,2BAA2B,sDAAU;AACrC;AACA,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,YAAY,8CAAM;AAClB,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C;AACA,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C;AACA,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,sDAAU;AACjC;AACA;AACA,aAAa;AACb,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,SAAS;AACT,iCAAiC,sDAAU;AAC3C,uBAAuB,sDAAU;AACjC,SAAS;AACT;AACA,yBAAyB,4CAAK;AAC9B;AACA,+BAA+B,sDAAU,SAAS;AAClD;AACA;AACA;AACA,oCAAoC,sDAAU;AAC9C;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,gCAAgC,sFAAY;AAC5C;AACA;AACA,wCAAwC,sGAAoB;AAC5D;AACA;AACA,sCAAsC,kGAAkB;AACxD;AACA;AACA,iCAAiC,wFAAa;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,sDAAU;AACzC;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA,kBAAkB,sDAAU;AAC5B;AACA;AACA,kBAAkB,sDAAU;AAC5B;AACA;AACA;AACA;AACA,mCAAmC,sDAAU;AAC7C;AACA;AACA;AACA,mCAAmC,sDAAU;AAC7C;AACA;AACA;AACA,mCAAmC,sDAAU;AAC7C;AACA;AACA,mCAAmC,sDAAU;AAC7C;AACA;AACA;AACA;AACA;AACA,2CAA2C,sDAAU;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,+BAA+B,oDAAK;AACpC;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,oBAAoB;AAC/C;AACA;AACA,iCAAiC,+EAAU;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,0BAA0B;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,sDAAU;AAC1D;AACA;AACA;AACA;AACA,qCAAqC,+EAAU;AAC/C,mCAAmC,+EAAU;AAC7C,4CAA4C,sDAAU;AACtD;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,+BAA+B,sDAAU;AACzC;AACA;AACA;AACA,+BAA+B,sDAAU;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,wDAAS;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,wBAAwB;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,oDAAK;AAClC;AACA;AACA,oBAAoB,mDAAI;AACxB;AACA;AACA;AACA,oBAAoB,mDAAI;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,oDAAK;AACjB,2BAA2B,sDAAO,oBAAoB,0DAAW;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,oDAAK;AACjB,iCAAiC,sDAAO,oBAAoB,0DAAW;AACvE;AACA;AACA;AACA;AACA,YAAY,sDAAO,yCAAyC,0DAAW;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,uCAAuC;AAC5E;AACA;AACA;AACA;AACA;AACA,uBAAuB,oBAAoB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,qBAAqB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,+DAAgB;AACxC;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,4CAAK;AACrB;AACA;AACA,qBAAqB;AACrB;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA,gBAAgB,8CAAM;AACtB;AACA;AACA,qBAAqB;AACrB;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,sDAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,sDAAU;AACzC;AACA;AACA;AACA,+BAA+B,sDAAU;AACzC;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,sDAAU;AACzC;AACA;AACA;AACA;AACA;AACA,0CAA0C,+EAAU;AACpD;AACA;AACA,0CAA0C,+EAAU;AACpD;AACA;AACA,0CAA0C,+EAAU;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,oDAAK;AACpB;AACA;AACA,YAAY,oDAAK;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,6DAAW;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,oDAAK;AACpB;AACA;AACA,eAAe,oDAAK;AACpB;AACA;AACA;AACA;AACA;AACA,eAAe,oDAAK;AACpB;AACA;AACA;AACA;AACA;AACA,kBAAkB,sDAAU;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,oBAAoB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACwB;;;;;;;;;;;;;AC3+BzB;AAAA;AAAA;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AAC+B;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,4CAAK;AACa;;;;;;;;;;;;;ACjDpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACqC;AACA;AACC;AACD;AACtC;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,kDAAQ;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mYAAmY;AACnY;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,YAAY,mDAAK;AACjB;AACA;AACA;AACA;AACA;AACA,YAAY,mDAAK;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,mDAAK;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,uDAAQ;AACzC;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,uDAAQ;AACxC;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,kDAAQ;AAC7B;AACA;AACA;AACA;AACA;AACA,qBAAqB,kDAAQ;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,uDAAQ,2CAA2C;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,kDAAQ;AACa;;;;;;;;;;;;;AChOvB;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACqC;AACI;AACJ;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,sDAAU;AAC3C;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,iCAAiC,sDAAU;AAC3C;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,mDAAK;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,+BAA+B,sDAAU;AACzC;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,sDAAU;AACzC;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,CAAC,CAAC,kDAAQ;AACU;;;;;;;;;;;;;ACnKpB;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACyC;AACJ;AACW;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,sDAAU;AAC3C;AACA;AACA;AACA;AACA;AACA,iBAAiB,QAAQ;AACzB;AACA,SAAS;AACT,iCAAiC,sDAAU;AAC3C;AACA;AACA,SAAS;AACT,iCAAiC,sDAAU;AAC3C;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,sDAAU;AAC9C,SAAS;AACT;AACA,oCAAoC,sDAAU;AAC9C,SAAS;AACT;AACA,oCAAoC,sDAAU;AAC9C,SAAS;AACT;AACA,oCAAoC,sDAAU;AAC9C,SAAS;AACT;AACA,oCAAoC,sDAAU;AAC9C,SAAS;AACT;AACA,oCAAoC,sDAAU;AAC9C,SAAS;AACT;AACA,oCAAoC,sDAAU;AAC9C,SAAS;AACT;AACA;AACA,oCAAoC,sDAAU;AAC9C,SAAS;AACT,aAAa,mDAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,mDAAK;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,mDAAK;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,mDAAK;AACjC,6BAA6B,uDAAS;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,mDAAK;AAClB,aAAa,uDAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,mDAAK;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,mDAAK;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,mDAAK;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,mDAAK;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,mDAAK;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,kDAAQ;AACa;;;;;;;;;;;;;AChNvB;AAAA;AAAA;AAAA;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACyC;AACJ;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,sDAAU;AACrC,4BAA4B,sDAAU;AACtC;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,sDAAU;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,kDAAQ;AACiB;;;;;;;;;;;;;ACxE3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACyC;AACJ;AACsC;AACtC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,sDAAU;AAC3C;AACA,SAAS;AACT,iCAAiC,sDAAU;AAC3C;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uEAAuE;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,sDAAU;AAC9C,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA,oCAAoC,sDAAU;AAC9C,SAAS;AACT,aAAa,mDAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,mDAAK;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,mDAAK;AACrB;AACA;AACA;AACA;AACA,qCAAqC,uFAAkB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,qCAAqC;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,sDAAU;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,kDAAQ;AACa;;;;;;;;;;;;;ACrKvB;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACsB;;;;;;;;;;;;;ACPvB;AAAA;AAAA;AACA;AACA;AACA;AACA,CAAC;AAC4B;;;;;;;;;;;;;ACL7B;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAC0B;;;;;;;;;;;;;ACP3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0C;AACE;AACY;AACJ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,gEAAe;AAChC,2BAA2B,wDAAW;AACtC,iBAAiB,gEAAe;AAChC;AACA,sCAAsC,oEAAiB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,sDAAU;AAChE,sDAAsD,sDAAU;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,wDAAW;AACtC;AACA;AACA;AACA,CAAC;AAC6B;;;;;;;;;;;;;ACvC9B;AAAA;AAAO;AACP;AACA;AACA;AACA,CAAC,0CAA0C;;;;;;;;;;;;;ACJ3C;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACyC;AACU;AACd;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,sDAAU;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,8BAA8B,mDAAK;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,sDAAU;AAC7C;AACA;AACA,mCAAmC,sDAAU;AAC7C;AACA,uCAAuC,iCAAiC;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,gEAAe;AACI;;;;;;;;;;;;;ACtErB;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA,CAAC;AAC+B;;;;;;;;;;;;;ACNhC;AAAA;AAAA;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AAC2C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,wDAAW;AACS;;;;;;;;;;;;;AC1BtB;AAAA;AAAA;AAAA;AAA0C;AACJ;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,sDAAU;AAC3C;AACA,SAAS;AACT;AACA;AACA;AACA,QAAQ,mDAAK;AACb;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACgB;;;;;;;;;;;;;AClCjB;AAAA;AAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,4BAA4B;;;;;;;;;;;;;ACX7B;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACyC;AACU;AACd;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,mDAAK;AACnC;AACA;AACA;AACA,iCAAiC,sDAAU;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,sDAAU;AAC7C;AACA;AACA,mCAAmC,sDAAU;AAC7C;AACA,uCAAuC,kCAAkC;AACzE;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,CAAC,CAAC,gEAAe;AACK;;;;;;;;;;;;;ACrEtB;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACyC;AACJ;AACc;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,sDAAU;AAC3C;AACA,SAAS;AACT,iCAAiC,sDAAU;AAC3C;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,sDAAU;AAClD;AACA,SAAS;AACT;AACA,YAAY,gEAAe;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,kDAAQ;AACO;;;;;;;;;;;;;AC3EjB;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACsB;;;;;;;;;;;;;ACZvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACyC;AACJ;AACc;AACE;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,sDAAU;AAC3C;AACA,SAAS;AACT,iCAAiC,sDAAU;AAC3C;AACA,SAAS;AACT,iCAAiC,sDAAU;AAC3C;AACA,SAAS;AACT;AACA;AACA;AACA,YAAY,iEAAgB;AAC5B,gDAAgD;AAChD;AACA;AACA,6CAA6C,QAAQ,WAAW,eAAe,cAAc,MAAM,kBAAkB,UAAU,gBAAgB,QAAQ;AACvJ,kEAAkE,0BAA0B;AAC5F;AACA,0DAA0D,aAAa;AACvE,iEAAiE,QAAQ,IAAI,QAAQ,MAAM;AAC3F,yEAAyE,wBAAwB,IAAI,qBAAqB;AAC1H;AACA;AACA,+BAA+B,iBAAiB;AAChD;AACA,+BAA+B,KAAK;AACpC,SAAS;AACT;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,iEAAgB;AAC1D,6CAA6C,iEAAgB;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,+BAA+B,qDAAO;AACtC;AACA,2BAA2B,qDAAO;AAClC;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,wBAAwB;AAC/C;AACA;AACA;AACA,2BAA2B,mDAAK;AAChC,uBAAuB,wBAAwB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,sDAAU;AAC7C,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,2CAA2C;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,qBAAqB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8FAA8F,mDAAK;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,kDAAQ;AACY","file":"uv-default-extension~uv-mediaelement-extension~uv-model-viewer-extension~uv-openseadragon-extension~~ce4435a6.e81ec8a44b0b007ad3d4.js","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { BaseEvents } from \"../uv-shared-module/BaseEvents\";\nimport { Dialogue } from \"../uv-shared-module/Dialogue\";\nimport { sanitize } from \"../../Utils\";\nvar AuthDialogue = /** @class */ (function (_super) {\n    __extends(AuthDialogue, _super);\n    function AuthDialogue($element) {\n        return _super.call(this, $element) || this;\n    }\n    AuthDialogue.prototype.create = function () {\n        var _this = this;\n        this.setConfig(\"authDialogue\");\n        _super.prototype.create.call(this);\n        this.openCommand = BaseEvents.SHOW_AUTH_DIALOGUE;\n        this.closeCommand = BaseEvents.HIDE_AUTH_DIALOGUE;\n        this.component.subscribe(this.openCommand, function (e) {\n            _this.closeCallback = e.closeCallback;\n            _this.confirmCallback = e.confirmCallback;\n            _this.cancelCallback = e.cancelCallback;\n            _this.service = e.service;\n            _this.open();\n        });\n        this.component.subscribe(this.closeCommand, function () {\n            _this.close();\n        });\n        this.$title = $(\"<h1></h1>\");\n        this.$content.append(this.$title);\n        this.$content.append('\\\r\n            <div>\\\r\n                <p class=\"message scroll\"></p>\\\r\n            </div>');\n        this.$buttons.prepend(this._buttonsToAdd());\n        this.$message = this.$content.find(\".message\");\n        this.$confirmButton = this.$buttons.find(\".confirm\");\n        this.$confirmButton.text(this.content.confirm);\n        this.$cancelButton = this.$buttons.find(\".close\");\n        this.$cancelButton.text(this.content.cancel);\n        this.$element.hide();\n        this.$confirmButton.on(\"click\", function (e) {\n            e.preventDefault();\n            if (_this.confirmCallback) {\n                _this.confirmCallback();\n            }\n            _this.close();\n        });\n        this.$cancelButton.on(\"click\", function (e) {\n            e.preventDefault();\n            if (_this.cancelCallback) {\n                _this.cancelCallback();\n            }\n            _this.close();\n        });\n    };\n    AuthDialogue.prototype.open = function () {\n        _super.prototype.open.call(this);\n        var header = this.service.getHeader();\n        var description = this.service.getDescription();\n        var confirmLabel = this.service.getConfirmLabel();\n        if (header) {\n            this.$title.text(sanitize(header));\n        }\n        if (description) {\n            this.$message.html(sanitize(description));\n            this.$message.targetBlank();\n            this.$message.find(\"a\").on(\"click\", function () {\n                var url = $(this).attr(\"href\");\n                this.component.publish(BaseEvents.EXTERNAL_LINK_CLICKED, url);\n            });\n        }\n        if (confirmLabel) {\n            this.$confirmButton.text(sanitize(confirmLabel));\n        }\n        this.resize();\n    };\n    AuthDialogue.prototype.resize = function () {\n        _super.prototype.resize.call(this);\n    };\n    AuthDialogue.prototype._buttonsToAdd = function () {\n        var buttonsToAdd = '<a class=\"confirm btn btn-primary\" href=\"#\" target=\"_parent\"></a>';\n        // If the top button is enabled, add an additional close button for consistency.\n        if (this.config.topCloseButtonEnabled) {\n            buttonsToAdd += '<button class=\"close btn btn-default\"></button>';\n        }\n        return buttonsToAdd;\n    };\n    return AuthDialogue;\n}(Dialogue));\nexport { AuthDialogue };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { BaseEvents } from \"../uv-shared-module/BaseEvents\";\nimport { Dialogue } from \"../uv-shared-module/Dialogue\";\nvar ClickThroughDialogue = /** @class */ (function (_super) {\n    __extends(ClickThroughDialogue, _super);\n    function ClickThroughDialogue($element) {\n        return _super.call(this, $element) || this;\n    }\n    ClickThroughDialogue.prototype.create = function () {\n        var _this = this;\n        this.setConfig(\"clickThroughDialogue\");\n        _super.prototype.create.call(this);\n        this.openCommand = BaseEvents.SHOW_CLICKTHROUGH_DIALOGUE;\n        this.closeCommand = BaseEvents.HIDE_CLICKTHROUGH_DIALOGUE;\n        this.component.subscribe(this.openCommand, function (params) {\n            _this.acceptCallback = params.acceptCallback;\n            _this.resource = params.resource;\n            _this.open();\n        });\n        this.component.subscribe(this.closeCommand, function () {\n            _this.close();\n        });\n        this.$title = $(\"<h1></h1>\");\n        this.$content.append(this.$title);\n        this.$content.append('\\\n            <div>\\\n                <p class=\"message scroll\"></p>\\\n                <div class=\"buttons\">\\\n                    <a class=\"acceptTerms btn btn-primary\" href=\"#\" target=\"_parent\"></a>\\\n                </div>\\\n            </div>');\n        this.$message = this.$content.find(\".message\");\n        this.$acceptTermsButton = this.$content.find(\".acceptTerms\");\n        // TODO: get from config this.$acceptTermsButton.text(this.content.acceptTerms); // figure out config\n        this.$acceptTermsButton.text(\"Accept Terms and Open\");\n        this.$element.hide();\n        this.$acceptTermsButton.on(\"click\", function (e) {\n            e.preventDefault();\n            _this.close();\n            _this.component.publish(BaseEvents.ACCEPT_TERMS);\n            if (_this.acceptCallback)\n                _this.acceptCallback();\n        });\n    };\n    ClickThroughDialogue.prototype.open = function () {\n        _super.prototype.open.call(this);\n        if (this.resource.clickThroughService) {\n            this.$title.text(this.resource.clickThroughService.getProperty(\"label\"));\n            this.$message.html(this.resource.clickThroughService.getProperty(\"description\"));\n            this.$message.targetBlank();\n        }\n        this.$message.find(\"a\").on(\"click\", function () {\n            var url = $(this).attr(\"href\");\n            this.component.publish(BaseEvents.EXTERNAL_LINK_CLICKED, url);\n        });\n        this.resize();\n    };\n    ClickThroughDialogue.prototype.resize = function () {\n        _super.prototype.resize.call(this);\n    };\n    return ClickThroughDialogue;\n}(Dialogue));\nexport { ClickThroughDialogue };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { BaseEvents } from \"../uv-shared-module/BaseEvents\";\nimport { Dialogue } from \"../uv-shared-module/Dialogue\";\nvar LoginDialogue = /** @class */ (function (_super) {\n    __extends(LoginDialogue, _super);\n    function LoginDialogue($element) {\n        return _super.call(this, $element) || this;\n    }\n    LoginDialogue.prototype.create = function () {\n        var _this = this;\n        this.setConfig(\"loginDialogue\");\n        _super.prototype.create.call(this);\n        this.openCommand = BaseEvents.SHOW_LOGIN_DIALOGUE;\n        this.closeCommand = BaseEvents.HIDE_LOGIN_DIALOGUE;\n        this.component.subscribe(this.openCommand, function (e) {\n            _this.loginCallback = e.loginCallback;\n            _this.logoutCallback = e.logoutCallback;\n            _this.options = e.options;\n            _this.resource = e.resource;\n            _this.open();\n        });\n        this.component.subscribe(this.closeCommand, function () {\n            _this.close();\n        });\n        this.$title = $(\"<h1></h1>\");\n        this.$content.append(this.$title);\n        this.$content.append('\\\n            <div>\\\n                <p class=\"message scroll\"></p>\\\n                <div class=\"buttons\">\\\n                    <a class=\"logout btn btn-primary\" href=\"#\" target=\"_parent\"></a>\\\n                    <a class=\"login btn btn-primary\" href=\"#\" target=\"_parent\"></a>\\\n                    <a class=\"cancel btn btn-primary\" href=\"#\"></a>\\\n                </div>\\\n            </div>');\n        this.$message = this.$content.find(\".message\");\n        this.$loginButton = this.$content.find(\".login\");\n        this.$loginButton.text(this.content.login);\n        this.$logoutButton = this.$content.find(\".logout\");\n        this.$logoutButton.text(this.content.logout);\n        this.$cancelButton = this.$content.find(\".cancel\");\n        this.$cancelButton.text(this.content.cancel);\n        this.$element.hide();\n        this.$loginButton.on(\"click\", function (e) {\n            e.preventDefault();\n            _this.close();\n            if (_this.loginCallback)\n                _this.loginCallback();\n        });\n        this.$logoutButton.on(\"click\", function (e) {\n            e.preventDefault();\n            _this.close();\n            if (_this.logoutCallback)\n                _this.logoutCallback();\n        });\n        this.$cancelButton.on(\"click\", function (e) {\n            e.preventDefault();\n            _this.close();\n        });\n        this.updateLogoutButton();\n    };\n    LoginDialogue.prototype.open = function () {\n        _super.prototype.open.call(this);\n        var message = \"\";\n        if (this.resource.loginService) {\n            this.$title.text(this.resource.loginService.getProperty(\"label\"));\n            message = this.resource.loginService.getProperty(\"description\");\n        }\n        if (this.options.warningMessage) {\n            message =\n                '<span class=\"warning\">' +\n                    this.extension.data.config.content[this.options.warningMessage] +\n                    '</span><span class=\"description\">' +\n                    message +\n                    \"</span>\";\n        }\n        this.updateLogoutButton();\n        this.$message.html(message);\n        this.$message.targetBlank();\n        this.$message.find(\"a\").on(\"click\", function () {\n            var url = $(this).attr(\"href\");\n            this.component.publish(BaseEvents.EXTERNAL_LINK_CLICKED, url);\n        });\n        if (this.options.showCancelButton) {\n            this.$cancelButton.show();\n        }\n        else {\n            this.$cancelButton.hide();\n        }\n        this.resize();\n    };\n    LoginDialogue.prototype.updateLogoutButton = function () {\n        if (this.extension.isLoggedIn) {\n            this.$logoutButton.show();\n        }\n        else {\n            this.$logoutButton.hide();\n        }\n    };\n    LoginDialogue.prototype.resize = function () {\n        _super.prototype.resize.call(this);\n    };\n    return LoginDialogue;\n}(Dialogue));\nexport { LoginDialogue };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { BaseEvents } from \"../uv-shared-module/BaseEvents\";\nimport { Dialogue } from \"../uv-shared-module/Dialogue\";\nvar RestrictedDialogue = /** @class */ (function (_super) {\n    __extends(RestrictedDialogue, _super);\n    function RestrictedDialogue($element) {\n        return _super.call(this, $element) || this;\n    }\n    RestrictedDialogue.prototype.create = function () {\n        var _this = this;\n        this.setConfig(\"restrictedDialogue\");\n        _super.prototype.create.call(this);\n        this.openCommand = BaseEvents.SHOW_RESTRICTED_DIALOGUE;\n        this.closeCommand = BaseEvents.HIDE_RESTRICTED_DIALOGUE;\n        this.component.subscribe(this.openCommand, function (e) {\n            _this.acceptCallback = e.acceptCallback;\n            _this.options = e.options;\n            _this.resource = e.resource;\n            _this.open();\n        });\n        this.component.subscribe(this.closeCommand, function () {\n            _this.close();\n        });\n        this.$title = $(\"<h1></h1>\");\n        this.$content.append(this.$title);\n        this.$content.append('\\\n            <div>\\\n                <p class=\"message scroll\"></p>\\\n                <div class=\"buttons\">\\\n                    <a class=\"cancel btn btn-primary\" href=\"#\" target=\"_parent\"></a>\\\n                </div>\\\n            </div>');\n        this.$message = this.$content.find(\".message\");\n        this.$message.targetBlank();\n        // todo: revisit?\n        //this.$nextVisibleButton = this.$content.find('.nextvisible');\n        //this.$nextVisibleButton.text(this.content.nextVisibleItem);\n        this.$cancelButton = this.$content.find(\".cancel\");\n        this.$cancelButton.text(this.content.cancel);\n        this.$element.hide();\n        this.$cancelButton.on(\"click\", function (e) {\n            e.preventDefault();\n            _this.close();\n        });\n    };\n    RestrictedDialogue.prototype.open = function () {\n        _super.prototype.open.call(this);\n        this.isAccepted = false;\n        var message = \"\";\n        if (this.resource.restrictedService) {\n            this.$title.text(this.resource.restrictedService.getProperty(\"label\"));\n            message = this.resource.restrictedService.getProperty(\"description\");\n        }\n        this.$message.html(message);\n        this.$message.targetBlank();\n        this.$message.find(\"a\").on(\"click\", function () {\n            var url = $(this).attr(\"href\");\n            this.component.publish(BaseEvents.EXTERNAL_LINK_CLICKED, url);\n        });\n        this.resize();\n    };\n    RestrictedDialogue.prototype.close = function () {\n        _super.prototype.close.call(this);\n        if (!this.isAccepted && this.acceptCallback) {\n            this.isAccepted = true;\n            this.acceptCallback();\n        }\n    };\n    RestrictedDialogue.prototype.resize = function () {\n        _super.prototype.resize.call(this);\n    };\n    return RestrictedDialogue;\n}(Dialogue));\nexport { RestrictedDialogue };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { BaseEvents } from \"../uv-shared-module/BaseEvents\";\nimport { Dialogue } from \"../uv-shared-module/Dialogue\";\nvar metadata = require(\"../../../package.json\");\nvar SettingsDialogue = /** @class */ (function (_super) {\n    __extends(SettingsDialogue, _super);\n    function SettingsDialogue($element) {\n        return _super.call(this, $element) || this;\n    }\n    SettingsDialogue.prototype.create = function () {\n        var _this = this;\n        this.setConfig(\"settingsDialogue\");\n        _super.prototype.create.call(this);\n        this.openCommand = BaseEvents.SHOW_SETTINGS_DIALOGUE;\n        this.closeCommand = BaseEvents.HIDE_SETTINGS_DIALOGUE;\n        this.component.subscribe(this.openCommand, function () {\n            _this.open();\n        });\n        this.component.subscribe(this.closeCommand, function () {\n            _this.close();\n        });\n        this.$title = $(\"<h1></h1>\");\n        this.$content.append(this.$title);\n        this.$scroll = $('<div class=\"scroll\"></div>');\n        this.$content.append(this.$scroll);\n        this.$version = $('<div class=\"version\"></div>');\n        this.$content.append(this.$version);\n        this.$website = $('<div class=\"website\"></div>');\n        this.$content.append(this.$website);\n        this.$locale = $('<div class=\"setting locale\"></div>');\n        this.$scroll.append(this.$locale);\n        this.$localeLabel = $('<label for=\"locale\">' + this.content.locale + \"</label>\");\n        this.$locale.append(this.$localeLabel);\n        this.$localeDropDown = $('<select id=\"locale\"></select>');\n        this.$locale.append(this.$localeDropDown);\n        // initialise ui.\n        this.$title.text(this.content.title);\n        this.$website.html(this.content.website);\n        this.$website.targetBlank();\n        this._createLocalesMenu();\n        this.$element.hide();\n    };\n    SettingsDialogue.prototype.getSettings = function () {\n        return this.extension.getSettings();\n    };\n    SettingsDialogue.prototype.updateSettings = function (settings) {\n        this.extension.updateSettings(settings);\n        this.component.publish(BaseEvents.UPDATE_SETTINGS, settings);\n    };\n    SettingsDialogue.prototype.open = function () {\n        _super.prototype.open.call(this);\n        this.$version.text(\"v\" + metadata.version);\n    };\n    SettingsDialogue.prototype._createLocalesMenu = function () {\n        var _this = this;\n        var locales = this.extension.data.locales;\n        if (locales && locales.length > 1) {\n            for (var i = 0; i < locales.length; i++) {\n                var locale = locales[i];\n                this.$localeDropDown.append('<option value=\"' + locale.name + '\">' + locale.label + \"</option>\");\n            }\n            this.$localeDropDown.val(locales[0].name);\n        }\n        else {\n            this.$locale.hide();\n        }\n        this.$localeDropDown.change(function () {\n            _this.extension.changeLocale(_this.$localeDropDown.val());\n        });\n    };\n    SettingsDialogue.prototype.resize = function () {\n        _super.prototype.resize.call(this);\n    };\n    return SettingsDialogue;\n}(Dialogue));\nexport { SettingsDialogue };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { BaseEvents } from \"../uv-shared-module/BaseEvents\";\nimport { Dialogue } from \"../uv-shared-module/Dialogue\";\nimport { Bools, Numbers } from \"@edsilv/utils\";\nvar ShareDialogue = /** @class */ (function (_super) {\n    __extends(ShareDialogue, _super);\n    function ShareDialogue($element) {\n        var _this = _super.call(this, $element) || this;\n        _this.aspectRatio = 0.75;\n        _this.isEmbedViewVisible = false;\n        _this.isShareViewVisible = false;\n        _this.maxWidth = 8000;\n        _this.maxHeight = _this.maxWidth * _this.aspectRatio;\n        _this.minWidth = 200;\n        _this.minHeight = _this.minWidth * _this.aspectRatio;\n        _this.shareManifestsEnabled = false;\n        return _this;\n    }\n    ShareDialogue.prototype.create = function () {\n        var _this = this;\n        this.setConfig(\"shareDialogue\");\n        _super.prototype.create.call(this);\n        this.openCommand = BaseEvents.SHOW_SHARE_DIALOGUE;\n        this.closeCommand = BaseEvents.HIDE_SHARE_DIALOGUE;\n        this.shareManifestsEnabled = this.options.shareManifestsEnabled || false;\n        this.component.subscribe(this.openCommand, function (triggerButton) {\n            _this.open(triggerButton);\n            if (_this.isShareAvailable()) {\n                _this.openShareView();\n            }\n            else {\n                _this.openEmbedView();\n            }\n        });\n        this.component.subscribe(this.closeCommand, function () {\n            _this.close();\n        });\n        this.component.subscribe(BaseEvents.SHOW_EMBED_DIALOGUE, function (triggerButton) {\n            _this.open(triggerButton);\n            _this.openEmbedView();\n        });\n        this.$tabs = $('<div class=\"tabs\"></div>');\n        this.$content.append(this.$tabs);\n        this.$shareButton = $('<a class=\"share tab default\" tabindex=\"0\">' + this.content.share + \"</a>\");\n        this.$shareButton.prop(\"title\", this.content.share);\n        this.$tabs.append(this.$shareButton);\n        this.$embedButton = $('<a class=\"embed tab\" tabindex=\"0\">' + this.content.embed + \"</a>\");\n        this.$embedButton.prop(\"title\", this.content.embed);\n        this.$tabs.append(this.$embedButton);\n        this.$tabsContent = $('<div class=\"tabsContent\"></div>');\n        this.$content.append(this.$tabsContent);\n        this.$footer = $('<div class=\"footer\"></div>');\n        this.$content.append(this.$footer);\n        this.$shareView = $('<div class=\"shareView view\"></div>');\n        this.$tabsContent.append(this.$shareView);\n        this.$shareHeader = $('<div class=\"header\"></div>');\n        this.$shareView.append(this.$shareHeader);\n        this.$shareLink = $('<a class=\"shareLink\" onclick=\"return false;\"></a>');\n        this.$shareView.append(this.$shareLink);\n        this.$shareInput = $(\"<input class=\\\"shareInput\\\" type=\\\"text\\\" readonly=\\\"readonly\\\" aria-label=\\\"\" + this.content.shareUrl + \"\\\"/>\");\n        this.$shareView.append(this.$shareInput);\n        this.$shareFrame = $('<iframe class=\"shareFrame\"></iframe>');\n        this.$shareView.append(this.$shareFrame);\n        this.$embedView = $('<div class=\"embedView view\"></div>');\n        this.$tabsContent.append(this.$embedView);\n        this.$embedHeader = $('<div class=\"header\"></div>');\n        this.$embedView.append(this.$embedHeader);\n        // this.$link = $('<a target=\"_blank\"></a>');\n        // this.$embedView.find('.leftCol').append(this.$link);\n        // this.$image = $('<img class=\"share\" />');\n        // this.$embedView.append(this.$image);\n        this.$code = $(\"<input class=\\\"code\\\" type=\\\"text\\\" readonly=\\\"readonly\\\" aria-label=\\\"\" + this.content.embed + \"\\\"/>\");\n        this.$embedView.append(this.$code);\n        this.$customSize = $('<div class=\"customSize\"></div>');\n        this.$embedView.append(this.$customSize);\n        this.$size = $('<span class=\"size\">' + this.content.size + \"</span>\");\n        this.$customSize.append(this.$size);\n        this.$customSizeDropDown = $('<select id=\"size\" aria-label=\"' + this.content.size + '\"></select>');\n        this.$customSize.append(this.$customSizeDropDown);\n        this.$customSizeDropDown.append('<option value=\"small\" data-width=\"560\" data-height=\"420\">560 x 420</option>');\n        this.$customSizeDropDown.append('<option value=\"medium\" data-width=\"640\" data-height=\"480\">640 x 480</option>');\n        this.$customSizeDropDown.append('<option value=\"large\" data-width=\"800\" data-height=\"600\">800 x 600</option>');\n        this.$customSizeDropDown.append('<option value=\"custom\">' + this.content.customSize + \"</option>\");\n        this.$widthInput = $('<input class=\"width\" type=\"text\" maxlength=\"10\" aria-label=\"' +\n            this.content.width +\n            '\"/>');\n        this.$customSize.append(this.$widthInput);\n        this.$x = $('<span class=\"x\">x</span>');\n        this.$customSize.append(this.$x);\n        this.$heightInput = $('<input class=\"height\" type=\"text\" maxlength=\"10\" aria-label=\"' +\n            this.content.height +\n            '\"/>');\n        this.$customSize.append(this.$heightInput);\n        var iiifUrl = this.extension.getIIIFShareUrl(this.shareManifestsEnabled);\n        if (this.shareManifestsEnabled) {\n            this.$iiifButton = $('<a class=\"imageBtn iiif\" href=\"' +\n                iiifUrl +\n                '\" title=\"' +\n                this.content.iiif +\n                '\" target=\"_blank\"></a>');\n            this.$footer.append(this.$iiifButton);\n        }\n        this.$termsOfUseButton = $('<a href=\"#\">' + this.extension.data.config.content.termsOfUse + \"</a>\");\n        this.$footer.append(this.$termsOfUseButton);\n        this.$widthInput.on(\"keydown\", function (e) {\n            return Numbers.numericalInput(e);\n        });\n        this.$heightInput.on(\"keydown\", function (e) {\n            return Numbers.numericalInput(e);\n        });\n        this.$shareInput.focus(function () {\n            $(this).select();\n        });\n        this.$code.focus(function () {\n            $(this).select();\n        });\n        this.$shareButton.onPressed(function () {\n            _this.openShareView();\n        });\n        this.$embedButton.onPressed(function () {\n            _this.openEmbedView();\n        });\n        this.$customSizeDropDown.change(function () {\n            _this.update();\n        });\n        this.$widthInput.change(function () {\n            _this.updateHeightRatio();\n            _this.update();\n        });\n        this.$heightInput.change(function () {\n            _this.updateWidthRatio();\n            _this.update();\n        });\n        this.$termsOfUseButton.onPressed(function () {\n            _this.component.publish(BaseEvents.SHOW_TERMS_OF_USE);\n        });\n        this.$element.hide();\n        this.update();\n    };\n    ShareDialogue.prototype.open = function (triggerButton) {\n        _super.prototype.open.call(this, triggerButton);\n        this.update();\n    };\n    ShareDialogue.prototype.getShareUrl = function () {\n        return this.extension.getShareUrl();\n    };\n    ShareDialogue.prototype.isShareAvailable = function () {\n        return !!this.getShareUrl();\n    };\n    ShareDialogue.prototype.update = function () {\n        if (this.isShareAvailable()) {\n            this.$shareButton.show();\n        }\n        else {\n            this.$shareButton.hide();\n        }\n        var $selected = this.getSelectedSize();\n        if ($selected.val() === \"custom\") {\n            this.$widthInput.show();\n            this.$x.show();\n            this.$heightInput.show();\n        }\n        else {\n            this.$widthInput.hide();\n            this.$x.hide();\n            this.$heightInput.hide();\n            this.currentWidth = Number($selected.data(\"width\"));\n            this.currentHeight = Number($selected.data(\"height\"));\n            this.$widthInput.val(String(this.currentWidth));\n            this.$heightInput.val(String(this.currentHeight));\n        }\n        this.updateInstructions();\n        this.updateShareOptions();\n        this.updateShareFrame();\n        this.updateTermsOfUseButton();\n    };\n    ShareDialogue.prototype.updateShareOptions = function () {\n        var shareUrl = this.getShareUrl();\n        if (shareUrl) {\n            this.$shareInput.val(shareUrl);\n            this.$shareLink.prop(\"href\", shareUrl);\n            this.$shareLink.text(shareUrl);\n        }\n        if (this.extension.isMobile()) {\n            this.$shareInput.hide();\n            this.$shareLink.show();\n        }\n        else {\n            this.$shareInput.show();\n            this.$shareLink.hide();\n        }\n    };\n    ShareDialogue.prototype.updateInstructions = function () {\n        if (Bools.getBool(this.options.instructionsEnabled, false)) {\n            this.$shareHeader.show();\n            this.$embedHeader.show();\n            this.$shareHeader.text(this.content.shareInstructions);\n            this.$embedHeader.text(this.content.embedInstructions);\n        }\n        else {\n            this.$shareHeader.hide();\n            this.$embedHeader.hide();\n        }\n    };\n    // updateThumbnail(): void {\n    //     var canvas: manifesto.Canvas = this.extension.helper.getCurrentCanvas();\n    //     if (!canvas) return;\n    //     var thumbnail = canvas.getProperty('thumbnail');\n    //     if (!thumbnail || !_.isString(thumbnail)){\n    //         thumbnail = canvas.getCanonicalImageUri(this.extension.data.config.options.bookmarkThumbWidth);\n    //     }\n    //     this.$link.attr('href', thumbnail);\n    //     this.$image.attr('src', thumbnail);\n    // }\n    ShareDialogue.prototype.getSelectedSize = function () {\n        return this.$customSizeDropDown.find(\":selected\");\n    };\n    ShareDialogue.prototype.updateWidthRatio = function () {\n        this.currentHeight = Number(this.$heightInput.val());\n        if (this.currentHeight < this.minHeight) {\n            this.currentHeight = this.minHeight;\n            this.$heightInput.val(String(this.currentHeight));\n        }\n        else if (this.currentHeight > this.maxHeight) {\n            this.currentHeight = this.maxHeight;\n            this.$heightInput.val(String(this.currentHeight));\n        }\n        this.currentWidth = Math.floor(this.currentHeight / this.aspectRatio);\n        this.$widthInput.val(String(this.currentWidth));\n    };\n    ShareDialogue.prototype.updateHeightRatio = function () {\n        this.currentWidth = Number(this.$widthInput.val());\n        if (this.currentWidth < this.minWidth) {\n            this.currentWidth = this.minWidth;\n            this.$widthInput.val(String(this.currentWidth));\n        }\n        else if (this.currentWidth > this.maxWidth) {\n            this.currentWidth = this.maxWidth;\n            this.$widthInput.val(String(this.currentWidth));\n        }\n        this.currentHeight = Math.floor(this.currentWidth * this.aspectRatio);\n        this.$heightInput.val(String(this.currentHeight));\n    };\n    ShareDialogue.prototype.updateShareFrame = function () {\n        var shareUrl = this.extension.helper.getShareServiceUrl();\n        if (!shareUrl) {\n            return;\n        }\n        if (Bools.getBool(this.config.options.shareFrameEnabled, true) &&\n            shareUrl) {\n            this.$shareFrame.prop(\"src\", shareUrl);\n            this.$shareFrame.show();\n        }\n        else {\n            this.$shareFrame.hide();\n        }\n    };\n    ShareDialogue.prototype.updateTermsOfUseButton = function () {\n        var requiredStatement = this.extension.helper.getRequiredStatement();\n        if (Bools.getBool(this.extension.data.config.options.termsOfUseEnabled, false) &&\n            requiredStatement &&\n            requiredStatement.value) {\n            this.$termsOfUseButton.show();\n        }\n        else {\n            this.$termsOfUseButton.hide();\n        }\n    };\n    ShareDialogue.prototype.openShareView = function () {\n        this.isShareViewVisible = true;\n        this.isEmbedViewVisible = false;\n        this.$embedView.hide();\n        this.$shareView.show();\n        this.$shareButton.addClass(\"on default\");\n        this.$embedButton.removeClass(\"on default\");\n        this.resize();\n    };\n    ShareDialogue.prototype.openEmbedView = function () {\n        this.isShareViewVisible = false;\n        this.isEmbedViewVisible = true;\n        this.$embedView.show();\n        this.$shareView.hide();\n        this.$shareButton.removeClass(\"on default\");\n        this.$embedButton.addClass(\"on default\");\n        this.resize();\n    };\n    ShareDialogue.prototype.close = function () {\n        _super.prototype.close.call(this);\n    };\n    ShareDialogue.prototype.getViews = function () {\n        return this.$tabsContent.find(\".view\");\n    };\n    ShareDialogue.prototype.equaliseViewHeights = function () {\n        this.getViews().equaliseHeight(true);\n    };\n    ShareDialogue.prototype.resize = function () {\n        this.equaliseViewHeights();\n        this.setDockedPosition();\n    };\n    return ShareDialogue;\n}(Dialogue));\nexport { ShareDialogue };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { BaseEvents } from \"../uv-shared-module/BaseEvents\";\nimport { RightPanel } from \"../uv-shared-module/RightPanel\";\nimport { sanitize } from \"../../Utils\";\nimport { Bools, Urls } from \"@edsilv/utils\";\nimport { UriLabeller } from \"@iiif/manifold\";\nimport { MetadataComponent, LimitType } from \"@iiif/iiif-metadata-component\";\nvar MoreInfoRightPanel = /** @class */ (function (_super) {\n    __extends(MoreInfoRightPanel, _super);\n    function MoreInfoRightPanel($element) {\n        return _super.call(this, $element) || this;\n    }\n    MoreInfoRightPanel.prototype.create = function () {\n        var _this = this;\n        this.setConfig(\"moreInfoRightPanel\");\n        _super.prototype.create.call(this);\n        this.component.subscribe(BaseEvents.CANVAS_INDEX_CHANGED, function () {\n            _this.databind();\n        });\n        this.component.subscribe(BaseEvents.RANGE_CHANGED, function () {\n            _this.databind();\n        });\n        this.setTitle(this.config.content.title);\n        this.$metadata = $('<div class=\"iiif-metadata-component\"></div>');\n        this.$main.append(this.$metadata);\n        this.metadataComponent = new MetadataComponent({\n            target: this.$metadata[0],\n            data: this._getData()\n        });\n        this.metadataComponent.on(\"iiifViewerLinkClicked\", function (href) {\n            // get the hash param.\n            var rangeId = Urls.getHashParameterFromString(\"rid\", href);\n            if (rangeId) {\n                var range = _this.extension.helper.getRangeById(rangeId);\n                if (range) {\n                    _this.component.publish(BaseEvents.RANGE_CHANGED, range);\n                }\n            }\n        }, false);\n    };\n    MoreInfoRightPanel.prototype.toggleFinish = function () {\n        _super.prototype.toggleFinish.call(this);\n        this.databind();\n    };\n    MoreInfoRightPanel.prototype.databind = function () {\n        this.metadataComponent.set(this._getData());\n    };\n    MoreInfoRightPanel.prototype._getCurrentRange = function () {\n        var range = this.extension.helper.getCurrentRange();\n        return range;\n    };\n    MoreInfoRightPanel.prototype._getData = function () {\n        return {\n            canvasDisplayOrder: this.config.options.canvasDisplayOrder,\n            canvases: this.extension.getCurrentCanvases(),\n            canvasExclude: this.config.options.canvasExclude,\n            canvasLabels: this.extension.getCanvasLabels(this.content.page),\n            content: this.config.content,\n            copiedMessageDuration: 2000,\n            copyToClipboardEnabled: Bools.getBool(this.config.options.copyToClipboardEnabled, false),\n            helper: this.extension.helper,\n            licenseFormatter: new UriLabeller(this.config.license ? this.config.license : {}),\n            limit: this.config.options.textLimit || 4,\n            limitType: LimitType.LINES,\n            limitToRange: Bools.getBool(this.config.options.limitToRange, false),\n            manifestDisplayOrder: this.config.options.manifestDisplayOrder,\n            manifestExclude: this.config.options.manifestExclude,\n            range: this._getCurrentRange(),\n            rtlLanguageCodes: this.config.options.rtlLanguageCodes,\n            sanitizer: function (html) {\n                return sanitize(html);\n            },\n            showAllLanguages: this.config.options.showAllLanguages\n        };\n    };\n    MoreInfoRightPanel.prototype.resize = function () {\n        _super.prototype.resize.call(this);\n        this.$main.height(this.$element.height() - this.$top.height() - this.$main.verticalMargins());\n    };\n    return MoreInfoRightPanel;\n}(RightPanel));\nexport { MoreInfoRightPanel };\n","import { BaseEvents } from \"./BaseEvents\";\nimport { InformationArgs } from \"./InformationArgs\";\nimport { InformationType } from \"./InformationType\";\nimport { LoginWarningMessages } from \"./LoginWarningMessages\";\nimport { StatusCode, Utils } from \"manifesto.js\";\nimport { Storage, Urls } from \"@edsilv/utils\";\nimport * as HTTPStatusCode from \"@edsilv/http-status-codes\";\nvar Auth09 = /** @class */ (function () {\n    function Auth09() {\n    }\n    Auth09.loadExternalResources = function (resourcesToLoad, storageStrategy) {\n        return new Promise(function (resolve) {\n            Utils.loadExternalResourcesAuth09(resourcesToLoad, storageStrategy, Auth09.clickThrough, Auth09.restricted, Auth09.login, Auth09.getAccessToken, Auth09.storeAccessToken, Auth09.getStoredAccessToken, Auth09.handleExternalResourceResponse)\n                .then(function (r) {\n                resolve(r);\n            })[\"catch\"](function (error) {\n                switch (error.name) {\n                    case StatusCode.AUTHORIZATION_FAILED.toString():\n                        Auth09.publish(BaseEvents.LOGIN_FAILED);\n                        break;\n                    case StatusCode.FORBIDDEN.toString():\n                        Auth09.publish(BaseEvents.FORBIDDEN);\n                        break;\n                    case StatusCode.RESTRICTED.toString():\n                        // do nothing\n                        break;\n                    default:\n                        Auth09.publish(BaseEvents.SHOW_MESSAGE, [error.message || error]);\n                }\n            });\n        });\n    };\n    Auth09.clickThrough = function (resource) {\n        return new Promise(function (resolve) {\n            Auth09.publish(BaseEvents.SHOW_CLICKTHROUGH_DIALOGUE, [\n                {\n                    resource: resource,\n                    acceptCallback: function () {\n                        if (resource.clickThroughService) {\n                            var win_1 = window.open(resource.clickThroughService.id);\n                            var pollTimer_1 = window.setInterval(function () {\n                                if (win_1 && win_1.closed) {\n                                    window.clearInterval(pollTimer_1);\n                                    Auth09.publish(BaseEvents.CLICKTHROUGH);\n                                    resolve();\n                                }\n                            }, 500);\n                        }\n                    }\n                }\n            ]);\n        });\n    };\n    Auth09.restricted = function (resource) {\n        return new Promise(function (resolve, reject) {\n            Auth09.publish(BaseEvents.SHOW_RESTRICTED_DIALOGUE, [\n                {\n                    resource: resource,\n                    acceptCallback: function () {\n                        Auth09.publish(BaseEvents.LOAD_FAILED);\n                        reject(resource);\n                    }\n                }\n            ]);\n        });\n    };\n    Auth09.login = function (resource) {\n        return new Promise(function (resolve) {\n            var options = {};\n            if (resource.status === HTTPStatusCode.FORBIDDEN) {\n                options.warningMessage = LoginWarningMessages.FORBIDDEN;\n                options.showCancelButton = true;\n            }\n            Auth09.publish(BaseEvents.SHOW_LOGIN_DIALOGUE, [\n                {\n                    resource: resource,\n                    loginCallback: function () {\n                        if (resource.loginService) {\n                            var win_2 = window.open(resource.loginService.id + \"?t=\" + new Date().getTime());\n                            var pollTimer_2 = window.setInterval(function () {\n                                if (win_2 && win_2.closed) {\n                                    window.clearInterval(pollTimer_2);\n                                    Auth09.publish(BaseEvents.LOGIN);\n                                    resolve();\n                                }\n                            }, 500);\n                        }\n                    },\n                    logoutCallback: function () {\n                        if (resource.logoutService) {\n                            var win_3 = window.open(resource.logoutService.id + \"?t=\" + new Date().getTime());\n                            var pollTimer_3 = window.setInterval(function () {\n                                if (win_3 && win_3.closed) {\n                                    window.clearInterval(pollTimer_3);\n                                    Auth09.publish(BaseEvents.LOGOUT);\n                                    resolve();\n                                }\n                            }, 500);\n                        }\n                    },\n                    options: options\n                }\n            ]);\n        });\n    };\n    Auth09.getAccessToken = function (resource, rejectOnError) {\n        return new Promise(function (resolve, reject) {\n            if (resource.tokenService) {\n                var serviceUri = resource.tokenService.id;\n                // pick an identifier for this message. We might want to keep track of sent messages\n                var msgId = serviceUri + \"|\" + new Date().getTime();\n                var receiveAccessToken_1 = function (e) {\n                    window.removeEventListener(\"message\", receiveAccessToken_1);\n                    var token = e.data;\n                    if (token.error) {\n                        if (rejectOnError) {\n                            reject(token.errorDescription);\n                        }\n                        else {\n                            resolve(undefined);\n                        }\n                    }\n                    else {\n                        resolve(token);\n                    }\n                };\n                window.addEventListener(\"message\", receiveAccessToken_1, false);\n                var tokenUri = serviceUri + \"?messageId=\" + msgId;\n                $(\"#commsFrame\").prop(\"src\", tokenUri);\n            }\n            else {\n                reject(\"Token service not found\");\n            }\n        });\n    };\n    Auth09.storeAccessToken = function (resource, token, storageStrategy) {\n        return new Promise(function (resolve, reject) {\n            if (resource.tokenService) {\n                Storage.set(resource.tokenService.id, token, token.expiresIn, storageStrategy);\n                resolve();\n            }\n            else {\n                reject(\"Token service not found\");\n            }\n        });\n    };\n    Auth09.getStoredAccessToken = function (resource, storageStrategy) {\n        return new Promise(function (resolve, reject) {\n            var foundItems = [];\n            var item = null;\n            // try to match on the tokenService, if the resource has one:\n            if (resource.tokenService) {\n                item = Storage.get(resource.tokenService.id, storageStrategy);\n            }\n            if (item) {\n                foundItems.push(item);\n            }\n            else {\n                // find an access token for the domain\n                var domain = Urls.getUrlParts(resource.dataUri)\n                    .hostname;\n                var items = Storage.getItems(storageStrategy);\n                for (var i = 0; i < items.length; i++) {\n                    item = items[i];\n                    if (item.key.includes(domain)) {\n                        foundItems.push(item);\n                    }\n                }\n            }\n            // sort by expiresAt, earliest to most recent.\n            foundItems = foundItems.sort(function (a, b) {\n                return a.expiresAt - b.expiresAt;\n            });\n            var foundToken;\n            if (foundItems.length) {\n                foundToken = foundItems[foundItems.length - 1].value;\n            }\n            resolve(foundToken);\n        });\n    };\n    Auth09.handleExternalResourceResponse = function (resource) {\n        return new Promise(function (resolve, reject) {\n            resource.isResponseHandled = true;\n            if (resource.status === HTTPStatusCode.OK) {\n                resolve(resource);\n            }\n            else if (resource.status === HTTPStatusCode.MOVED_TEMPORARILY) {\n                resolve(resource);\n                Auth09.publish(BaseEvents.RESOURCE_DEGRADED, [resource]);\n            }\n            else {\n                if (resource.error.status === HTTPStatusCode.UNAUTHORIZED ||\n                    resource.error.status === HTTPStatusCode.INTERNAL_SERVER_ERROR) {\n                    // if the browser doesn't support CORS\n                    // if (!Modernizr.cors) {\n                    //     const informationArgs: InformationArgs = new InformationArgs(InformationType.AUTH_CORS_ERROR, null);\n                    //     Auth09.publish(BaseEvents.SHOW_INFORMATION, [informationArgs]);\n                    //     resolve(resource);\n                    // } else {\n                    // commented above because only supporting IE11 upwards which has CORS\n                    reject(resource.error.statusText);\n                    //}\n                }\n                else if (resource.error.status === HTTPStatusCode.FORBIDDEN) {\n                    var error = new Error();\n                    error.message = \"Forbidden\";\n                    error.name = StatusCode.FORBIDDEN.toString();\n                    reject(error);\n                }\n                else {\n                    reject(resource.error.statusText);\n                }\n            }\n        });\n    };\n    Auth09.handleDegraded = function (resource) {\n        var informationArgs = new InformationArgs(InformationType.DEGRADED_RESOURCE, resource);\n        Auth09.publish(BaseEvents.SHOW_INFORMATION, [informationArgs]);\n    };\n    return Auth09;\n}());\nexport { Auth09 };\n","import { BaseEvents } from \"./BaseEvents\";\nimport { sanitize } from \"../../Utils\";\nimport { InformationArgs } from \"./InformationArgs\";\nimport { InformationType } from \"./InformationType\";\nimport { StatusCode, Utils } from \"manifesto.js\";\nimport { Storage, Urls } from \"@edsilv/utils\";\nimport * as HTTPStatusCode from \"@edsilv/http-status-codes\";\nvar Auth1 = /** @class */ (function () {\n    function Auth1() {\n    }\n    Auth1.loadExternalResources = function (resourcesToLoad, storageStrategy, options) {\n        return new Promise(function (resolve) {\n            Auth1.storageStrategy = storageStrategy;\n            // set all resources to Auth API V1\n            resourcesToLoad = resourcesToLoad.map(function (resource) {\n                resource.authAPIVersion = 1;\n                resource.options = options;\n                return resource;\n            });\n            Utils.loadExternalResourcesAuth1(resourcesToLoad, Auth1.openContentProviderInteraction, Auth1.openTokenService, Auth1.getStoredAccessToken, Auth1.userInteractedWithContentProvider, Auth1.getContentProviderInteraction, Auth1.handleMovedTemporarily, Auth1.showOutOfOptionsMessages)\n                .then(function (r) {\n                resolve(r);\n            })[\"catch\"](function (error) {\n                switch (error.name) {\n                    case StatusCode.AUTHORIZATION_FAILED.toString():\n                        Auth1.publish(BaseEvents.LOGIN_FAILED);\n                        break;\n                    case StatusCode.FORBIDDEN.toString():\n                        Auth1.publish(BaseEvents.FORBIDDEN);\n                        break;\n                    case StatusCode.RESTRICTED.toString():\n                        // do nothing\n                        break;\n                    default:\n                        Auth1.publish(BaseEvents.SHOW_MESSAGE, [error.message || error]);\n                }\n            });\n        });\n    };\n    Auth1.getCookieServiceUrl = function (service) {\n        var cookieServiceUrl = service.id + \"?origin=\" + Auth1.getOrigin();\n        return cookieServiceUrl;\n    };\n    Auth1.openContentProviderInteraction = function (service) {\n        var cookieServiceUrl = Auth1.getCookieServiceUrl(service);\n        return window.open(cookieServiceUrl);\n    };\n    // determine the postMessage-style origin for a URL\n    Auth1.getOrigin = function (url) {\n        var urlHolder = window.location;\n        if (url) {\n            urlHolder = document.createElement(\"a\");\n            urlHolder.href = url;\n        }\n        return (urlHolder.protocol +\n            \"//\" +\n            urlHolder.hostname +\n            (urlHolder.port ? \":\" + urlHolder.port : \"\"));\n    };\n    Auth1.userInteractedWithContentProvider = function (contentProviderWindow) {\n        return new Promise(function (resolve) {\n            // What happens here is forever a mystery to a client application.\n            // It can but wait.\n            var poll = window.setInterval(function () {\n                if (contentProviderWindow.closed) {\n                    window.clearInterval(poll);\n                    resolve(true);\n                }\n            }, 500);\n        });\n    };\n    Auth1.handleMovedTemporarily = function (resource) {\n        return new Promise(function (resolve) {\n            Auth1.showDegradedMessage(resource);\n            resource.isResponseHandled = true;\n            resolve();\n        });\n    };\n    Auth1.showDegradedMessage = function (resource) {\n        var informationArgs = new InformationArgs(InformationType.DEGRADED_RESOURCE, resource);\n        Auth1.publish(BaseEvents.SHOW_INFORMATION, [informationArgs]);\n    };\n    Auth1.storeAccessToken = function (resource, token) {\n        return new Promise(function (resolve, reject) {\n            if (resource.tokenService) {\n                Storage.set(resource.tokenService.id, token, token.expiresIn, Auth1.storageStrategy);\n                resolve();\n            }\n            else {\n                reject(\"Token service not found\");\n            }\n        });\n    };\n    Auth1.getStoredAccessToken = function (resource) {\n        return new Promise(function (resolve, reject) {\n            var foundItems = [];\n            var item = null;\n            // try to match on the tokenService, if the resource has one:\n            if (resource.tokenService) {\n                item = Storage.get(resource.tokenService.id, Auth1.storageStrategy);\n            }\n            if (item) {\n                foundItems.push(item);\n            }\n            else {\n                // find an access token for the domain\n                var domain = Urls.getUrlParts(resource.dataUri)\n                    .hostname;\n                var items = Storage.getItems(Auth1.storageStrategy);\n                for (var i = 0; i < items.length; i++) {\n                    item = items[i];\n                    if (item.key.includes(domain)) {\n                        foundItems.push(item);\n                    }\n                }\n            }\n            // sort by expiresAt, earliest to most recent.\n            foundItems = foundItems.sort(function (a, b) {\n                return a.expiresAt - b.expiresAt;\n            });\n            var foundToken = null;\n            if (foundItems.length) {\n                foundToken = foundItems[foundItems.length - 1].value;\n            }\n            resolve(foundToken);\n        });\n    };\n    Auth1.getContentProviderInteraction = function (resource, service) {\n        return new Promise(function (resolve) {\n            // if the info bar has already been shown for degraded logins\n            if (resource.isResponseHandled && !resource.authHoldingPage) {\n                Auth1.showDegradedMessage(resource);\n                resolve(null);\n            }\n            else if (resource.authHoldingPage) {\n                // redirect holding page\n                resource.authHoldingPage.location.href = Auth1.getCookieServiceUrl(service);\n                resolve(resource.authHoldingPage);\n            }\n            else {\n                Auth1.publish(BaseEvents.SHOW_AUTH_DIALOGUE, [\n                    {\n                        service: service,\n                        closeCallback: function () {\n                            resolve(null);\n                        },\n                        confirmCallback: function () {\n                            var win = Auth1.openContentProviderInteraction(service);\n                            resolve(win);\n                        },\n                        cancelCallback: function () {\n                            resolve(null);\n                        }\n                    }\n                ]);\n            }\n        });\n    };\n    Auth1.openTokenService = function (resource, tokenService) {\n        // use a Promise across a postMessage call. Discuss...\n        return new Promise(function (resolve, reject) {\n            // if necessary, the client can decide not to trust this origin\n            var serviceOrigin = Auth1.getOrigin(tokenService.id);\n            var messageId = new Date().getTime();\n            Auth1.messages[messageId] = {\n                resolve: resolve,\n                reject: reject,\n                serviceOrigin: serviceOrigin,\n                resource: resource\n            };\n            window.addEventListener(\"message\", Auth1.receiveToken, false);\n            var tokenUrl = tokenService.id +\n                \"?messageId=\" +\n                messageId +\n                \"&origin=\" +\n                Auth1.getOrigin();\n            // load the access token service url in the #commsFrame iframe.\n            // when the message event listener (Auth1.receiveToken) receives a message from the iframe\n            // it looks in Auth1.messages to find a corresponding message id with the same origin.\n            // if found, it stores the returned access token, resolves and deletes the message.\n            // resolving the message resolves the openTokenService promise.\n            $(\"#commsFrame\").prop(\"src\", tokenUrl);\n            // reject any unhandled messages after a configurable timeout\n            var postMessageTimeout = 5000;\n            setTimeout(function () {\n                if (Auth1.messages[messageId]) {\n                    Auth1.messages[messageId].reject(\"Message unhandled after \" + postMessageTimeout + \"ms, rejecting\");\n                    delete Auth1.messages[messageId];\n                }\n            }, postMessageTimeout);\n        });\n    };\n    Auth1.receiveToken = function (event) {\n        if (event.data.hasOwnProperty(\"messageId\")) {\n            var message_1 = Auth1.messages[event.data.messageId];\n            if (message_1 && event.origin == message_1.serviceOrigin) {\n                // Any message with a messageId is a success\n                Auth1.storeAccessToken(message_1.resource, event.data).then(function () {\n                    message_1.resolve(event.data); // resolves openTokenService with the token\n                    delete Auth1.messages[event.data.messageId];\n                    return;\n                });\n            }\n        }\n    };\n    Auth1.showOutOfOptionsMessages = function (resource, service) {\n        // if the UV is already showing the info bar, no need to show an error message.\n        if (resource.status == HTTPStatusCode.MOVED_TEMPORARILY) {\n            return;\n        }\n        var errorMessage = \"\";\n        if (service.getFailureHeader()) {\n            errorMessage += \"<p>\" + service.getFailureHeader() + \"</p>\";\n        }\n        if (service.getFailureDescription()) {\n            errorMessage += service.getFailureDescription();\n        }\n        Auth1.publish(BaseEvents.SHOW_MESSAGE, [sanitize(errorMessage)]);\n    };\n    Auth1.messages = {};\n    return Auth1;\n}());\nexport { Auth1 };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { BaseView } from \"./BaseView\";\nimport { Bools } from \"@edsilv/utils\";\nvar BaseExpandPanel = /** @class */ (function (_super) {\n    __extends(BaseExpandPanel, _super);\n    function BaseExpandPanel($element) {\n        var _this = _super.call(this, $element, false, true) || this;\n        _this.isExpanded = false;\n        _this.isFullyExpanded = false;\n        _this.isUnopened = true;\n        _this.autoToggled = false;\n        _this.expandFullEnabled = true;\n        return _this;\n    }\n    BaseExpandPanel.prototype.create = function () {\n        var _this = this;\n        _super.prototype.create.call(this);\n        this.$top = $('<div class=\"top\"></div>');\n        this.$element.append(this.$top);\n        this.$title = $('<div class=\"title\"></div>');\n        this.$title.prop(\"title\", this.content.title);\n        this.$top.append(this.$title);\n        this.$expandFullButton = $('<a class=\"expandFullButton\" tabindex=\"0\"></a>');\n        this.$expandFullButton.prop(\"title\", this.content.expandFull);\n        this.$top.append(this.$expandFullButton);\n        if (!Bools.getBool(this.config.options.expandFullEnabled, true)) {\n            this.$expandFullButton.hide();\n        }\n        this.$collapseButton = $('<div class=\"collapseButton\" tabindex=\"0\"></div>');\n        this.$collapseButton.prop(\"title\", this.content.collapse);\n        this.$top.append(this.$collapseButton);\n        this.$closed = $('<div class=\"closed\"></div>');\n        this.$element.append(this.$closed);\n        this.$expandButton = $('<a class=\"expandButton\" tabindex=\"0\"></a>');\n        this.$expandButton.prop(\"title\", this.content.expand);\n        this.$closed.append(this.$expandButton);\n        this.$closedTitle = $('<a class=\"title\"></a>');\n        this.$closedTitle.prop(\"title\", this.content.title);\n        this.$closed.append(this.$closedTitle);\n        this.$main = $('<div class=\"main\"></div>');\n        this.$element.append(this.$main);\n        this.$expandButton.onPressed(function () {\n            _this.toggle();\n        });\n        this.$expandFullButton.onPressed(function () {\n            _this.expandFull();\n        });\n        this.$closedTitle.onPressed(function () {\n            _this.toggle();\n        });\n        this.$title.onPressed(function () {\n            if (_this.isFullyExpanded) {\n                _this.collapseFull();\n            }\n            else {\n                _this.toggle();\n            }\n        });\n        this.$collapseButton.onPressed(function () {\n            if (_this.isFullyExpanded) {\n                _this.collapseFull();\n            }\n            else {\n                _this.toggle();\n            }\n        });\n        this.$top.hide();\n        this.$main.hide();\n    };\n    BaseExpandPanel.prototype.init = function () {\n        _super.prototype.init.call(this);\n    };\n    BaseExpandPanel.prototype.setTitle = function (title) {\n        this.$title.text(title);\n        this.$closedTitle.text(title);\n    };\n    BaseExpandPanel.prototype.toggle = function (autoToggled) {\n        var _this = this;\n        autoToggled ? (this.autoToggled = true) : (this.autoToggled = false);\n        // if collapsing, hide contents immediately.\n        if (this.isExpanded) {\n            this.$top.attr(\"aria-hidden\", \"true\");\n            this.$main.attr(\"aria-hidden\", \"true\");\n            this.$closed.attr(\"aria-hidden\", \"false\");\n            this.$top.hide();\n            this.$main.hide();\n            this.$closed.show();\n        }\n        this.$element.stop().animate({\n            width: this.getTargetWidth(),\n            left: this.getTargetLeft()\n        }, this.options.panelAnimationDuration, function () {\n            _this.toggled();\n        });\n    };\n    BaseExpandPanel.prototype.toggled = function () {\n        this.toggleStart();\n        this.isExpanded = !this.isExpanded;\n        // if expanded show content when animation finished.\n        if (this.isExpanded) {\n            this.$top.attr(\"aria-hidden\", \"false\");\n            this.$main.attr(\"aria-hidden\", \"false\");\n            this.$closed.attr(\"aria-hidden\", \"true\");\n            this.$closed.hide();\n            this.$top.show();\n            this.$main.show();\n        }\n        this.toggleFinish();\n        this.isUnopened = false;\n    };\n    BaseExpandPanel.prototype.expandFull = function () {\n        var _this = this;\n        if (!this.isExpanded) {\n            this.toggled();\n        }\n        var targetWidth = this.getFullTargetWidth();\n        var targetLeft = this.getFullTargetLeft();\n        this.expandFullStart();\n        this.$element.stop().animate({\n            width: targetWidth,\n            left: targetLeft\n        }, this.options.panelAnimationDuration, function () {\n            _this.expandFullFinish();\n        });\n    };\n    BaseExpandPanel.prototype.collapseFull = function () {\n        var _this = this;\n        var targetWidth = this.getTargetWidth();\n        var targetLeft = this.getTargetLeft();\n        this.collapseFullStart();\n        this.$element.stop().animate({\n            width: targetWidth,\n            left: targetLeft\n        }, this.options.panelAnimationDuration, function () {\n            _this.collapseFullFinish();\n        });\n    };\n    BaseExpandPanel.prototype.getTargetWidth = function () {\n        return 0;\n    };\n    BaseExpandPanel.prototype.getTargetLeft = function () {\n        return 0;\n    };\n    BaseExpandPanel.prototype.getFullTargetWidth = function () {\n        return 0;\n    };\n    BaseExpandPanel.prototype.getFullTargetLeft = function () {\n        return 0;\n    };\n    BaseExpandPanel.prototype.toggleStart = function () { };\n    BaseExpandPanel.prototype.toggleFinish = function () {\n        if (this.isExpanded && !this.autoToggled) {\n            this.focusCollapseButton();\n        }\n        else {\n            this.focusExpandButton();\n        }\n    };\n    BaseExpandPanel.prototype.expandFullStart = function () { };\n    BaseExpandPanel.prototype.expandFullFinish = function () {\n        this.isFullyExpanded = true;\n        this.$expandFullButton.hide();\n        this.focusCollapseButton();\n    };\n    BaseExpandPanel.prototype.collapseFullStart = function () { };\n    BaseExpandPanel.prototype.collapseFullFinish = function () {\n        this.isFullyExpanded = false;\n        if (this.expandFullEnabled) {\n            this.$expandFullButton.show();\n        }\n        this.focusExpandFullButton();\n    };\n    BaseExpandPanel.prototype.focusExpandButton = function () {\n        var _this = this;\n        setTimeout(function () {\n            _this.$expandButton.focus();\n        }, 1);\n    };\n    BaseExpandPanel.prototype.focusExpandFullButton = function () {\n        var _this = this;\n        setTimeout(function () {\n            _this.$expandFullButton.focus();\n        }, 1);\n    };\n    BaseExpandPanel.prototype.focusCollapseButton = function () {\n        var _this = this;\n        setTimeout(function () {\n            _this.$collapseButton.focus();\n        }, 1);\n    };\n    BaseExpandPanel.prototype.resize = function () {\n        _super.prototype.resize.call(this);\n        this.$main.height(this.$element.parent().height() - this.$top.outerHeight(true));\n    };\n    return BaseExpandPanel;\n}(BaseView));\nexport { BaseExpandPanel };\n","//import { isValidUrl } from \"../../Utils\";\nimport { Auth09 } from \"./Auth09\";\nimport { Auth1 } from \"./Auth1\";\nimport { AuthDialogue } from \"../../modules/uv-dialogues-module/AuthDialogue\";\nimport { BaseEvents } from \"./BaseEvents\";\nimport { ClickThroughDialogue } from \"../../modules/uv-dialogues-module/ClickThroughDialogue\";\nimport { LoginDialogue } from \"../../modules/uv-dialogues-module/LoginDialogue\";\nimport { MetricType } from \"../../modules/uv-shared-module/MetricType\";\nimport { RestrictedDialogue } from \"../../modules/uv-dialogues-module/RestrictedDialogue\";\nimport { Shell } from \"./Shell\";\nimport { ExternalResource } from \"@iiif/manifold\";\nimport { ViewingHint } from \"@iiif/vocabulary\";\nimport * as KeyCodes from \"@edsilv/key-codes\";\nimport { Bools, Dates, Documents, Objects, Storage, StorageType, Urls, Strings } from \"@edsilv/utils\";\nvar BaseExtension = /** @class */ (function () {\n    function BaseExtension() {\n        this.isCreated = false;\n        this.isLoggedIn = false;\n        this.metric = MetricType.NONE;\n        this.metrics = [];\n        this.shifted = false;\n        this.tabbing = false;\n    }\n    BaseExtension.prototype.create = function () {\n        var _this = this;\n        var that = this;\n        Auth09.publish = this.component.publish.bind(this.component);\n        Auth1.publish = this.component.publish.bind(this.component);\n        this.$element = $(this.component.options.target);\n        this.$element.data(\"component\", this.component);\n        this.fire(BaseEvents.CREATE, {\n            data: this.data,\n            settings: this.getSettings(),\n            preview: this.getSharePreview()\n        });\n        this._parseMetrics();\n        this._initLocales();\n        // add/remove classes.\n        this.$element.empty();\n        this.$element.removeClass();\n        this.$element.addClass(\"uv\");\n        this.$element.addClass(\"loading\");\n        if (this.data.locales) {\n            this.$element.addClass(this.data.locales[0].name.toLowerCase());\n        }\n        this.$element.addClass(this.name);\n        this.$element.addClass(\"browser-\" + window.browserDetect.browser);\n        this.$element.addClass(\"browser-version-\" + window.browserDetect.version);\n        this.$element.prop(\"tabindex\", 0);\n        if (this.data.embedded) {\n            this.$element.addClass(\"embedded\");\n        }\n        if (this.isMobile()) {\n            this.$element.addClass(\"mobile\");\n        }\n        // todo: deprecate?\n        if (this.data.isLightbox) {\n            this.$element.addClass(\"lightbox\");\n        }\n        if (Documents.supportsFullscreen()) {\n            this.$element.addClass(\"fullscreen-supported\");\n        }\n        if (this.isFullScreen()) {\n            this.$element.addClass(\"fullscreen\");\n        }\n        this.$element.on(\"mousemove\", function (e) {\n            _this.mouseX = e.pageX;\n            _this.mouseY = e.pageY;\n        });\n        // if this is the first load\n        if (!this.data.isReload) {\n            var visibilityProp = Documents.getHiddenProp();\n            if (visibilityProp) {\n                var event_1 = visibilityProp.replace(/[H|h]idden/, \"\") + \"visibilitychange\";\n                document.addEventListener(event_1, function () {\n                    // resize after a tab has been shown (fixes safari layout issue)\n                    if (!Documents.isHidden()) {\n                        _this.resize();\n                    }\n                });\n            }\n            if (Bools.getBool(this.data.config.options.dropEnabled, true)) {\n                this.$element.on(\"drop\", function (e) {\n                    e.preventDefault();\n                    var dropUrl = e.originalEvent.dataTransfer.getData(\"URL\");\n                    var a = Urls.getUrlParts(dropUrl);\n                    var manifestUri = Urls.getQuerystringParameterFromString(\"manifest\", a.search);\n                    if (!manifestUri) {\n                        // look for collection param\n                        manifestUri = Urls.getQuerystringParameterFromString(\"collection\", a.search);\n                    }\n                    //var canvasUri = Urls.getQuerystringParameterFromString('canvas', url.search);\n                    if (manifestUri) {\n                        _this.fire(BaseEvents.DROP, manifestUri);\n                        var data = {};\n                        data.manifestUri = manifestUri;\n                        _this.reload(data);\n                    }\n                });\n            }\n            this.$element.on(\"dragover\", function (e) {\n                // allow drop\n                e.preventDefault();\n            });\n            // keyboard events.\n            this.$element.on(\"keyup keydown\", function (e) {\n                _this.shifted = e.shiftKey;\n                _this.tabbing = e.keyCode === KeyCodes.KeyDown.Tab;\n            });\n            this.$element.on(\"keydown\", function (e) {\n                var event = null;\n                var preventDefault = true;\n                if (!e.ctrlKey && !e.altKey && !e.shiftKey) {\n                    if (e.keyCode === KeyCodes.KeyDown.Enter) {\n                        event = BaseEvents.RETURN;\n                        preventDefault = false;\n                    }\n                    if (e.keyCode === KeyCodes.KeyDown.Escape)\n                        event = BaseEvents.ESCAPE;\n                    if (e.keyCode === KeyCodes.KeyDown.PageUp)\n                        event = BaseEvents.PAGE_UP;\n                    if (e.keyCode === KeyCodes.KeyDown.PageDown)\n                        event = BaseEvents.PAGE_DOWN;\n                    if (e.keyCode === KeyCodes.KeyDown.End)\n                        event = BaseEvents.END;\n                    if (e.keyCode === KeyCodes.KeyDown.Home)\n                        event = BaseEvents.HOME;\n                    if (e.keyCode === KeyCodes.KeyDown.NumpadPlus ||\n                        e.keyCode === 171 ||\n                        e.keyCode === KeyCodes.KeyDown.Equals) {\n                        event = BaseEvents.PLUS;\n                        preventDefault = false;\n                    }\n                    if (e.keyCode === KeyCodes.KeyDown.NumpadMinus ||\n                        e.keyCode === 173 ||\n                        e.keyCode === KeyCodes.KeyDown.Dash) {\n                        event = BaseEvents.MINUS;\n                        preventDefault = false;\n                    }\n                    if (that.useArrowKeysToNavigate()) {\n                        if (e.keyCode === KeyCodes.KeyDown.LeftArrow)\n                            event = BaseEvents.LEFT_ARROW;\n                        if (e.keyCode === KeyCodes.KeyDown.UpArrow)\n                            event = BaseEvents.UP_ARROW;\n                        if (e.keyCode === KeyCodes.KeyDown.RightArrow)\n                            event = BaseEvents.RIGHT_ARROW;\n                        if (e.keyCode === KeyCodes.KeyDown.DownArrow)\n                            event = BaseEvents.DOWN_ARROW;\n                    }\n                }\n                if (event) {\n                    if (preventDefault) {\n                        e.preventDefault();\n                    }\n                    _this.component.publish(event);\n                }\n            });\n        }\n        this.component.subscribe(BaseEvents.EXIT_FULLSCREEN, function () {\n            if (_this.isOverlayActive()) {\n                _this.component.publish(BaseEvents.ESCAPE);\n            }\n            _this.component.publish(BaseEvents.ESCAPE);\n            _this.component.publish(BaseEvents.RESIZE);\n        });\n        this.$element.append('<a href=\"/\" id=\"top\"></a>');\n        this.$element.append('<iframe id=\"commsFrame\" style=\"display:none\"></iframe>');\n        //this.$element.append('<div id=\"debug\"><span id=\"watch\">Watch</span><span id=\"mobile-portrait\">Mobile Portrait</span><span id=\"mobile-landscape\">Mobile Landscape</span><span id=\"desktop\">Desktop</span></div>');\n        this.component.subscribe(BaseEvents.ACCEPT_TERMS, function () {\n            _this.fire(BaseEvents.ACCEPT_TERMS);\n        });\n        this.component.subscribe(BaseEvents.LOGIN_FAILED, function () {\n            _this.fire(BaseEvents.LOGIN_FAILED);\n            _this.showMessage(_this.data.config.content.authorisationFailedMessage);\n        });\n        this.component.subscribe(BaseEvents.LOGIN, function () {\n            _this.isLoggedIn = true;\n            _this.fire(BaseEvents.LOGIN);\n        });\n        this.component.subscribe(BaseEvents.LOGOUT, function () {\n            _this.isLoggedIn = false;\n            _this.fire(BaseEvents.LOGOUT);\n        });\n        this.component.subscribe(BaseEvents.BOOKMARK, function () {\n            _this.bookmark();\n            _this.fire(BaseEvents.BOOKMARK);\n        });\n        this.component.subscribe(BaseEvents.CANVAS_INDEX_CHANGE_FAILED, function () {\n            _this.fire(BaseEvents.CANVAS_INDEX_CHANGE_FAILED);\n        });\n        this.component.subscribe(BaseEvents.CANVAS_INDEX_CHANGED, function (canvasIndex) {\n            _this.data.canvasIndex = canvasIndex;\n            _this.lastCanvasIndex = _this.helper.canvasIndex;\n            _this.helper.canvasIndex = canvasIndex;\n            _this.fire(BaseEvents.CANVAS_INDEX_CHANGED, _this.data.canvasIndex);\n        });\n        this.component.subscribe(BaseEvents.CLICKTHROUGH, function () {\n            _this.fire(BaseEvents.CLICKTHROUGH);\n        });\n        this.component.subscribe(BaseEvents.CLOSE_ACTIVE_DIALOGUE, function () {\n            _this.fire(BaseEvents.CLOSE_ACTIVE_DIALOGUE);\n        });\n        this.component.subscribe(BaseEvents.CLOSE_LEFT_PANEL, function () {\n            _this.fire(BaseEvents.CLOSE_LEFT_PANEL);\n            _this.resize();\n        });\n        this.component.subscribe(BaseEvents.CLOSE_RIGHT_PANEL, function () {\n            _this.fire(BaseEvents.CLOSE_RIGHT_PANEL);\n            _this.resize();\n        });\n        this.component.subscribe(BaseEvents.COLLECTION_INDEX_CHANGED, function (collectionIndex) {\n            _this.data.collectionIndex = collectionIndex;\n            _this.fire(BaseEvents.COLLECTION_INDEX_CHANGED, _this.data.collectionIndex);\n        });\n        this.component.subscribe(BaseEvents.CREATED, function () {\n            _this.isCreated = true;\n            _this.fire(BaseEvents.CREATED);\n        });\n        this.component.subscribe(BaseEvents.DOWN_ARROW, function () {\n            _this.fire(BaseEvents.DOWN_ARROW);\n        });\n        this.component.subscribe(BaseEvents.DOWNLOAD, function (obj) {\n            _this.fire(BaseEvents.DOWNLOAD, obj);\n        });\n        this.component.subscribe(BaseEvents.END, function () {\n            _this.fire(BaseEvents.END);\n        });\n        this.component.subscribe(BaseEvents.ESCAPE, function () {\n            _this.fire(BaseEvents.ESCAPE);\n            if (_this.isFullScreen() && !_this.isOverlayActive()) {\n                _this.component.publish(BaseEvents.TOGGLE_FULLSCREEN);\n            }\n        });\n        this.component.subscribe(BaseEvents.EXTERNAL_LINK_CLICKED, function (url) {\n            _this.fire(BaseEvents.EXTERNAL_LINK_CLICKED, url);\n        });\n        this.component.subscribe(BaseEvents.OPENED_MEDIA, function () {\n            setTimeout(function () {\n                _this.component.publish(BaseEvents.RESIZE);\n                _this.fire(BaseEvents.OPENED_MEDIA);\n                _this.$element.removeClass(\"loading\");\n            }, 100); // firefox needs this :-(\n        });\n        this.component.subscribe(BaseEvents.FEEDBACK, function () {\n            _this.feedback();\n        });\n        this.component.subscribe(BaseEvents.FORBIDDEN, function () {\n            _this.fire(BaseEvents.FORBIDDEN);\n            _this.component.publish(BaseEvents.OPEN_EXTERNAL_RESOURCE);\n        });\n        this.component.subscribe(BaseEvents.HIDE_DOWNLOAD_DIALOGUE, function () {\n            _this.fire(BaseEvents.HIDE_DOWNLOAD_DIALOGUE);\n        });\n        this.component.subscribe(BaseEvents.HIDE_EMBED_DIALOGUE, function () {\n            _this.fire(BaseEvents.HIDE_EMBED_DIALOGUE);\n        });\n        this.component.subscribe(BaseEvents.HIDE_EXTERNALCONTENT_DIALOGUE, function () {\n            _this.fire(BaseEvents.HIDE_EXTERNALCONTENT_DIALOGUE);\n        });\n        this.component.subscribe(BaseEvents.HIDE_GENERIC_DIALOGUE, function () {\n            _this.fire(BaseEvents.HIDE_GENERIC_DIALOGUE);\n        });\n        this.component.subscribe(BaseEvents.HIDE_HELP_DIALOGUE, function () {\n            _this.fire(BaseEvents.HIDE_HELP_DIALOGUE);\n        });\n        this.component.subscribe(BaseEvents.HIDE_INFORMATION, function () {\n            _this.fire(BaseEvents.HIDE_INFORMATION);\n        });\n        this.component.subscribe(BaseEvents.HIDE_LOGIN_DIALOGUE, function () {\n            _this.fire(BaseEvents.HIDE_LOGIN_DIALOGUE);\n        });\n        this.component.subscribe(BaseEvents.HIDE_OVERLAY, function () {\n            _this.fire(BaseEvents.HIDE_OVERLAY);\n        });\n        this.component.subscribe(BaseEvents.HIDE_RESTRICTED_DIALOGUE, function () {\n            _this.fire(BaseEvents.HIDE_RESTRICTED_DIALOGUE);\n        });\n        this.component.subscribe(BaseEvents.HIDE_SETTINGS_DIALOGUE, function () {\n            _this.fire(BaseEvents.HIDE_SETTINGS_DIALOGUE);\n        });\n        this.component.subscribe(BaseEvents.HOME, function () {\n            _this.fire(BaseEvents.HOME);\n        });\n        this.component.subscribe(BaseEvents.LEFT_ARROW, function () {\n            _this.fire(BaseEvents.LEFT_ARROW);\n        });\n        this.component.subscribe(BaseEvents.LEFTPANEL_COLLAPSE_FULL_FINISH, function () {\n            _this.fire(BaseEvents.LEFTPANEL_COLLAPSE_FULL_FINISH);\n        });\n        this.component.subscribe(BaseEvents.LEFTPANEL_COLLAPSE_FULL_START, function () {\n            _this.fire(BaseEvents.LEFTPANEL_COLLAPSE_FULL_START);\n        });\n        this.component.subscribe(BaseEvents.LEFTPANEL_EXPAND_FULL_FINISH, function () {\n            _this.fire(BaseEvents.LEFTPANEL_EXPAND_FULL_FINISH);\n        });\n        this.component.subscribe(BaseEvents.LEFTPANEL_EXPAND_FULL_START, function () {\n            _this.fire(BaseEvents.LEFTPANEL_EXPAND_FULL_START);\n        });\n        this.component.subscribe(BaseEvents.LOAD_FAILED, function () {\n            _this.fire(BaseEvents.LOAD_FAILED);\n            if (!that.lastCanvasIndex == null &&\n                that.lastCanvasIndex !== that.helper.canvasIndex) {\n                _this.component.publish(BaseEvents.CANVAS_INDEX_CHANGED, that.lastCanvasIndex);\n            }\n        });\n        this.component.subscribe(BaseEvents.MANIFEST_INDEX_CHANGED, function (manifestIndex) {\n            _this.data.manifestIndex = manifestIndex;\n            _this.fire(BaseEvents.MANIFEST_INDEX_CHANGED, _this.data.manifestIndex);\n        });\n        this.component.subscribe(BaseEvents.NOT_FOUND, function () {\n            _this.fire(BaseEvents.NOT_FOUND);\n        });\n        this.component.subscribe(BaseEvents.OPEN, function () {\n            _this.fire(BaseEvents.OPEN);\n            var openUri = Strings.format(_this.data.config.options.openTemplate, _this.helper.manifestUri);\n            window.open(openUri);\n        });\n        this.component.subscribe(BaseEvents.OPEN_LEFT_PANEL, function () {\n            _this.fire(BaseEvents.OPEN_LEFT_PANEL);\n            // todo: use global state\n            if (!_this.$element.hasClass(\"loading\")) {\n                _this.resize();\n            }\n        });\n        this.component.subscribe(BaseEvents.OPEN_EXTERNAL_RESOURCE, function () {\n            _this.fire(BaseEvents.OPEN_EXTERNAL_RESOURCE);\n        });\n        this.component.subscribe(BaseEvents.OPEN_RIGHT_PANEL, function () {\n            _this.fire(BaseEvents.OPEN_RIGHT_PANEL);\n            // todo: use global state\n            if (!_this.$element.hasClass(\"loading\")) {\n                _this.resize();\n            }\n        });\n        this.component.subscribe(BaseEvents.PAGE_DOWN, function () {\n            _this.fire(BaseEvents.PAGE_DOWN);\n        });\n        this.component.subscribe(BaseEvents.PAGE_UP, function () {\n            _this.fire(BaseEvents.PAGE_UP);\n        });\n        this.component.subscribe(BaseEvents.RANGE_CHANGED, function (range) {\n            if (range) {\n                _this.data.rangeId = range.id;\n                _this.helper.rangeId = range.id;\n                _this.fire(BaseEvents.RANGE_CHANGED, _this.data.rangeId);\n            }\n            else {\n                _this.data.rangeId = undefined;\n                _this.helper.rangeId = undefined;\n                _this.fire(BaseEvents.RANGE_CHANGED, null);\n            }\n        });\n        this.component.subscribe(BaseEvents.RESOURCE_DEGRADED, function (resource) {\n            _this.fire(BaseEvents.RESOURCE_DEGRADED);\n            Auth09.handleDegraded(resource);\n        });\n        this.component.subscribe(BaseEvents.RETURN, function () {\n            _this.fire(BaseEvents.RETURN);\n        });\n        this.component.subscribe(BaseEvents.RIGHT_ARROW, function () {\n            _this.fire(BaseEvents.RIGHT_ARROW);\n        });\n        this.component.subscribe(BaseEvents.RIGHTPANEL_COLLAPSE_FULL_FINISH, function () {\n            _this.fire(BaseEvents.RIGHTPANEL_COLLAPSE_FULL_FINISH);\n        });\n        this.component.subscribe(BaseEvents.RIGHTPANEL_COLLAPSE_FULL_START, function () {\n            _this.fire(BaseEvents.RIGHTPANEL_COLLAPSE_FULL_START);\n        });\n        this.component.subscribe(BaseEvents.RIGHTPANEL_EXPAND_FULL_FINISH, function () {\n            _this.fire(BaseEvents.RIGHTPANEL_EXPAND_FULL_FINISH);\n        });\n        this.component.subscribe(BaseEvents.RIGHTPANEL_EXPAND_FULL_START, function () {\n            _this.fire(BaseEvents.RIGHTPANEL_EXPAND_FULL_START);\n        });\n        this.component.subscribe(BaseEvents.SEQUENCE_INDEX_CHANGED, function (sequenceIndex) {\n            _this.data.sequenceIndex = sequenceIndex;\n            _this.fire(BaseEvents.SEQUENCE_INDEX_CHANGED, _this.data.sequenceIndex);\n        });\n        this.component.subscribe(BaseEvents.SETTINGS_CHANGED, function (args) {\n            _this.fire(BaseEvents.SETTINGS_CHANGED, args);\n        });\n        this.component.subscribe(BaseEvents.SHOW_DOWNLOAD_DIALOGUE, function () {\n            _this.fire(BaseEvents.SHOW_DOWNLOAD_DIALOGUE);\n        });\n        this.component.subscribe(BaseEvents.SHOW_EMBED_DIALOGUE, function () {\n            _this.fire(BaseEvents.SHOW_EMBED_DIALOGUE);\n        });\n        this.component.subscribe(BaseEvents.SHOW_EXTERNALCONTENT_DIALOGUE, function () {\n            _this.fire(BaseEvents.SHOW_EXTERNALCONTENT_DIALOGUE);\n        });\n        this.component.subscribe(BaseEvents.SHOW_GENERIC_DIALOGUE, function () {\n            _this.fire(BaseEvents.SHOW_GENERIC_DIALOGUE);\n        });\n        this.component.subscribe(BaseEvents.SHOW_HELP_DIALOGUE, function () {\n            _this.fire(BaseEvents.SHOW_HELP_DIALOGUE);\n        });\n        this.component.subscribe(BaseEvents.SHOW_INFORMATION, function () {\n            _this.fire(BaseEvents.SHOW_INFORMATION);\n        });\n        this.component.subscribe(BaseEvents.SHOW_LOGIN_DIALOGUE, function () {\n            _this.fire(BaseEvents.SHOW_LOGIN_DIALOGUE);\n        });\n        this.component.subscribe(BaseEvents.SHOW_CLICKTHROUGH_DIALOGUE, function () {\n            _this.fire(BaseEvents.SHOW_CLICKTHROUGH_DIALOGUE);\n        });\n        this.component.subscribe(BaseEvents.SHOW_MESSAGE, function (message) {\n            _this.showMessage(message);\n        });\n        this.component.subscribe(BaseEvents.SHOW_RESTRICTED_DIALOGUE, function () {\n            _this.fire(BaseEvents.SHOW_RESTRICTED_DIALOGUE);\n        });\n        this.component.subscribe(BaseEvents.SHOW_OVERLAY, function () {\n            _this.fire(BaseEvents.SHOW_OVERLAY);\n        });\n        this.component.subscribe(BaseEvents.SHOW_SETTINGS_DIALOGUE, function () {\n            _this.fire(BaseEvents.SHOW_SETTINGS_DIALOGUE);\n        });\n        this.component.subscribe(BaseEvents.SHOW_TERMS_OF_USE, function () {\n            _this.fire(BaseEvents.SHOW_TERMS_OF_USE);\n            var terms = _this.helper.getLicense();\n            if (!terms) {\n                var requiredStatement = _this.helper.getRequiredStatement();\n                if (requiredStatement && requiredStatement.value) {\n                    terms = requiredStatement.value;\n                }\n            }\n            if (terms) {\n                _this.showMessage(terms);\n            }\n        });\n        this.component.subscribe(BaseEvents.THUMB_SELECTED, function (thumb) {\n            _this.fire(BaseEvents.THUMB_SELECTED, thumb.index);\n        });\n        this.component.subscribe(BaseEvents.TOGGLE_FULLSCREEN, function () {\n            $(\"#top\").focus();\n            _this.component.isFullScreen = !_this.component.isFullScreen;\n            if (_this.component.isFullScreen) {\n                _this.$element.addClass(\"fullscreen\");\n            }\n            else {\n                _this.$element.removeClass(\"fullscreen\");\n            }\n            _this.fire(BaseEvents.TOGGLE_FULLSCREEN, {\n                isFullScreen: _this.component.isFullScreen,\n                overrideFullScreen: _this.data.config.options.overrideFullScreen\n            });\n        });\n        this.component.subscribe(BaseEvents.UP_ARROW, function () {\n            _this.fire(BaseEvents.UP_ARROW);\n        });\n        this.component.subscribe(BaseEvents.UPDATE_SETTINGS, function () {\n            _this.fire(BaseEvents.UPDATE_SETTINGS);\n        });\n        this.component.subscribe(BaseEvents.VIEW_FULL_TERMS, function () {\n            _this.fire(BaseEvents.VIEW_FULL_TERMS);\n        });\n        this.component.subscribe(BaseEvents.WINDOW_UNLOAD, function () {\n            _this.fire(BaseEvents.WINDOW_UNLOAD);\n        });\n        // create shell and shared views.\n        this.shell = new Shell(this.$element);\n        this.createModules();\n        this.component.publish(BaseEvents.RESIZE); // initial sizing\n        setTimeout(function () {\n            //this.component.el.classList.add(\"created\");\n            _this.render();\n            _this.component.publish(BaseEvents.CREATED);\n            _this._setDefaultFocus();\n        }, 1);\n    };\n    BaseExtension.prototype.createModules = function () {\n        this.$authDialogue = $('<div class=\"overlay auth\" aria-hidden=\"true\"></div>');\n        this.shell.$overlays.append(this.$authDialogue);\n        this.authDialogue = new AuthDialogue(this.$authDialogue);\n        this.$clickThroughDialogue = $('<div class=\"overlay clickthrough\" aria-hidden=\"true\"></div>');\n        this.shell.$overlays.append(this.$clickThroughDialogue);\n        this.clickThroughDialogue = new ClickThroughDialogue(this.$clickThroughDialogue);\n        this.$restrictedDialogue = $('<div class=\"overlay login\" aria-hidden=\"true\"></div>');\n        this.shell.$overlays.append(this.$restrictedDialogue);\n        this.restrictedDialogue = new RestrictedDialogue(this.$restrictedDialogue);\n        this.$loginDialogue = $('<div class=\"overlay login\" aria-hidden=\"true\"></div>');\n        this.shell.$overlays.append(this.$loginDialogue);\n        this.loginDialogue = new LoginDialogue(this.$loginDialogue);\n    };\n    BaseExtension.prototype._setDefaultFocus = function () {\n        var _this = this;\n        setTimeout(function () {\n            if (_this.data.config.options.allowStealFocus) {\n                $(\"[tabindex=0]\").focus();\n            }\n        }, 1);\n    };\n    BaseExtension.prototype.width = function () {\n        return this.$element.width();\n    };\n    BaseExtension.prototype.height = function () {\n        return this.$element.height();\n    };\n    BaseExtension.prototype.exitFullScreen = function () {\n        this.component.publish(BaseEvents.EXIT_FULLSCREEN);\n    };\n    BaseExtension.prototype.fire = function (name) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        this.component.fire(name, arguments[1]);\n    };\n    BaseExtension.prototype.redirect = function (uri) {\n        this.fire(BaseEvents.REDIRECT, uri);\n    };\n    BaseExtension.prototype.refresh = function () {\n        this.fire(BaseEvents.REFRESH, null);\n    };\n    BaseExtension.prototype.render = function () {\n        if (!this.isCreated ||\n            this.data.collectionIndex !== this.helper.collectionIndex) {\n            this.component.publish(BaseEvents.COLLECTION_INDEX_CHANGED, this.data.collectionIndex);\n        }\n        if (!this.isCreated ||\n            this.data.manifestIndex !== this.helper.manifestIndex) {\n            this.component.publish(BaseEvents.MANIFEST_INDEX_CHANGED, this.data.manifestIndex);\n        }\n        if (!this.isCreated ||\n            this.data.sequenceIndex !== this.helper.sequenceIndex) {\n            this.component.publish(BaseEvents.SEQUENCE_INDEX_CHANGED, this.data.sequenceIndex);\n        }\n        if (!this.isCreated || this.data.canvasIndex !== this.helper.canvasIndex) {\n            this.component.publish(BaseEvents.CANVAS_INDEX_CHANGED, this.data.canvasIndex);\n        }\n        if (!this.isCreated || this.data.rangeId !== this.helper.rangeId) {\n            if (this.data.rangeId) {\n                var range = this.helper.getRangeById(this.data.rangeId);\n                if (range) {\n                    this.component.publish(BaseEvents.RANGE_CHANGED, range);\n                }\n                else {\n                    console.warn(\"range id not found:\", this.data.rangeId);\n                }\n            }\n        }\n    };\n    BaseExtension.prototype._initLocales = function () {\n        var availableLocales = this.data.config.localisation.locales.slice(0);\n        var configuredLocales = this.data.locales;\n        var finalLocales = [];\n        // loop through configuredLocales array (those passed in when initialising the UV component)\n        // if availableLocales (those available in each extension's l10n directory) contains a configured locale, add it to finalLocales.\n        // if the configured locale has a label, substitute it\n        // mark locale as added.\n        // if limitLocales is disabled,\n        // loop through remaining availableLocales and add to finalLocales.\n        if (configuredLocales) {\n            configuredLocales.forEach(function (configuredLocale) {\n                var match = availableLocales.filter(function (item) {\n                    return item.name === configuredLocale.name;\n                });\n                if (match.length) {\n                    var m = match[0];\n                    if (configuredLocale.label)\n                        m.label = configuredLocale.label;\n                    m.added = true;\n                    finalLocales.push(m);\n                }\n            });\n            var limitLocales = Bools.getBool(this.data.config.options.limitLocales, false);\n            if (!limitLocales) {\n                availableLocales.forEach(function (availableLocale) {\n                    if (!availableLocale.added) {\n                        finalLocales.push(availableLocale);\n                    }\n                    delete availableLocale.added;\n                });\n            }\n            this.data.locales = finalLocales;\n        }\n        else {\n            console.warn(\"No locales configured\");\n        }\n    };\n    BaseExtension.prototype._parseMetrics = function () {\n        var metrics = this.data.config.options.metrics;\n        if (metrics) {\n            for (var i = 0; i < metrics.length; i++) {\n                var m = metrics[i];\n                if (typeof m.type === \"string\") {\n                    m.type = new MetricType(m.type);\n                }\n                this.metrics.push(m);\n            }\n        }\n    };\n    BaseExtension.prototype._updateMetric = function () {\n        var _this = this;\n        setTimeout(function () {\n            // loop through all metrics\n            // find one that matches the current dimensions\n            // if a metric is found, and it's not the current metric, set it to be the current metric and publish a METRIC_CHANGED event\n            // if no metric is found, set MetricType.NONE to be the current metric and publish a METRIC_CHANGED event\n            var metricFound = false;\n            for (var i = 0; i < _this.metrics.length; i++) {\n                var metric = _this.metrics[i];\n                // if the current width and height is within this metric's defined range\n                var width = window.innerWidth;\n                var height = window.innerHeight;\n                if (width >= metric.minWidth &&\n                    width <= metric.maxWidth &&\n                    height >= metric.minHeight &&\n                    height <= metric.maxHeight) {\n                    metricFound = true;\n                    if (_this.metric !== metric.type) {\n                        _this.metric = metric.type;\n                        _this.component.publish(BaseEvents.METRIC_CHANGED);\n                    }\n                }\n            }\n            if (!metricFound) {\n                if (_this.metric !== MetricType.NONE) {\n                    _this.metric = MetricType.NONE;\n                    _this.component.publish(BaseEvents.METRIC_CHANGED);\n                }\n            }\n        }, 1);\n    };\n    BaseExtension.prototype.resize = function () {\n        this._updateMetric();\n        //console.log(\"resize\");\n        this.component.publish(BaseEvents.RESIZE);\n    };\n    // re-bootstraps the application with new querystring params\n    BaseExtension.prototype.reload = function (data) {\n        this.component.publish(BaseEvents.RELOAD, data);\n    };\n    BaseExtension.prototype.isSeeAlsoEnabled = function () {\n        return this.data.config.options.seeAlsoEnabled !== false;\n    };\n    BaseExtension.prototype.getShareUrl = function () {\n        // If not embedded on an external domain (this causes CORS errors when fetching parent url)\n        if (!this.data.embedded) {\n            // Use the current page URL with hash params\n            if (Documents.isInIFrame()) {\n                return parent.document.location.href;\n            }\n            else {\n                return document.location.href;\n            }\n        }\n        else {\n            // If there's a `related` property of format `text/html` in the manifest\n            if (this.helper.hasRelatedPage()) {\n                // Use the `related` property in the URL box\n                var related = this.helper.getRelated();\n                if (related && related.length) {\n                    related = related[0];\n                }\n                return related[\"@id\"];\n            }\n        }\n        return null;\n    };\n    BaseExtension.prototype.getIIIFShareUrl = function (shareManifests) {\n        if (shareManifests === void 0) { shareManifests = false; }\n        var manifestUri;\n        if (shareManifests) {\n            if (this.helper.manifest) {\n                manifestUri = this.helper.manifest.id;\n            }\n            else {\n                manifestUri = this.helper.manifestUri;\n            }\n        }\n        return manifestUri + \"?manifest=\" + manifestUri;\n    };\n    BaseExtension.prototype.addTimestamp = function (uri) {\n        return uri + \"?t=\" + Dates.getTimeStamp();\n    };\n    BaseExtension.prototype.getDomain = function () {\n        var parts = Urls.getUrlParts(this.helper.manifestUri);\n        return parts.host;\n    };\n    BaseExtension.prototype.getAppUri = function () {\n        var parts = Urls.getUrlParts(document.location.href);\n        var origin = window.location.protocol +\n            \"//\" +\n            window.location.hostname +\n            (window.location.port ? \":\" + window.location.port : \"\");\n        var pathname = parts.pathname;\n        if (!pathname.startsWith(\"/\")) {\n            pathname = \"/\" + pathname;\n        }\n        pathname = pathname.substr(0, pathname.lastIndexOf(\"/\") + 1); // remove the file name\n        var appUri = origin + pathname;\n        // let assetsDir: string = '';\n        // if (!Documents.isInIFrame()) {\n        //     assetsDir = this.data.assetsDir || '';\n        //     if (assetsDir.startsWith('./')) {\n        //         assetsDir = assetsDir.substr(2);\n        //     }\n        //     if (assetsDir && !assetsDir.endsWith('/')) {\n        //         assetsDir += '/';\n        //     }\n        // }\n        // // if assetsDir is a URL, use that instead of appUri.\n        // if (isValidUrl(assetsDir)) {\n        //     return assetsDir + 'uv.html';\n        // }\n        return appUri + \"uv.html\";\n    };\n    BaseExtension.prototype.getSettings = function () {\n        if (Bools.getBool(this.data.config.options.saveUserSettings, false)) {\n            var settings = Storage.get(\"uv.settings\", StorageType.LOCAL);\n            if (settings) {\n                return $.extend(this.data.config.options, settings.value);\n            }\n        }\n        return this.data.config.options;\n    };\n    BaseExtension.prototype.updateSettings = function (settings) {\n        if (Bools.getBool(this.data.config.options.saveUserSettings, false)) {\n            var storedSettings = Storage.get(\"uv.settings\", StorageType.LOCAL);\n            if (storedSettings) {\n                settings = $.extend(storedSettings.value, settings);\n            }\n            // store for ten years\n            Storage.set(\"uv.settings\", settings, 315360000, StorageType.LOCAL);\n        }\n        this.data.config.options = $.extend(this.data.config.options, settings);\n    };\n    BaseExtension.prototype.getLocale = function () {\n        return this.helper.options.locale;\n    };\n    BaseExtension.prototype.getSharePreview = function () {\n        var title = this.helper.getLabel();\n        // todo: use getThumb (when implemented)\n        var canvas = this.helper.getCurrentCanvas();\n        var thumbnail = canvas.getProperty(\"thumbnail\");\n        if (!thumbnail || !(typeof thumbnail === \"string\")) {\n            thumbnail = canvas.getCanonicalImageUri(this.data.config.options.bookmarkThumbWidth);\n        }\n        return {\n            title: title,\n            image: thumbnail\n        };\n    };\n    BaseExtension.prototype.getPagedIndices = function (canvasIndex) {\n        if (canvasIndex === void 0) { canvasIndex = this.helper.canvasIndex; }\n        return [canvasIndex];\n    };\n    BaseExtension.prototype.getCurrentCanvases = function () {\n        var indices = this.getPagedIndices(this.helper.canvasIndex);\n        var canvases = [];\n        for (var i = 0; i < indices.length; i++) {\n            var index = indices[i];\n            var canvas = this.helper.getCanvasByIndex(index);\n            canvases.push(canvas);\n        }\n        return canvases;\n    };\n    BaseExtension.prototype.getCanvasLabels = function (label) {\n        var indices = this.getPagedIndices();\n        var labels = \"\";\n        if (indices.length === 1) {\n            labels = label;\n        }\n        else {\n            for (var i = 1; i <= indices.length; i++) {\n                if (labels.length)\n                    labels += \",\";\n                labels += label + \" \" + i;\n            }\n        }\n        return labels;\n    };\n    BaseExtension.prototype.getCurrentCanvasRange = function () {\n        //var rangePath: string = this.currentRangePath ? this.currentRangePath : '';\n        //var range: manifesto.Range = this.helper.getCanvasRange(this.helper.getCurrentCanvas(), rangePath);\n        var range = this.helper.getCanvasRange(this.helper.getCurrentCanvas());\n        return range;\n    };\n    // todo: move to manifold?\n    BaseExtension.prototype.getExternalResources = function (resources) {\n        var _this = this;\n        var indices = this.getPagedIndices();\n        var resourcesToLoad = [];\n        indices.forEach(function (index) {\n            var canvas = _this.helper.getCanvasByIndex(index);\n            var r;\n            if (!canvas.externalResource) {\n                r = new ExternalResource(canvas, {\n                    authApiVersion: _this.data.config.options.authAPIVersion\n                });\n            }\n            else {\n                r = canvas.externalResource;\n            }\n            // reload resources if passed\n            if (resources) {\n                var found = resources.find(function (f) {\n                    return f.dataUri === r.dataUri;\n                });\n                if (found) {\n                    resourcesToLoad.push(found);\n                }\n                else {\n                    resourcesToLoad.push(r);\n                }\n            }\n            else {\n                resourcesToLoad.push(r);\n            }\n        });\n        var storageStrategy = this.data.config.options.tokenStorage;\n        var authAPIVersion = this.data.config.options.authAPIVersion;\n        // if using auth api v1\n        if (authAPIVersion === 1) {\n            return new Promise(function (resolve) {\n                var options = {\n                    locale: _this.helper.options.locale\n                };\n                Auth1.loadExternalResources(resourcesToLoad, storageStrategy, options).then(function (r) {\n                    _this.resources = r.map(function (resource) {\n                        return _this._prepareResourceData(resource);\n                    });\n                    resolve(_this.resources);\n                });\n            });\n        }\n        else {\n            return new Promise(function (resolve) {\n                Auth09.loadExternalResources(resourcesToLoad, storageStrategy).then(function (r) {\n                    _this.resources = r.map(function (resource) {\n                        return _this._prepareResourceData(resource);\n                    });\n                    resolve(_this.resources);\n                });\n            });\n        }\n    };\n    // copy useful properties over to the data object to be opened in center panel's openMedia method\n    // this is the info.json if there is one, which can be opened natively by openseadragon.\n    BaseExtension.prototype._prepareResourceData = function (resource) {\n        resource.data.hasServiceDescriptor = resource.hasServiceDescriptor();\n        // if the data isn't an info.json, give it the necessary viewing properties\n        if (!resource.hasServiceDescriptor()) {\n            resource.data.id = resource.dataUri;\n            resource.data.width = resource.width;\n            resource.data.height = resource.height;\n        }\n        resource.data.index = resource.index;\n        return Objects.toPlainObject(resource.data);\n    };\n    BaseExtension.prototype.getMediaFormats = function (canvas) {\n        var annotations = canvas.getContent();\n        if (annotations && annotations.length) {\n            var annotation = annotations[0];\n            return annotation.getBody();\n        }\n        else {\n            // legacy IxIF compatibility\n            var body = {\n                id: canvas.id,\n                type: canvas.getType(),\n                getFormat: function () {\n                    return \"\";\n                }\n            };\n            return [body];\n        }\n    };\n    BaseExtension.prototype.viewCanvas = function (canvasIndex) {\n        if (this.helper.isCanvasIndexOutOfRange(canvasIndex)) {\n            this.showMessage(this.data.config.content.canvasIndexOutOfRange);\n            return;\n        }\n        this.component.publish(BaseEvents.OPEN_EXTERNAL_RESOURCE);\n    };\n    BaseExtension.prototype.showMessage = function (message, acceptCallback, buttonText, allowClose) {\n        this.closeActiveDialogue();\n        this.component.publish(BaseEvents.SHOW_GENERIC_DIALOGUE, {\n            message: message,\n            acceptCallback: acceptCallback,\n            buttonText: buttonText,\n            allowClose: allowClose\n        });\n    };\n    BaseExtension.prototype.closeActiveDialogue = function () {\n        this.component.publish(BaseEvents.CLOSE_ACTIVE_DIALOGUE);\n    };\n    BaseExtension.prototype.isOverlayActive = function () {\n        return this.shell.$overlays.is(\":visible\");\n    };\n    BaseExtension.prototype.isDesktopMetric = function () {\n        return this.metric.toString() === MetricType.DESKTOP.toString();\n    };\n    BaseExtension.prototype.isWatchMetric = function () {\n        return this.metric.toString() === MetricType.WATCH.toString();\n    };\n    BaseExtension.prototype.isCatchAllMetric = function () {\n        return this.metric.toString() === MetricType.NONE.toString();\n    };\n    // todo: use redux in manifold to get reset state\n    BaseExtension.prototype.viewManifest = function (manifest) {\n        var data = {};\n        data.manifestUri = this.helper.manifestUri;\n        data.collectionIndex = this.helper.getCollectionIndex(manifest);\n        data.manifestIndex = manifest.index;\n        data.sequenceIndex = 0;\n        data.canvasIndex = 0;\n        this.reload(data);\n    };\n    // todo: use redux in manifold to get reset state\n    BaseExtension.prototype.viewCollection = function (collection) {\n        var data = {};\n        //data.manifestUri = this.helper.manifestUri;\n        data.manifestUri = collection.parentCollection\n            ? collection.parentCollection.id\n            : this.helper.manifestUri;\n        data.collectionIndex = collection.index;\n        data.manifestIndex = 0;\n        data.sequenceIndex = 0;\n        data.canvasIndex = 0;\n        this.reload(data);\n    };\n    BaseExtension.prototype.isFullScreen = function () {\n        return this.component.isFullScreen;\n    };\n    BaseExtension.prototype.isHeaderPanelEnabled = function () {\n        return Bools.getBool(this.data.config.options.headerPanelEnabled, true);\n    };\n    BaseExtension.prototype.isLeftPanelEnabled = function () {\n        if (Bools.getBool(this.data.config.options.leftPanelEnabled, true)) {\n            if (this.helper.hasParentCollection()) {\n                return true;\n            }\n            else if (this.helper.isMultiCanvas()) {\n                var viewingHint = this.helper.getViewingHint();\n                if (!viewingHint ||\n                    (viewingHint && viewingHint !== ViewingHint.CONTINUOUS)) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    };\n    BaseExtension.prototype.isRightPanelEnabled = function () {\n        return Bools.getBool(this.data.config.options.rightPanelEnabled, true);\n    };\n    BaseExtension.prototype.isFooterPanelEnabled = function () {\n        return Bools.getBool(this.data.config.options.footerPanelEnabled, true);\n    };\n    BaseExtension.prototype.isMobile = function () {\n        return $.browser.mobile;\n    };\n    BaseExtension.prototype.useArrowKeysToNavigate = function () {\n        return Bools.getBool(this.data.config.options.useArrowKeysToNavigate, true);\n    };\n    BaseExtension.prototype.bookmark = function () {\n        // override for each extension\n    };\n    BaseExtension.prototype.feedback = function () {\n        this.fire(BaseEvents.FEEDBACK, this.data);\n    };\n    BaseExtension.prototype.getAlternateLocale = function () {\n        var alternateLocale = null;\n        if (this.data.locales && this.data.locales.length > 1) {\n            alternateLocale = this.data.locales[1];\n        }\n        return alternateLocale;\n    };\n    BaseExtension.prototype.getSerializedLocales = function () {\n        if (this.data.locales) {\n            return this.serializeLocales(this.data.locales);\n        }\n        return null;\n    };\n    BaseExtension.prototype.serializeLocales = function (locales) {\n        var serializedLocales = \"\";\n        for (var i = 0; i < locales.length; i++) {\n            var l = locales[i];\n            if (i > 0)\n                serializedLocales += \",\";\n            serializedLocales += l.name;\n            if (l.label) {\n                serializedLocales += \":\" + l.label;\n            }\n        }\n        return serializedLocales;\n    };\n    BaseExtension.prototype.changeLocale = function (locale) {\n        // re-order locales so the passed locale is first\n        var data = {};\n        if (this.data.locales) {\n            data.locales = this.data.locales.slice(0);\n            var fromIndex = data.locales.findIndex(function (l) {\n                return l.name === locale;\n            });\n            var toIndex = 0;\n            data.locales.splice(toIndex, 0, data.locales.splice(fromIndex, 1)[0]);\n            this.reload(data);\n        }\n    };\n    return BaseExtension;\n}());\nexport { BaseExtension };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Panel } from \"./Panel\";\nvar BaseView = /** @class */ (function (_super) {\n    __extends(BaseView, _super);\n    function BaseView($element, fitToParentWidth, fitToParentHeight) {\n        return _super.call(this, $element, fitToParentWidth, fitToParentHeight) || this;\n    }\n    BaseView.prototype.create = function () {\n        this.component = this.$element.closest(\".uv\").data(\"component\");\n        _super.prototype.create.call(this);\n        this.extension = this.component.extension;\n        this.config = {};\n        this.config.content = {};\n        this.config.options = {};\n        var that = this;\n        // build config inheritance chain\n        if (that.modules && that.modules.length) {\n            that.modules = that.modules.reverse();\n            that.modules.forEach(function (moduleName) {\n                that.config = $.extend(true, that.config, that.extension.data.config.modules[moduleName]);\n            });\n        }\n        this.content = this.config.content;\n        this.options = this.config.options;\n    };\n    BaseView.prototype.init = function () { };\n    BaseView.prototype.setConfig = function (moduleName) {\n        if (!this.modules) {\n            this.modules = [];\n        }\n        this.modules.push(moduleName);\n    };\n    BaseView.prototype.resize = function () {\n        _super.prototype.resize.call(this);\n    };\n    return BaseView;\n}(Panel));\nexport { BaseView };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { BaseView } from \"./BaseView\";\nimport { Position } from \"./Position\";\nimport { sanitize } from \"../../Utils\";\nimport { Bools } from \"@edsilv/utils\";\nvar CenterPanel = /** @class */ (function (_super) {\n    __extends(CenterPanel, _super);\n    function CenterPanel($element) {\n        var _this = _super.call(this, $element, false, true) || this;\n        _this.subtitleExpanded = false;\n        _this.isAttributionOpen = false;\n        _this.attributionPosition = Position.BOTTOM_LEFT;\n        return _this;\n    }\n    CenterPanel.prototype.create = function () {\n        var _this = this;\n        _super.prototype.create.call(this);\n        this.$title = $('<div class=\"title\"></div>');\n        this.$element.append(this.$title);\n        this.$subtitle = $(\"<div class=\\\"subtitle\\\">\\n                                <div class=\\\"wrapper\\\">\\n                                    <button type=\\\"button\\\" class=\\\"expand-btn\\\" aria-label=\\\"Expand\\\">\\n                                        <span aria-hidden=\\\"true\\\">+</span>\\n                                    </button>\\n                                    <span class=\\\"text\\\"></span>\\n                                </div>\\n                            </div>\");\n        this.$element.append(this.$subtitle);\n        this.$subtitleWrapper = this.$subtitle.find(\".wrapper\");\n        this.$subtitleExpand = this.$subtitle.find(\".expand-btn\");\n        this.$subtitleText = this.$subtitle.find(\".text\");\n        this.$content = $('<div id=\"content\" class=\"content\"></div>');\n        this.$element.append(this.$content);\n        this.$attribution = $(\"\\n                                <div class=\\\"attribution\\\">\\n                                  <div class=\\\"header\\\">\\n                                    <div class=\\\"title\\\"></div>\\n                                    <button type=\\\"button\\\" class=\\\"close\\\" aria-label=\\\"Close\\\">\\n                                      <span aria-hidden=\\\"true\\\">&#215;</span>\\n                                    </button>\\n                                  </div>\\n                                  <div class=\\\"main\\\">\\n                                    <div class=\\\"attribution-text\\\"></div>\\n                                    <div class=\\\"license\\\"></div>\\n                                    <div class=\\\"logo\\\"></div>\\n                                  </div>\\n                                </div>\\n        \");\n        this.$attribution.find(\".header .title\").text(this.content.attribution);\n        this.$content.append(this.$attribution);\n        this.closeAttribution();\n        this.$closeAttributionButton = this.$attribution.find(\".header .close\");\n        this.$closeAttributionButton.on(\"click\", function (e) {\n            e.preventDefault();\n            _this.closeAttribution();\n        });\n        this.$subtitleExpand.on(\"click\", function (e) {\n            e.preventDefault();\n            _this.subtitleExpanded = !_this.subtitleExpanded;\n            if (_this.subtitleExpanded) {\n                _this.$subtitleWrapper.addClass(\"expanded\");\n                _this.$subtitleExpand.text(\"-\");\n            }\n            else {\n                _this.$subtitleWrapper.removeClass(\"expanded\");\n                _this.$subtitleExpand.text(\"+\");\n            }\n            _this.resize();\n        });\n        if (Bools.getBool(this.options.titleEnabled, true)) {\n            this.$title.removeClass(\"hidden\");\n        }\n        else {\n            this.$title.addClass(\"hidden\");\n        }\n        if (Bools.getBool(this.options.subtitleEnabled, false)) {\n            this.$subtitle.removeClass(\"hidden\");\n        }\n        else {\n            this.$subtitle.addClass(\"hidden\");\n        }\n        this.whenResized(function () {\n            _this.updateRequiredStatement();\n        });\n    };\n    CenterPanel.prototype.openAttribution = function () {\n        this.$attribution.show();\n        this.isAttributionOpen = true;\n    };\n    CenterPanel.prototype.closeAttribution = function () {\n        this.$attribution.hide();\n        this.isAttributionOpen = false;\n    };\n    CenterPanel.prototype.updateRequiredStatement = function () {\n        var _this = this;\n        var requiredStatement = this.extension.helper.getRequiredStatement();\n        //var license = this.provider.getLicense();\n        //var logo = this.provider.getLogo();\n        var enabled = Bools.getBool(this.options.requiredStatementEnabled, true);\n        if (!requiredStatement || !requiredStatement.value || !enabled) {\n            return;\n        }\n        this.openAttribution();\n        var $attributionTitle = this.$attribution.find(\".title\");\n        var $attributionText = this.$attribution.find(\".attribution-text\");\n        var $license = this.$attribution.find(\".license\");\n        var $logo = this.$attribution.find(\".logo\");\n        if (requiredStatement.label) {\n            var sanitizedTitle = sanitize(requiredStatement.label);\n            $attributionTitle.html(sanitizedTitle);\n        }\n        else {\n            $attributionTitle.text(this.content.attribution);\n        }\n        if (requiredStatement.value) {\n            var sanitizedText = sanitize(requiredStatement.value);\n            $attributionText.html(sanitizedText);\n            $attributionText\n                .find(\"img\")\n                .one(\"load\", function () {\n                _this.resize();\n            })\n                .each(function () {\n                if (this.complete)\n                    $(this).load();\n            });\n            $attributionText.targetBlank();\n        }\n        // $attribution.toggleExpandText(this.options.trimAttributionCount, () => {\n        //     this.resize();\n        // });\n        //if (license){\n        //    $license.append('<a href=\"' + license + '\">' + license + '</a>');\n        //} else {\n        $license.hide();\n        //}\n        //\n        //if (logo){\n        //    $logo.append('<img src=\"' + logo + '\"/>');\n        //} else {\n        $logo.hide();\n        //}\n        this.resize();\n    };\n    CenterPanel.prototype.resize = function () {\n        _super.prototype.resize.call(this);\n        var leftPanelWidth = this.extension.shell.$leftPanel.is(\":visible\")\n            ? Math.floor(this.extension.shell.$leftPanel.width())\n            : 0;\n        var rightPanelWidth = this.extension.shell.$rightPanel.is(\":visible\")\n            ? Math.floor(this.extension.shell.$rightPanel.width())\n            : 0;\n        var width = Math.floor(this.$element.parent().width() - leftPanelWidth - rightPanelWidth);\n        this.$element.css({\n            left: leftPanelWidth,\n            width: width\n        });\n        var titleHeight;\n        var subtitleHeight;\n        if ((this.options && this.options.titleEnabled === false) ||\n            !this.$title.is(\":visible\")) {\n            titleHeight = 0;\n        }\n        else {\n            titleHeight = this.$title.height();\n        }\n        if ((this.options && this.options.subtitleEnabled === false) ||\n            !this.$subtitle.is(\":visible\")) {\n            subtitleHeight = 0;\n        }\n        else {\n            subtitleHeight = this.$subtitle.height();\n        }\n        this.$content.height(this.$element.height() - titleHeight - subtitleHeight);\n        this.$content.width(this.$element.width());\n        if (this.$attribution && this.isAttributionOpen) {\n            switch (this.attributionPosition) {\n                case Position.BOTTOM_LEFT:\n                    this.$attribution.css(\"top\", this.$content.height() -\n                        this.$attribution.outerHeight() -\n                        this.$attribution.verticalMargins());\n                    this.$attribution.css(\"left\", 0);\n                    break;\n                case Position.BOTTOM_RIGHT:\n                    this.$attribution.css(\"top\", this.$content.height() -\n                        this.$attribution.outerHeight() -\n                        this.$attribution.verticalMargins());\n                    this.$attribution.css(\"left\", this.$content.width() -\n                        this.$attribution.outerWidth() -\n                        this.$attribution.horizontalMargins());\n                    break;\n            }\n            // hide the attribution if there's no room for it\n            if (this.$content.width() <= this.$attribution.width()) {\n                this.$attribution.hide();\n            }\n            else {\n                this.$attribution.show();\n            }\n        }\n        if (this.subtitle && this.options.subtitleEnabled) {\n            this.$subtitleText.html(sanitize(this.subtitle.replace(/<br\\s*[\\/]?>/gi, \"; \")));\n            this.$subtitleText.removeClass(\"elided\");\n            this.$subtitle.removeClass(\"hidden\");\n            this.$subtitleWrapper.css(\"max-height\", this.$content.height() + this.$subtitle.outerHeight());\n            this.$subtitleWrapper.width(this.$content.width());\n            if (!this.subtitleExpanded) {\n                this.$subtitleText.width(\"auto\");\n                this.$subtitleWrapper.width(\"auto\");\n                this.$subtitleExpand.hide();\n                // if the subtitle span is wider than the container, set it to display:block\n                // and set its width to that of the container\n                // this will make it appear elided.\n                // show the expand button\n                if (this.$subtitleText.width() > this.$content.width()) {\n                    this.$subtitleExpand.show();\n                    this.$subtitleText.addClass(\"elided\");\n                    this.$subtitleText.width(this.$content.width() -\n                        (this.$subtitleExpand.outerWidth() +\n                            this.$subtitleText.horizontalMargins()));\n                }\n            }\n            else {\n                // subtitle expanded\n                this.$subtitleText.width(this.$content.width() - this.$subtitleText.horizontalMargins() - 2);\n            }\n        }\n        else {\n            this.$subtitle.addClass(\"hidden\");\n        }\n    };\n    return CenterPanel;\n}(BaseView));\nexport { CenterPanel };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { BaseView } from \"./BaseView\";\nimport { BaseEvents } from \"./BaseEvents\";\nimport { Maths } from \"@edsilv/utils\";\nvar Dialogue = /** @class */ (function (_super) {\n    __extends(Dialogue, _super);\n    function Dialogue($element) {\n        var _this = _super.call(this, $element, false, false) || this;\n        _this.allowClose = true;\n        _this.isActive = false;\n        _this.isUnopened = true;\n        return _this;\n    }\n    Dialogue.prototype.create = function () {\n        var _this = this;\n        this.setConfig(\"dialogue\");\n        _super.prototype.create.call(this);\n        // events.\n        this.component.subscribe(BaseEvents.CLOSE_ACTIVE_DIALOGUE, function () {\n            if (_this.isActive) {\n                if (_this.allowClose) {\n                    _this.close();\n                }\n            }\n        });\n        this.component.subscribe(BaseEvents.ESCAPE, function () {\n            if (_this.isActive) {\n                if (_this.allowClose) {\n                    _this.close();\n                }\n            }\n        });\n        this.$top = $('<div class=\"top\"></div>');\n        this.$element.append(this.$top);\n        this.$closeButton = $('<button type=\"button\" class=\"btn btn-default close\" tabindex=\"0\">' +\n            this.content.close +\n            \"</button>\");\n        this.$middle = $('<div class=\"middle\"></div>');\n        this.$element.append(this.$middle);\n        this.$content = $('<div class=\"content\"></div>');\n        this.$middle.append(this.$content);\n        this.$buttons = $('<div class=\"buttons\"></div>');\n        this.$middle.append(this.$buttons);\n        this.$bottom = $('<div class=\"bottom\"></div>');\n        this.$element.append(this.$bottom);\n        if (this.config.topCloseButtonEnabled) {\n            this.$top.append(this.$closeButton);\n        }\n        else {\n            this.$buttons.append(this.$closeButton);\n        }\n        this.$closeButton.on(\"click\", function (e) {\n            e.preventDefault();\n            _this.close();\n        });\n        this.returnFunc = this.close;\n    };\n    Dialogue.prototype.enableClose = function () {\n        this.allowClose = true;\n        this.$closeButton.show();\n    };\n    Dialogue.prototype.disableClose = function () {\n        this.allowClose = false;\n        this.$closeButton.hide();\n    };\n    Dialogue.prototype.setDockedPosition = function () {\n        var top = Math.floor(this.extension.height() - this.$element.outerHeight(true));\n        var left = 0;\n        var arrowLeft = 0;\n        var normalisedPos = 0;\n        if (this.$triggerButton) {\n            var verticalPadding = 4;\n            var horizontalPadding = 2;\n            var a = this.$triggerButton.offset().top;\n            var b = this.extension.$element.offset()\n                .top;\n            var d = this.$element.outerHeight(true);\n            var e = a - b - d;\n            top = e + verticalPadding;\n            var f = this.$triggerButton.offset().left;\n            var g = this.extension.$element.offset()\n                .left;\n            var h = f - g;\n            normalisedPos = Maths.normalise(h, 0, this.extension.width());\n            left =\n                Math.floor(this.extension.width() * normalisedPos -\n                    this.$element.width() * normalisedPos) + horizontalPadding;\n            arrowLeft = Math.floor(this.$element.width() * normalisedPos);\n        }\n        this.$bottom.css(\"backgroundPosition\", arrowLeft + \"px 0px\");\n        this.$element.css({\n            top: top,\n            left: left\n        });\n    };\n    Dialogue.prototype.open = function (triggerButton) {\n        var _this = this;\n        this.$element.attr(\"aria-hidden\", \"false\");\n        this.$element.show();\n        if (triggerButton) {\n            this.$triggerButton = $(triggerButton);\n            this.$bottom.show();\n        }\n        else {\n            this.$bottom.hide();\n        }\n        this.isActive = true;\n        // set the focus to the default button.\n        setTimeout(function () {\n            var $defaultButton = _this.$element.find(\".default\");\n            if ($defaultButton.length) {\n                $defaultButton.focus();\n            }\n            else {\n                // if there's no default button, focus on the first visible input\n                var $input = _this.$element.find(\"input:visible\").first();\n                if ($input.length) {\n                    $input.focus();\n                }\n                else {\n                    // if there's no visible first input, focus on the close button\n                    _this.$closeButton.focus();\n                }\n            }\n        }, 1);\n        this.component.publish(BaseEvents.SHOW_OVERLAY);\n        if (this.isUnopened) {\n            this.isUnopened = false;\n            this.afterFirstOpen();\n        }\n        this.resize();\n    };\n    Dialogue.prototype.afterFirstOpen = function () { };\n    Dialogue.prototype.close = function () {\n        if (!this.isActive)\n            return;\n        this.$element.attr(\"aria-hidden\", \"true\");\n        this.$element.hide();\n        this.isActive = false;\n        this.component.publish(this.closeCommand);\n        this.component.publish(BaseEvents.HIDE_OVERLAY);\n    };\n    Dialogue.prototype.resize = function () {\n        _super.prototype.resize.call(this);\n        this.$element.css({\n            top: Math.floor(this.extension.height() / 2 - this.$element.height() / 2),\n            left: Math.floor(this.extension.width() / 2 - this.$element.width() / 2)\n        });\n    };\n    return Dialogue;\n}(BaseView));\nexport { Dialogue };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { BaseEvents } from \"./BaseEvents\";\nimport { BaseView } from \"./BaseView\";\nimport { Bools, Documents } from \"@edsilv/utils\";\nvar FooterPanel = /** @class */ (function (_super) {\n    __extends(FooterPanel, _super);\n    function FooterPanel($element) {\n        return _super.call(this, $element) || this;\n    }\n    FooterPanel.prototype.create = function () {\n        var _this = this;\n        this.setConfig(\"footerPanel\");\n        _super.prototype.create.call(this);\n        this.component.subscribe(BaseEvents.TOGGLE_FULLSCREEN, function () {\n            _this.updateFullScreenButton();\n            // hack for firefox when exiting full screen\n            if (!_this.component.isFullScreen) {\n                setTimeout(function () {\n                    _this.resize();\n                }, 1001); // wait one ms longer than the resize timeout in uv-helpers.js\n            }\n        });\n        this.component.subscribe(BaseEvents.METRIC_CHANGED, function () {\n            _this.updateMinimisedButtons();\n            _this.updateMoreInfoButton();\n        });\n        this.component.subscribe(BaseEvents.SETTINGS_CHANGED, function () {\n            _this.updateDownloadButton();\n        });\n        this.$options = $('<div class=\"options\"></div>');\n        this.$element.append(this.$options);\n        this.$feedbackButton = $(\"\\n          <button class=\\\"feedback btn imageBtn\\\" title=\\\"\" + this.content.feedback + \"\\\" tabindex=\\\"0\\\">\\n            <i class=\\\"uv-icon uv-icon-feedback\\\" aria-hidden=\\\"true\\\"></i>\" + this.content.feedback + \"\\n          </button>\\n        \");\n        this.$options.prepend(this.$feedbackButton);\n        this.$openButton = $(\"\\n          <button class=\\\"open btn imageBtn\\\" title=\\\"\" + this.content.open + \"\\\" tabindex=\\\"0\\\">\\n            <i class=\\\"uv-icon-open\\\" aria-hidden=\\\"true\\\"></i>\" + this.content.open + \"\\n          </button>\\n        \");\n        this.$options.prepend(this.$openButton);\n        this.$bookmarkButton = $(\"\\n          <button class=\\\"bookmark btn imageBtn\\\" title=\\\"\" + this.content.bookmark + \"\\\" tabindex=\\\"0\\\">\\n            <i class=\\\"uv-icon uv-icon-bookmark\\\" aria-hidden=\\\"true\\\"></i>\" + this.content.bookmark + \"\\n          </button>\\n        \");\n        this.$options.prepend(this.$bookmarkButton);\n        this.$shareButton = $(\"\\n          <button class=\\\"share btn imageBtn\\\" title=\\\"\" + this.content.share + \"\\\" tabindex=\\\"0\\\">\\n            <i class=\\\"uv-icon uv-icon-share\\\" aria-hidden=\\\"true\\\"></i>\" + this.content.share + \"\\n          </button>\\n        \");\n        this.$options.append(this.$shareButton);\n        this.$embedButton = $(\"\\n          <button class=\\\"embed btn imageBtn\\\" title=\\\"\" + this.content.embed + \"\\\" tabindex=\\\"0\\\">\\n            <i class=\\\"uv-icon uv-icon-embed\\\" aria-hidden=\\\"true\\\"></i>\" + this.content.embed + \"\\n          </button>\\n        \");\n        this.$options.append(this.$embedButton);\n        this.$downloadButton = $(\"\\n          <button class=\\\"download btn imageBtn\\\" title=\\\"\" + this.content.download + \"\\\" tabindex=\\\"0\\\">\\n            <i class=\\\"uv-icon uv-icon-download\\\" aria-hidden=\\\"true\\\"></i>\" + this.content.download + \"\\n          </button>\\n        \");\n        this.$options.prepend(this.$downloadButton);\n        this.$moreInfoButton = $(\"\\n          <button class=\\\"moreInfo btn imageBtn\\\" title=\\\"\" + this.content.moreInfo + \"\\\" tabindex=\\\"0\\\">\\n            <i class=\\\"uv-icon uv-icon-more-info\\\" aria-hidden=\\\"true\\\"></i>\" + this.content.moreInfo + \"\\n          </button>\\n        \");\n        this.$options.prepend(this.$moreInfoButton);\n        this.$fullScreenBtn = $(\"\\n          <button class=\\\"fullScreen btn imageBtn\\\" title=\\\"\" + this.content.fullScreen + \"\\\" tabindex=\\\"0\\\">\\n            <i class=\\\"uv-icon uv-icon-fullscreen\\\" aria-hidden=\\\"true\\\"></i>\" + this.content.fullScreen + \"\\n          </button>\\n        \");\n        this.$options.append(this.$fullScreenBtn);\n        this.$openButton.onPressed(function () {\n            _this.component.publish(BaseEvents.OPEN);\n        });\n        this.$feedbackButton.onPressed(function () {\n            _this.component.publish(BaseEvents.FEEDBACK);\n        });\n        this.$bookmarkButton.onPressed(function () {\n            _this.component.publish(BaseEvents.BOOKMARK);\n        });\n        this.$shareButton.onPressed(function () {\n            _this.component.publish(BaseEvents.SHOW_SHARE_DIALOGUE, _this.$shareButton);\n        });\n        this.$embedButton.onPressed(function () {\n            _this.component.publish(BaseEvents.SHOW_EMBED_DIALOGUE, _this.$embedButton);\n        });\n        this.$downloadButton.onPressed(function () {\n            _this.component.publish(BaseEvents.SHOW_DOWNLOAD_DIALOGUE, _this.$downloadButton);\n        });\n        this.$moreInfoButton.onPressed(function () {\n            _this.component.publish(BaseEvents.SHOW_MOREINFO_DIALOGUE, _this.$moreInfoButton);\n        });\n        this.$fullScreenBtn.on(\"click\", function (e) {\n            e.preventDefault();\n            _this.component.publish(BaseEvents.TOGGLE_FULLSCREEN);\n        });\n        if (!Bools.getBool(this.options.embedEnabled, true)) {\n            this.$embedButton.hide();\n        }\n        this.updateMoreInfoButton();\n        this.updateOpenButton();\n        this.updateFeedbackButton();\n        this.updateBookmarkButton();\n        this.updateEmbedButton();\n        this.updateDownloadButton();\n        this.updateFullScreenButton();\n        this.updateShareButton();\n        this.updateMinimisedButtons();\n    };\n    FooterPanel.prototype.updateMinimisedButtons = function () {\n        // if configured to always minimise buttons\n        if (Bools.getBool(this.options.minimiseButtons, false)) {\n            this.$options.addClass(\"minimiseButtons\");\n            return;\n        }\n        // otherwise, check metric\n        if (!this.extension.isDesktopMetric()) {\n            this.$options.addClass(\"minimiseButtons\");\n        }\n        else {\n            this.$options.removeClass(\"minimiseButtons\");\n        }\n    };\n    FooterPanel.prototype.updateMoreInfoButton = function () {\n        var configEnabled = Bools.getBool(this.options.moreInfoEnabled, false);\n        if (configEnabled && !this.extension.isDesktopMetric()) {\n            this.$moreInfoButton.show();\n        }\n        else {\n            this.$moreInfoButton.hide();\n        }\n    };\n    FooterPanel.prototype.updateOpenButton = function () {\n        var configEnabled = Bools.getBool(this.options.openEnabled, false);\n        if (configEnabled && Documents.isInIFrame()) {\n            this.$openButton.show();\n        }\n        else {\n            this.$openButton.hide();\n        }\n    };\n    FooterPanel.prototype.updateFullScreenButton = function () {\n        if (!Bools.getBool(this.options.fullscreenEnabled, true) ||\n            !Documents.supportsFullscreen()) {\n            this.$fullScreenBtn.hide();\n            return;\n        }\n        if (this.extension.data.isLightbox) {\n            this.$fullScreenBtn.addClass(\"lightbox\");\n        }\n        if (this.extension.isFullScreen()) {\n            this.$fullScreenBtn.switchClass(\"fullScreen\", \"exitFullscreen\");\n            this.$fullScreenBtn\n                .find(\"i\")\n                .switchClass(\"uv-icon-fullscreen\", \"uv-icon-exit-fullscreen\");\n            this.$fullScreenBtn.attr(\"title\", this.content.exitFullScreen);\n            $(this.$fullScreenBtn[0].firstChild.nextSibling.nextSibling).replaceWith(this.content.exitFullScreen);\n        }\n        else {\n            this.$fullScreenBtn.switchClass(\"exitFullscreen\", \"fullScreen\");\n            this.$fullScreenBtn\n                .find(\"i\")\n                .switchClass(\"uv-icon-exit-fullscreen\", \"uv-icon-fullscreen\");\n            this.$fullScreenBtn.attr(\"title\", this.content.fullScreen);\n            $(this.$fullScreenBtn[0].firstChild.nextSibling.nextSibling).replaceWith(this.content.fullScreen);\n        }\n    };\n    FooterPanel.prototype.updateEmbedButton = function () {\n        if (this.extension.helper.isUIEnabled(\"embed\") &&\n            Bools.getBool(this.options.embedEnabled, false)) {\n            // current jquery version sets display to 'inline' in mobile version, while this should remain hidden (see media query)\n            if (!this.extension.isMobile()) {\n                this.$embedButton.show();\n            }\n        }\n        else {\n            this.$embedButton.hide();\n        }\n    };\n    FooterPanel.prototype.updateShareButton = function () {\n        if (this.extension.helper.isUIEnabled(\"share\") &&\n            Bools.getBool(this.options.shareEnabled, true)) {\n            this.$shareButton.show();\n        }\n        else {\n            this.$shareButton.hide();\n        }\n    };\n    FooterPanel.prototype.updateDownloadButton = function () {\n        var configEnabled = Bools.getBool(this.options.downloadEnabled, true);\n        if (configEnabled) {\n            this.$downloadButton.show();\n        }\n        else {\n            this.$downloadButton.hide();\n        }\n    };\n    FooterPanel.prototype.updateFeedbackButton = function () {\n        var configEnabled = Bools.getBool(this.options.feedbackEnabled, false);\n        if (configEnabled) {\n            this.$feedbackButton.show();\n        }\n        else {\n            this.$feedbackButton.hide();\n        }\n    };\n    FooterPanel.prototype.updateBookmarkButton = function () {\n        var configEnabled = Bools.getBool(this.options.bookmarkEnabled, false);\n        if (configEnabled) {\n            this.$bookmarkButton.show();\n        }\n        else {\n            this.$bookmarkButton.hide();\n        }\n    };\n    FooterPanel.prototype.resize = function () {\n        _super.prototype.resize.call(this);\n    };\n    return FooterPanel;\n}(BaseView));\nexport { FooterPanel };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { BaseEvents } from \"./BaseEvents\";\nimport { Dialogue } from \"./Dialogue\";\nvar GenericDialogue = /** @class */ (function (_super) {\n    __extends(GenericDialogue, _super);\n    function GenericDialogue($element) {\n        return _super.call(this, $element) || this;\n    }\n    GenericDialogue.prototype.create = function () {\n        var _this = this;\n        this.setConfig(\"genericDialogue\");\n        _super.prototype.create.call(this);\n        this.openCommand = BaseEvents.SHOW_GENERIC_DIALOGUE;\n        this.closeCommand = BaseEvents.HIDE_GENERIC_DIALOGUE;\n        this.component.subscribe(this.openCommand, function (params) {\n            _this.acceptCallback = params.acceptCallback;\n            _this.showMessage(params);\n        });\n        this.component.subscribe(this.closeCommand, function () {\n            _this.close();\n        });\n        this.$message = $(\"<p></p>\");\n        this.$content.append(this.$message);\n        this.$acceptButton = $(\"\\n          <button class=\\\"btn btn-primary accept default\\\">\\n            \" + this.content.ok + \"\\n          </button>\\n        \");\n        this.$buttons.append(this.$acceptButton);\n        // Hide the redundant close button\n        this.$buttons.find(\".close\").hide();\n        this.$acceptButton.onPressed(function () {\n            _this.accept();\n        });\n        this.returnFunc = function () {\n            if (_this.isActive) {\n                _this.accept();\n            }\n        };\n        this.$element.hide();\n    };\n    GenericDialogue.prototype.accept = function () {\n        this.component.publish(BaseEvents.CLOSE_ACTIVE_DIALOGUE);\n        if (this.acceptCallback)\n            this.acceptCallback();\n    };\n    GenericDialogue.prototype.showMessage = function (params) {\n        this.$message.html(params.message);\n        if (params.buttonText) {\n            this.$acceptButton.text(params.buttonText);\n        }\n        else {\n            this.$acceptButton.text(this.content.ok);\n        }\n        if (params.allowClose === false) {\n            this.disableClose();\n        }\n        this.open();\n    };\n    GenericDialogue.prototype.resize = function () {\n        _super.prototype.resize.call(this);\n    };\n    return GenericDialogue;\n}(Dialogue));\nexport { GenericDialogue };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { BaseEvents } from \"./BaseEvents\";\nimport { BaseView } from \"./BaseView\";\nimport { InformationFactory } from \"../uv-shared-module/InformationFactory\";\nimport { Bools } from \"@edsilv/utils\";\nvar HeaderPanel = /** @class */ (function (_super) {\n    __extends(HeaderPanel, _super);\n    function HeaderPanel($element) {\n        return _super.call(this, $element, false, false) || this;\n    }\n    HeaderPanel.prototype.create = function () {\n        var _this = this;\n        this.setConfig(\"headerPanel\");\n        _super.prototype.create.call(this);\n        this.component.subscribe(BaseEvents.SHOW_INFORMATION, function (args) {\n            _this.showInformation(args);\n        });\n        this.component.subscribe(BaseEvents.HIDE_INFORMATION, function () {\n            _this.hideInformation();\n        });\n        this.$options = $('<div class=\"options\"></div>');\n        this.$element.append(this.$options);\n        this.$centerOptions = $('<div class=\"centerOptions\"></div>');\n        this.$options.append(this.$centerOptions);\n        this.$rightOptions = $('<div class=\"rightOptions\"></div>');\n        this.$options.append(this.$rightOptions);\n        //this.$helpButton = $('<a href=\"#\" class=\"action help\">' + this.content.help + '</a>');\n        //this.$rightOptions.append(this.$helpButton);\n        this.$localeToggleButton = $('<a class=\"localeToggle\" tabindex=\"0\"></a>');\n        this.$rightOptions.append(this.$localeToggleButton);\n        this.$settingsButton = $(\"\\n          <button class=\\\"btn imageBtn settings\\\" tabindex=\\\"0\\\" title=\\\"\" + this.content.settings + \"\\\">\\n            <i class=\\\"uv-icon-settings\\\" aria-hidden=\\\"true\\\"></i>\" + this.content.settings + \"\\n          </button>\\n        \");\n        this.$settingsButton.attr(\"title\", this.content.settings);\n        this.$rightOptions.append(this.$settingsButton);\n        this.$informationBox = $('<div class=\"informationBox\" aria-hidden=\"true\"> \\\n                                    <div class=\"message\"></div> \\\n                                    <div class=\"actions\"></div> \\\n                                    <button type=\"button\" class=\"close\" aria-label=\"Close\"> \\\n                                        <span aria-hidden=\"true\">&#215;</span>\\\n                                    </button> \\\n                                  </div>');\n        this.$element.append(this.$informationBox);\n        this.$informationBox.hide();\n        this.$informationBox.find(\".close\").attr(\"title\", this.content.close);\n        this.$informationBox.find(\".close\").on(\"click\", function (e) {\n            e.preventDefault();\n            _this.component.publish(BaseEvents.HIDE_INFORMATION);\n        });\n        this.$localeToggleButton.on(\"click\", function () {\n            _this.extension.changeLocale(String(_this.$localeToggleButton.data(\"locale\")));\n        });\n        this.$settingsButton.onPressed(function () {\n            _this.component.publish(BaseEvents.SHOW_SETTINGS_DIALOGUE);\n        });\n        if (!Bools.getBool(this.options.centerOptionsEnabled, true)) {\n            this.$centerOptions.hide();\n        }\n        this.updateLocaleToggle();\n        this.updateSettingsButton();\n    };\n    HeaderPanel.prototype.updateLocaleToggle = function () {\n        if (!this.localeToggleIsVisible()) {\n            this.$localeToggleButton.hide();\n            return;\n        }\n        var alternateLocale = this.extension.getAlternateLocale();\n        var text = alternateLocale.name.split(\"-\")[0].toUpperCase();\n        this.$localeToggleButton.data(\"locale\", alternateLocale.name);\n        this.$localeToggleButton.attr(\"title\", alternateLocale.label);\n        this.$localeToggleButton.text(text);\n    };\n    HeaderPanel.prototype.updateSettingsButton = function () {\n        var settingsEnabled = Bools.getBool(this.options.settingsButtonEnabled, true);\n        if (!settingsEnabled) {\n            this.$settingsButton.hide();\n        }\n        else {\n            this.$settingsButton.show();\n        }\n    };\n    HeaderPanel.prototype.localeToggleIsVisible = function () {\n        var locales = this.extension.data.locales;\n        if (locales) {\n            return (locales.length > 1 &&\n                Bools.getBool(this.options.localeToggleEnabled, false));\n        }\n        return false;\n    };\n    HeaderPanel.prototype.showInformation = function (args) {\n        var informationFactory = new InformationFactory(this.extension);\n        this.information = informationFactory.Get(args);\n        var $message = this.$informationBox.find(\".message\");\n        $message\n            .html(this.information.message)\n            .find(\"a\")\n            .attr(\"target\", \"_top\");\n        var $actions = this.$informationBox.find(\".actions\");\n        $actions.empty();\n        for (var i = 0; i < this.information.actions.length; i++) {\n            var action = this.information.actions[i];\n            var $action = $('<a href=\"#\" class=\"btn btn-default\">' + action.label + \"</a>\");\n            $action.on(\"click\", action.action);\n            $actions.append($action);\n        }\n        this.$informationBox.attr(\"aria-hidden\", \"false\");\n        this.$informationBox.show();\n        this.$element.addClass(\"showInformation\");\n        this.extension.resize();\n    };\n    HeaderPanel.prototype.hideInformation = function () {\n        this.$element.removeClass(\"showInformation\");\n        this.$informationBox.attr(\"aria-hidden\", \"true\");\n        this.$informationBox.hide();\n        this.extension.resize();\n    };\n    HeaderPanel.prototype.getSettings = function () {\n        return this.extension.getSettings();\n    };\n    HeaderPanel.prototype.updateSettings = function (settings) {\n        this.extension.updateSettings(settings);\n        this.component.publish(BaseEvents.UPDATE_SETTINGS, settings);\n    };\n    HeaderPanel.prototype.resize = function () {\n        _super.prototype.resize.call(this);\n        var headerWidth = this.$element.width();\n        var center = headerWidth / 2;\n        var containerWidth = this.$centerOptions.outerWidth();\n        var pos = center - containerWidth / 2;\n        this.$centerOptions.css({\n            left: pos\n        });\n        if (this.$informationBox.is(\":visible\")) {\n            var $actions = this.$informationBox.find(\".actions\");\n            var $message = this.$informationBox.find(\".message\");\n            $message.width(Math.floor(this.$element.width()) -\n                Math.ceil($message.horizontalMargins()) -\n                Math.ceil($actions.outerWidth(true)) -\n                Math.ceil(this.$informationBox.find(\".close\").outerWidth(true)) -\n                2);\n            $message.text(this.information.message);\n        }\n        // hide toggle buttons below minimum width\n        if (this.extension.width() <\n            this.extension.data.config.options.minWidthBreakPoint) {\n            if (this.localeToggleIsVisible())\n                this.$localeToggleButton.hide();\n        }\n        else {\n            if (this.localeToggleIsVisible())\n                this.$localeToggleButton.show();\n        }\n    };\n    return HeaderPanel;\n}(BaseView));\nexport { HeaderPanel };\n","var Information = /** @class */ (function () {\n    function Information(message, actions) {\n        this.message = message;\n        this.actions = actions;\n    }\n    return Information;\n}());\nexport { Information };\n","var InformationAction = /** @class */ (function () {\n    function InformationAction() {\n    }\n    return InformationAction;\n}());\nexport { InformationAction };\n","var InformationArgs = /** @class */ (function () {\n    function InformationArgs(informationType, param) {\n        this.informationType = informationType;\n        this.param = param;\n    }\n    return InformationArgs;\n}());\nexport { InformationArgs };\n","import { BaseEvents } from \"./BaseEvents\";\nimport { Information } from \"./Information\";\nimport { InformationAction } from \"./InformationAction\";\nimport { InformationType } from \"./InformationType\";\nvar InformationFactory = /** @class */ (function () {\n    function InformationFactory(extension) {\n        this.extension = extension;\n    }\n    InformationFactory.prototype.Get = function (args) {\n        var _this = this;\n        switch (args.informationType) {\n            case InformationType.AUTH_CORS_ERROR:\n                return new Information(this.extension.data.config.content.authCORSError, []);\n            case InformationType.DEGRADED_RESOURCE:\n                var actions = [];\n                var loginAction = new InformationAction();\n                var label = args.param.loginService.getConfirmLabel();\n                if (!label) {\n                    label = this.extension.data.config.content.fallbackDegradedLabel;\n                }\n                loginAction.label = label;\n                var resource_1 = args.param;\n                loginAction.action = function () {\n                    resource_1.authHoldingPage = window.open(\"\", \"_blank\");\n                    _this.extension.component.publish(BaseEvents.HIDE_INFORMATION);\n                    _this.extension.component.publish(BaseEvents.OPEN_EXTERNAL_RESOURCE, [\n                        [resource_1]\n                    ]);\n                };\n                actions.push(loginAction);\n                var message = args.param.loginService.getServiceLabel();\n                if (!message) {\n                    message = this.extension.data.config.content.fallbackDegradedMessage;\n                }\n                return new Information(message, actions);\n        }\n    };\n    return InformationFactory;\n}());\nexport { InformationFactory };\n","export var InformationType;\n(function (InformationType) {\n    InformationType[InformationType[\"AUTH_CORS_ERROR\"] = 0] = \"AUTH_CORS_ERROR\";\n    InformationType[InformationType[\"DEGRADED_RESOURCE\"] = 1] = \"DEGRADED_RESOURCE\";\n})(InformationType || (InformationType = {}));\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { BaseEvents } from \"./BaseEvents\";\nimport { BaseExpandPanel } from \"./BaseExpandPanel\";\nimport { Bools } from \"@edsilv/utils\";\nvar LeftPanel = /** @class */ (function (_super) {\n    __extends(LeftPanel, _super);\n    function LeftPanel($element) {\n        return _super.call(this, $element) || this;\n    }\n    LeftPanel.prototype.create = function () {\n        var _this = this;\n        _super.prototype.create.call(this);\n        this.$element.width(this.options.panelCollapsedWidth);\n        this.component.subscribe(BaseEvents.TOGGLE_EXPAND_LEFT_PANEL, function () {\n            if (_this.isFullyExpanded) {\n                _this.collapseFull();\n            }\n            else {\n                _this.expandFull();\n            }\n        });\n    };\n    LeftPanel.prototype.init = function () {\n        _super.prototype.init.call(this);\n        var shouldOpenPanel = Bools.getBool(this.extension.getSettings().leftPanelOpen, this.options.panelOpen);\n        if (shouldOpenPanel) {\n            this.toggle(true);\n        }\n    };\n    LeftPanel.prototype.getTargetWidth = function () {\n        if (this.isFullyExpanded || !this.isExpanded) {\n            return this.options.panelExpandedWidth;\n        }\n        else {\n            return this.options.panelCollapsedWidth;\n        }\n    };\n    LeftPanel.prototype.getFullTargetWidth = function () {\n        return this.$element.parent().width();\n    };\n    LeftPanel.prototype.toggleFinish = function () {\n        _super.prototype.toggleFinish.call(this);\n        if (this.isExpanded) {\n            this.component.publish(BaseEvents.OPEN_LEFT_PANEL);\n        }\n        else {\n            this.component.publish(BaseEvents.CLOSE_LEFT_PANEL);\n        }\n        this.extension.updateSettings({ leftPanelOpen: this.isExpanded });\n    };\n    LeftPanel.prototype.resize = function () {\n        _super.prototype.resize.call(this);\n        if (this.isFullyExpanded) {\n            this.$element.width(this.$element.parent().width());\n        }\n    };\n    return LeftPanel;\n}(BaseExpandPanel));\nexport { LeftPanel };\n","var LoginWarningMessages = /** @class */ (function () {\n    function LoginWarningMessages() {\n    }\n    LoginWarningMessages.FORBIDDEN = \"forbiddenResourceMessage\";\n    return LoginWarningMessages;\n}());\nexport { LoginWarningMessages };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { StringValue } from \"./StringValue\";\nvar MetricType = /** @class */ (function (_super) {\n    __extends(MetricType, _super);\n    function MetricType() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    MetricType.DESKTOP = new MetricType(\"desktop\");\n    MetricType.MOBILELANDSCAPE = new MetricType(\"mobilelandscape\");\n    MetricType.MOBILEPORTRAIT = new MetricType(\"mobileportrait\");\n    MetricType.NONE = new MetricType(\"none\");\n    MetricType.WATCH = new MetricType(\"watch\");\n    return MetricType;\n}(StringValue));\nexport { MetricType };\n","import { BaseEvents } from \"./BaseEvents\";\nimport { Async } from \"@edsilv/utils\";\nvar Panel = /** @class */ (function () {\n    function Panel($element, fitToParentWidth, fitToParentHeight) {\n        this.isResized = false;\n        this.$element = $element;\n        this.fitToParentWidth = fitToParentWidth || false;\n        this.fitToParentHeight = fitToParentHeight || false;\n        this.create();\n    }\n    Panel.prototype.create = function () {\n        var _this = this;\n        this.component.subscribe(BaseEvents.RESIZE, function () {\n            _this.resize();\n        });\n    };\n    Panel.prototype.whenResized = function (cb) {\n        var _this = this;\n        Async.waitFor(function () {\n            return _this.isResized;\n        }, cb);\n    };\n    Panel.prototype.resize = function () {\n        var $parent = this.$element.parent();\n        if (this.fitToParentWidth) {\n            this.$element.width($parent.width());\n        }\n        if (this.fitToParentHeight) {\n            this.$element.height($parent.height());\n        }\n        this.isResized = true;\n    };\n    return Panel;\n}());\nexport { Panel };\n","export var Position;\n(function (Position) {\n    Position[Position[\"TOP_LEFT\"] = 0] = \"TOP_LEFT\";\n    Position[Position[\"TOP_CENTER\"] = 1] = \"TOP_CENTER\";\n    Position[Position[\"TOP_RIGHT\"] = 2] = \"TOP_RIGHT\";\n    Position[Position[\"CENTER_LEFT\"] = 3] = \"CENTER_LEFT\";\n    Position[Position[\"CENTER\"] = 4] = \"CENTER\";\n    Position[Position[\"CENTER_RIGHT\"] = 5] = \"CENTER_RIGHT\";\n    Position[Position[\"BOTTOM_LEFT\"] = 6] = \"BOTTOM_LEFT\";\n    Position[Position[\"BOTTOM_CENTER\"] = 7] = \"BOTTOM_CENTER\";\n    Position[Position[\"BOTTOM_RIGHT\"] = 8] = \"BOTTOM_RIGHT\";\n})(Position || (Position = {}));\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { BaseEvents } from \"./BaseEvents\";\nimport { BaseExpandPanel } from \"./BaseExpandPanel\";\nimport { Bools } from \"@edsilv/utils\";\nvar RightPanel = /** @class */ (function (_super) {\n    __extends(RightPanel, _super);\n    function RightPanel($element) {\n        return _super.call(this, $element) || this;\n    }\n    RightPanel.prototype.create = function () {\n        _super.prototype.create.call(this);\n        this.$element.width(this.options.panelCollapsedWidth);\n    };\n    RightPanel.prototype.init = function () {\n        var _this = this;\n        _super.prototype.init.call(this);\n        var shouldOpenPanel = Bools.getBool(this.extension.getSettings().rightPanelOpen, this.options.panelOpen);\n        if (shouldOpenPanel) {\n            this.toggle(true);\n        }\n        this.component.subscribe(BaseEvents.TOGGLE_EXPAND_RIGHT_PANEL, function () {\n            if (_this.isFullyExpanded) {\n                _this.collapseFull();\n            }\n            else {\n                _this.expandFull();\n            }\n        });\n    };\n    RightPanel.prototype.getTargetWidth = function () {\n        return this.isExpanded\n            ? this.options.panelCollapsedWidth\n            : this.options.panelExpandedWidth;\n    };\n    RightPanel.prototype.getTargetLeft = function () {\n        return this.isExpanded\n            ? this.$element.parent().width() - this.options.panelCollapsedWidth\n            : this.$element.parent().width() - this.options.panelExpandedWidth;\n    };\n    RightPanel.prototype.toggleFinish = function () {\n        _super.prototype.toggleFinish.call(this);\n        if (this.isExpanded) {\n            this.component.publish(BaseEvents.OPEN_RIGHT_PANEL);\n        }\n        else {\n            this.component.publish(BaseEvents.CLOSE_RIGHT_PANEL);\n        }\n        this.extension.updateSettings({ rightPanelOpen: this.isExpanded });\n    };\n    RightPanel.prototype.resize = function () {\n        _super.prototype.resize.call(this);\n        this.$element.css({\n            left: Math.floor(this.$element.parent().width() - this.$element.outerWidth())\n        });\n    };\n    return RightPanel;\n}(BaseExpandPanel));\nexport { RightPanel };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { BaseEvents } from \"./BaseEvents\";\nimport { BaseView } from \"./BaseView\";\nimport { GenericDialogue } from \"./GenericDialogue\";\nvar Shell = /** @class */ (function (_super) {\n    __extends(Shell, _super);\n    function Shell($element) {\n        return _super.call(this, $element, true, true) || this;\n    }\n    Shell.prototype.create = function () {\n        var _this = this;\n        _super.prototype.create.call(this);\n        this.component.subscribe(BaseEvents.SHOW_OVERLAY, function () {\n            _this.$overlays.show();\n        });\n        this.component.subscribe(BaseEvents.HIDE_OVERLAY, function () {\n            _this.$overlays.hide();\n        });\n        this.$headerPanel = $('<div class=\"headerPanel\"></div>');\n        this.$element.append(this.$headerPanel);\n        this.$mainPanel = $('<div class=\"mainPanel\"></div>');\n        this.$element.append(this.$mainPanel);\n        this.$centerPanel = $('<div class=\"centerPanel\"></div>');\n        this.$mainPanel.append(this.$centerPanel);\n        this.$leftPanel = $('<div class=\"leftPanel\"></div>');\n        this.$mainPanel.append(this.$leftPanel);\n        this.$rightPanel = $('<div class=\"rightPanel\"></div>');\n        this.$mainPanel.append(this.$rightPanel);\n        this.$footerPanel = $('<div class=\"footerPanel\"></div>');\n        this.$element.append(this.$footerPanel);\n        this.$mobileFooterPanel = $('<div class=\"mobileFooterPanel\"></div>');\n        this.$element.append(this.$mobileFooterPanel);\n        this.$overlays = $('<div class=\"overlays\"></div>');\n        this.$element.append(this.$overlays);\n        this.$genericDialogue = $('<div class=\"overlay genericDialogue\" aria-hidden=\"true\"></div>');\n        this.$overlays.append(this.$genericDialogue);\n        this.$overlays.on(\"click\", function (e) {\n            if ($(e.target).hasClass(\"overlays\")) {\n                e.preventDefault();\n                _this.component.publish(BaseEvents.CLOSE_ACTIVE_DIALOGUE);\n            }\n        });\n        // create shared views.\n        new GenericDialogue(this.$genericDialogue);\n    };\n    Shell.prototype.resize = function () {\n        var _this = this;\n        _super.prototype.resize.call(this);\n        setTimeout(function () {\n            _this.$overlays.width(_this.extension.width());\n            _this.$overlays.height(_this.extension.height());\n        }, 1);\n        var mainHeight = this.$element.height() -\n            parseInt(this.$mainPanel.css(\"paddingTop\")) -\n            (this.$headerPanel.is(\":visible\") ? this.$headerPanel.height() : 0) -\n            (this.$footerPanel.is(\":visible\") ? this.$footerPanel.height() : 0) -\n            (this.$mobileFooterPanel.is(\":visible\")\n                ? this.$mobileFooterPanel.height()\n                : 0);\n        this.$mainPanel.height(mainHeight);\n    };\n    return Shell;\n}(BaseView));\nexport { Shell };\n","var StringValue = /** @class */ (function () {\n    function StringValue(value) {\n        this.value = \"\";\n        if (value) {\n            this.value = value.toLowerCase();\n        }\n    }\n    StringValue.prototype.toString = function () {\n        return this.value;\n    };\n    return StringValue;\n}());\nexport { StringValue };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { BaseEvents } from \"./BaseEvents\";\nimport { BaseView } from \"./BaseView\";\nimport { ViewingDirection } from \"@iiif/vocabulary\";\nimport { Dates, Maths, Strings } from \"@edsilv/utils\";\nvar ThumbsView = /** @class */ (function (_super) {\n    __extends(ThumbsView, _super);\n    function ThumbsView($element) {\n        var _this = _super.call(this, $element, true, true) || this;\n        _this.isCreated = false;\n        _this.isOpen = false;\n        return _this;\n    }\n    ThumbsView.prototype.create = function () {\n        var _this = this;\n        _super.prototype.create.call(this);\n        this.component.subscribe(BaseEvents.CANVAS_INDEX_CHANGED, function (index) {\n            _this.selectIndex(parseInt(index));\n        });\n        this.component.subscribe(BaseEvents.LOGIN, function () {\n            _this.loadThumbs();\n        });\n        this.component.subscribe(BaseEvents.CLICKTHROUGH, function () {\n            _this.loadThumbs();\n        });\n        this.$thumbs = $('<div class=\"thumbs\"></div>');\n        this.$element.append(this.$thumbs);\n        var viewingDirection = this.extension.helper.getViewingDirection() ||\n            ViewingDirection.LEFT_TO_RIGHT;\n        this.$thumbs.addClass(viewingDirection); // defaults to \"left-to-right\"\n        var that = this;\n        $.templates({\n            thumbsTemplate: '<div id=\"thumb{{>index}}\" class=\"{{:~className()}}\" data-src=\"{{>uri}}\" data-visible=\"{{>visible}}\" data-index=\"{{>index}}\">\\\n                                <div class=\"wrap\" style=\"height:{{>height + ~extraHeight()}}px\"></div>\\\n                                <div class=\"info\">\\\n                                    <span class=\"index\">{{:#index + 1}}</span>\\\n                                    <span class=\"label\" title=\"{{>label}}\">{{>label}}&nbsp;</span>\\\n                                    <span class=\"searchResults\" title=\"{{:~searchResultsTitle()}}\">{{>data.searchResults}}</span>\\\n                                </div>\\\n                             </div>\\\n                             {{if ~separator()}} \\\n                                 <div class=\"separator\"></div> \\\n                             {{/if}}'\n        });\n        var extraHeight = this.options.thumbsExtraHeight;\n        $.views.helpers({\n            separator: function () {\n                return false;\n            },\n            extraHeight: function () {\n                return extraHeight;\n            },\n            className: function () {\n                var className = \"thumb\";\n                if (this.data.index === 0) {\n                    className += \" first\";\n                }\n                if (!this.data.uri) {\n                    className += \" placeholder\";\n                }\n                var viewingDirection = that.extension.helper.getViewingDirection();\n                if (viewingDirection &&\n                    (viewingDirection === ViewingDirection.LEFT_TO_RIGHT ||\n                        viewingDirection === ViewingDirection.RIGHT_TO_LEFT)) {\n                    className += \" twoCol\";\n                }\n                else if (that.extension.helper.isPaged()) {\n                    className += \" twoCol\";\n                }\n                else {\n                    className += \" oneCol\";\n                }\n                return className;\n            },\n            searchResultsTitle: function () {\n                var searchResults = Number(this.data.data.searchResults);\n                if (searchResults) {\n                    if (searchResults > 1) {\n                        return Strings.format(that.content.searchResults, searchResults.toString());\n                    }\n                    return Strings.format(that.content.searchResult, searchResults.toString());\n                }\n                return \"\";\n            }\n        });\n        // use unevent to detect scroll stop.\n        this.$element.on(\"scroll\", function () {\n            _this.scrollStop();\n        }, 100);\n        this.resize();\n    };\n    ThumbsView.prototype.databind = function () {\n        if (!this.thumbs)\n            return;\n        this._$thumbsCache = null; // delete cache\n        this.createThumbs();\n        // do initial load to show padlocks\n        this.loadThumbs(0);\n        this.selectIndex(this.extension.helper.canvasIndex);\n    };\n    ThumbsView.prototype.createThumbs = function () {\n        var that = this;\n        if (!this.thumbs)\n            return;\n        // get median height\n        var heights = [];\n        for (var i = 0; i < this.thumbs.length; i++) {\n            var thumb = this.thumbs[i];\n            heights.push(thumb.height);\n        }\n        var medianHeight = Maths.median(heights);\n        for (var i = 0; i < this.thumbs.length; i++) {\n            var thumb = this.thumbs[i];\n            thumb.height = medianHeight;\n        }\n        this.$thumbs.link($.templates.thumbsTemplate, this.thumbs);\n        this.$thumbs.undelegate(\".thumb\", \"click\");\n        this.$thumbs.delegate(\".thumb\", \"click\", function (e) {\n            e.preventDefault();\n            var data = $.view(this).data;\n            that.lastThumbClickedIndex = data.index;\n            that.component.publish(BaseEvents.THUMB_SELECTED, data);\n        });\n        this.setLabel();\n        this.isCreated = true;\n    };\n    ThumbsView.prototype.scrollStop = function () {\n        var scrollPos = 1 /\n            ((this.$thumbs.height() - this.$element.height()) /\n                this.$element.scrollTop());\n        if (scrollPos > 1)\n            scrollPos = 1;\n        var thumbRangeMid = Math.floor((this.thumbs.length - 1) * scrollPos);\n        this.loadThumbs(thumbRangeMid);\n    };\n    ThumbsView.prototype.loadThumbs = function (index) {\n        if (index === void 0) { index = this.extension.helper.canvasIndex; }\n        if (!this.thumbs || !this.thumbs.length)\n            return;\n        var thumbType;\n        // get the type of the canvas content\n        var canvas = this.extension.helper.getCanvasByIndex(index);\n        var annotations = canvas.getContent();\n        if (annotations.length) {\n            var annotation = annotations[0];\n            var body = annotation.getBody();\n            if (body.length) {\n                var type = body[0].getType();\n                if (type) {\n                    thumbType = type.toString().toLowerCase();\n                }\n            }\n        }\n        var thumbRangeMid = index;\n        var thumbLoadRange = this.options.thumbsLoadRange;\n        var thumbRange = {\n            start: thumbRangeMid > thumbLoadRange ? thumbRangeMid - thumbLoadRange : 0,\n            end: thumbRangeMid < this.thumbs.length - 1 - thumbLoadRange\n                ? thumbRangeMid + thumbLoadRange\n                : this.thumbs.length - 1\n        };\n        var fadeDuration = this.options.thumbsImageFadeInDuration;\n        var that = this;\n        for (var i = thumbRange.start; i <= thumbRange.end; i++) {\n            var $thumb = this.getThumbByIndex(i);\n            var $wrap = $thumb.find(\".wrap\");\n            // if no img has been added yet\n            if (!$wrap.hasClass(\"loading\") && !$wrap.hasClass(\"loaded\")) {\n                var visible = $thumb.attr(\"data-visible\");\n                if (visible !== \"false\") {\n                    $wrap.removeClass(\"loadingFailed\");\n                    $wrap.addClass(\"loading\");\n                    if (thumbType) {\n                        $wrap.addClass(thumbType);\n                    }\n                    var src = $thumb.attr(\"data-src\");\n                    if (that.config.options.thumbsCacheInvalidation &&\n                        that.config.options.thumbsCacheInvalidation.enabled) {\n                        src += that.config.options.thumbsCacheInvalidation.paramType + \"t=\" + Dates.getTimeStamp();\n                    }\n                    var $img = $('<img src=\"' + src + '\" alt=\"\"/>');\n                    // fade in on load.\n                    $img.hide();\n                    $img.on(\"load\", function () {\n                        $(this).fadeIn(fadeDuration, function () {\n                            $(this)\n                                .parent()\n                                .switchClass(\"loading\", \"loaded\");\n                        });\n                    });\n                    $img.on(\"error\", function () {\n                        $(this)\n                            .parent()\n                            .switchClass(\"loading\", \"loadingFailed\");\n                    });\n                    $wrap.append($img);\n                }\n                else {\n                    $wrap.addClass(\"hidden\");\n                }\n            }\n        }\n    };\n    ThumbsView.prototype.show = function () {\n        var _this = this;\n        this.isOpen = true;\n        this.$element.show();\n        setTimeout(function () {\n            _this.selectIndex(_this.extension.helper.canvasIndex);\n        }, 1);\n    };\n    ThumbsView.prototype.hide = function () {\n        this.isOpen = false;\n        this.$element.hide();\n    };\n    ThumbsView.prototype.isPDF = function () {\n        var canvas = this.extension.helper.getCurrentCanvas();\n        var type = canvas.getType();\n        if (type) {\n            return type.toString().includes(\"pdf\");\n        }\n        return false;\n    };\n    ThumbsView.prototype.setLabel = function () {\n        $(this.$thumbs)\n            .find(\"span.index\")\n            .hide();\n        $(this.$thumbs)\n            .find(\"span.label\")\n            .show();\n    };\n    ThumbsView.prototype.addSelectedClassToThumbs = function (index) {\n        this.getThumbByIndex(index).addClass(\"selected\");\n    };\n    ThumbsView.prototype.selectIndex = function (index) {\n        // may be authenticating\n        if (index === -1)\n            return;\n        if (!this.thumbs || !this.thumbs.length)\n            return;\n        this.getAllThumbs().removeClass(\"selected\");\n        this.$selectedThumb = this.getThumbByIndex(index);\n        this.addSelectedClassToThumbs(index);\n        var indices = this.extension.getPagedIndices(index);\n        // scroll to thumb if the index change didn't originate\n        // within the thumbs view.\n        if (!~indices.indexOf(this.lastThumbClickedIndex)) {\n            this.$element.scrollTop(this.$selectedThumb.position().top);\n        }\n        // make sure visible images are loaded.\n        this.loadThumbs(index);\n    };\n    ThumbsView.prototype.getAllThumbs = function () {\n        if (!this._$thumbsCache) {\n            this._$thumbsCache = this.$thumbs.find(\".thumb\");\n        }\n        return this._$thumbsCache;\n    };\n    ThumbsView.prototype.getThumbByIndex = function (canvasIndex) {\n        return this.$thumbs.find('[data-index=\"' + canvasIndex + '\"]');\n    };\n    ThumbsView.prototype.scrollToThumb = function (canvasIndex) {\n        var $thumb = this.getThumbByIndex(canvasIndex);\n        this.$element.scrollTop($thumb.position().top);\n    };\n    ThumbsView.prototype.resize = function () {\n        _super.prototype.resize.call(this);\n    };\n    return ThumbsView;\n}(BaseView));\nexport { ThumbsView };\n"],"sourceRoot":""}